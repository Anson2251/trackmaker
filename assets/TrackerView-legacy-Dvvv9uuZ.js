!function(){function e(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t,r,o){var a=n(i(1&o?e.prototype:e),t,r);return 2&o&&"function"==typeof a?function(e){return a.apply(r,e)}:a}function n(){return n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},n.apply(null,arguments)}function r(e,t,n){return t=i(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,o()?Reflect.construct(t,n||[],i(e).constructor):t.apply(e,n))}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){d(i,r,o,a,s,"next",e)}function s(e){d(i,r,o,a,s,"throw",e)}a(void 0)})}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){x(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(b(e)+" is not iterable")}function y(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return m(u,"_invoke",function(n,r,o){var i,s,l,u=0,c=o||[],d=!1,h={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,l=e,h.n=n,a}};function p(n,r){for(s=n,l=r,t=0;!d&&u&&!o&&t<c.length;t++){var o,i=c[t],p=h.p,f=i[2];n>3?(o=f===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,h.v=r,h.n=i[1]):p<f&&(o=n<3||i[0]>r||r>f)&&(i[4]=n,i[5]=r,h.n=f,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,c,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&p(c,f),s=c,l=f;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(h.n=-1),p(s,l)):h.n=l:h.v=l);try{if(u=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=h.n<0)?l:n.call(r,h))!==a)break}catch(t){i=e,s=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,o,i),!0),u}var a={};function s(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(m(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(c);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,m(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=u,m(d,"constructor",u),m(u,"constructor",l),l.displayName="GeneratorFunction",m(u,o,"GeneratorFunction"),m(d),m(d,o,"Generator"),m(d,r,function(){return this}),m(d,"toString",function(){return"[object Generator]"}),(y=function(){return{w:i,m:h}})()}function m(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}m=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{function i(t,n){m(e,t,function(e){return this._invoke(t,n,e)})}i("next",0),i("throw",1),i("return",2)}},m(e,t,n,r)}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function x(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function C(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./index-legacy-COf_qzvg.js","./Image-legacy-05A7Aozs.js","./use-locale-legacy-DZGr1BWn.js","./Suffix-legacy-C304KyBD.js"],function(n,o){"use strict";var i,s,u,d,p,m,w,C,P,S,M,_,I,D,B,R,F,E,O,j,z,L,T,A,W,N,U,V,G,X,H,Y,K,q,Z,J,$,Q,ee,te,ne,re,oe,ie,ae,se,le,ue,ce,de,he,pe,fe,ve,ge,ye,me,be,xe,we,ke,Ce,Pe,Se,Me,_e,Ie,De,Be,Re,Fe,Ee,Oe,je,ze,Le,Te,Ae,We,Ne,Ue,Ve,Ge,Xe,He,Ye,Ke,qe,Ze,Je,$e,Qe,et,tt,nt,rt,ot,it,at,st,lt,ut,ct,dt,ht,pt,ft,vt,gt,yt,mt,bt,xt,wt,kt,Ct,Pt,St,Mt,_t,It,Dt,Bt,Rt,Ft,Et,Ot,jt,zt,Lt,Tt,At,Wt,Nt;return{setters:[function(e){i=e.d,s=e.c,u=e.o,d=e.a,p=e.b,m=e.i,w=e.e,C=e.f,P=e.h,S=e.r,M=e.g,_=e.j,I=e.k,D=e.l,B=e.m,R=e.n,F=e.N,E=e.p,O=e.q,j=e.E,z=e.W,L=e.I,T=e.S,A=e.s,W=e.t,N=e.u,U=e.v,V=e.w,G=e.x,X=e.y,H=e.z,Y=e.A,K=e.B,q=e.C,Z=e.D,J=e.F,$=e.G,Q=e.H,ee=e.J,te=e.K,ne=e.L,re=e.V,oe=e.M,ie=e.O,ae=e.P,se=e.Q,le=e.R,ue=e.T,ce=e.U,de=e.X,he=e.Y,pe=e.Z,fe=e._,ve=e.$,ge=e.a0,ye=e.a1,me=e.a2,be=e.a3,xe=e.a4,we=e.a5,ke=e.a6,Ce=e.a7,Pe=e.a8,Se=e.a9,Me=e.aa,_e=e.ab,Ie=e.ac,De=e.ad,Be=e.ae,Re=e.af,Fe=e.ag,Ee=e.ah,Oe=e.ai,je=e.aj,ze=e.ak,Le=e.al,Te=e.am,Ae=e.an,We=e.ao,Ne=e.ap,Ue=e.aq,Ve=e.ar,Ge=e.as,Xe=e.at,He=e.au,Ye=e.av,Ke=e.aw,qe=e.ax,Ze=e.ay,Je=e.az,$e=e.aA,Qe=e.aB,et=e.aC,tt=e.aD,nt=e.aE,rt=e.aF,ot=e.aG,it=e.aH,at=e.aI,st=e.aJ,lt=e.aK,ut=e.aL,ct=e.aM,dt=e.aN,ht=e.aO,pt=e.aP,ft=e.aQ,vt=e.aR,gt=e.aS,yt=e.aT,mt=e.aU,bt=e.aV,xt=e.aW,wt=e.aX,kt=e.aY,Ct=e.aZ,Pt=e.a_,St=e.a$,Mt=e.b0,_t=e.b1,It=e.b2,Dt=e.b3,Bt=e.b4,Rt=e.b5,Ft=e.b6,Et=e.b7},function(e){Ot=e.N,jt=e.D,zt=e.d,Lt=e.a},function(e){Tt=e.t,At=e.u},function(e){Wt=e.N,Nt=e.a}],execute:function(){var o={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Ut=i({name:"Backspace",render:function(e,t){return u(),s("svg",o,t[0]||(t[0]=[d("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[d("path",{d:"M20 6a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H9l-5-5a1.5 1.5 0 0 1 0-2l5-5z"}),d("path",{d:"M12 10l4 4m0-4l-4 4"})],-1)]))}}),Vt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Gt=i({name:"DeviceFloppy",render:function(e,t){return u(),s("svg",Vt,t[0]||(t[0]=[d("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[d("path",{d:"M6 4h10l4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2"}),d("circle",{cx:"12",cy:"14",r:"2"}),d("path",{d:"M14 4v4H8V4"})],-1)]))}}),Xt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Ht=i({name:"HandFinger",render:function(e,t){return u(),s("svg",Xt,t[0]||(t[0]=[p('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 13V4.5a1.5 1.5 0 0 1 3 0V12"></path><path d="M11 11.5v-2a1.5 1.5 0 1 1 3 0V12"></path><path d="M14 10.5a1.5 1.5 0 0 1 3 0V12"></path><path d="M17 11.5a1.5 1.5 0 0 1 3 0V16a6 6 0 0 1-6 6h-2h.208a6 6 0 0 1-5.012-2.7A69.74 69.74 0 0 1 7 19c-.312-.479-1.407-2.388-3.286-5.728a1.5 1.5 0 0 1 .536-2.022a1.867 1.867 0 0 1 2.28.28L8 13"></path></g>',1)]))}}),Yt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Kt=i({name:"Line",render:function(e,t){return u(),s("svg",Yt,t[0]||(t[0]=[d("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[d("circle",{cx:"6",cy:"18",r:"2"}),d("circle",{cx:"18",cy:"6",r:"2"}),d("path",{d:"M7.5 16.5l9-9"})],-1)]))}}),qt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Zt=i({name:"MapPin",render:function(e,t){return u(),s("svg",qt,t[0]||(t[0]=[d("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[d("circle",{cx:"12",cy:"11",r:"3"}),d("path",{d:"M17.657 16.657L13.414 20.9a2 2 0 0 1-2.827 0l-4.244-4.243a8 8 0 1 1 11.314 0z"})],-1)]))}}),Jt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},$t=i({name:"PlayerRecord",render:function(e,t){return u(),s("svg",Jt,t[0]||(t[0]=[d("circle",{cx:"12",cy:"12",r:"7",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}}),Qt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},en=i({name:"Route",render:function(e,t){return u(),s("svg",Qt,t[0]||(t[0]=[d("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[d("circle",{cx:"6",cy:"19",r:"2"}),d("circle",{cx:"18",cy:"5",r:"2"}),d("path",{d:"M12 19h4.5a3.5 3.5 0 0 0 0-7h-8a3.5 3.5 0 0 1 0-7H12"})],-1)]))}}),tn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},nn=i({name:"Square",render:function(e,t){return u(),s("svg",tn,t[0]||(t[0]=[d("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}}),rn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},on=i({name:"Trash",render:function(e,t){return u(),s("svg",rn,t[0]||(t[0]=[p('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"></path><path d="M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"></path></g>',1)]))}}),an={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},sn=i({name:"Upload",render:function(e,t){return u(),s("svg",an,t[0]||(t[0]=[d("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[d("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"}),d("path",{d:"M7 9l5-5l5 5"}),d("path",{d:"M12 4v12"})],-1)]))}});function ln(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=Tt(n))==n?n:0),void 0!==t&&(t=(t=Tt(t))==t?t:0),function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}(Tt(e),t,n)}function un(e){return"string"==typeof e||!w(e)&&m(e)&&"[object String]"==C(e)}var cn=i({name:"Add",render:function(){return P("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}}),dn=S("attach",function(){return P("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},P("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},P("g",{fill:"currentColor","fill-rule":"nonzero"},P("path",{d:"M3.25735931,8.70710678 L7.85355339,4.1109127 C8.82986412,3.13460197 10.4127766,3.13460197 11.3890873,4.1109127 C12.365398,5.08722343 12.365398,6.67013588 11.3890873,7.64644661 L6.08578644,12.9497475 C5.69526215,13.3402718 5.06209717,13.3402718 4.67157288,12.9497475 C4.28104858,12.5592232 4.28104858,11.9260582 4.67157288,11.5355339 L9.97487373,6.23223305 C10.1701359,6.0369709 10.1701359,5.72038841 9.97487373,5.52512627 C9.77961159,5.32986412 9.4630291,5.32986412 9.26776695,5.52512627 L3.96446609,10.8284271 C3.18341751,11.6094757 3.18341751,12.8758057 3.96446609,13.6568542 C4.74551468,14.4379028 6.01184464,14.4379028 6.79289322,13.6568542 L12.0961941,8.35355339 C13.4630291,6.98671837 13.4630291,4.77064094 12.0961941,3.40380592 C10.7293591,2.0369709 8.51328163,2.0369709 7.14644661,3.40380592 L2.55025253,8 C2.35499039,8.19526215 2.35499039,8.51184464 2.55025253,8.70710678 C2.74551468,8.90236893 3.06209717,8.90236893 3.25735931,8.70710678 Z"}))))}),hn=S("cancel",function(){return P("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},P("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},P("g",{fill:"currentColor","fill-rule":"nonzero"},P("path",{d:"M2.58859116,2.7156945 L2.64644661,2.64644661 C2.82001296,2.47288026 3.08943736,2.45359511 3.2843055,2.58859116 L3.35355339,2.64644661 L8,7.293 L12.6464466,2.64644661 C12.8417088,2.45118446 13.1582912,2.45118446 13.3535534,2.64644661 C13.5488155,2.84170876 13.5488155,3.15829124 13.3535534,3.35355339 L8.707,8 L13.3535534,12.6464466 C13.5271197,12.820013 13.5464049,13.0894374 13.4114088,13.2843055 L13.3535534,13.3535534 C13.179987,13.5271197 12.9105626,13.5464049 12.7156945,13.4114088 L12.6464466,13.3535534 L8,8.707 L3.35355339,13.3535534 C3.15829124,13.5488155 2.84170876,13.5488155 2.64644661,13.3535534 C2.45118446,13.1582912 2.45118446,12.8417088 2.64644661,12.6464466 L7.293,8 L2.64644661,3.35355339 C2.47288026,3.17998704 2.45359511,2.91056264 2.58859116,2.7156945 L2.64644661,2.64644661 L2.58859116,2.7156945 Z"}))))}),pn=i({name:"Eye",render:function(){return P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},P("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"}),P("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}))}}),fn=i({name:"EyeOff",render:function(){return P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},P("path",{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448z",fill:"currentColor"}),P("path",{d:"M255.66 384c-41.49 0-81.5-12.28-118.92-36.5c-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 0 0 .14-2.94L93.5 161.38a2 2 0 0 0-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0 0 75.8-12.58a2 2 0 0 0 .77-3.31l-21.58-21.58a4 4 0 0 0-3.83-1a204.8 204.8 0 0 1-51.16 6.47z",fill:"currentColor"}),P("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 0 0-74.89 12.83a2 2 0 0 0-.75 3.31l21.55 21.55a4 4 0 0 0 3.88 1a192.82 192.82 0 0 1 50.21-6.69c40.69 0 80.58 12.43 118.55 37c34.71 22.4 65.74 53.88 89.76 91a.13.13 0 0 1 0 .16a310.72 310.72 0 0 1-64.12 72.73a2 2 0 0 0-.15 2.95l19.9 19.89a2 2 0 0 0 2.7.13a343.49 343.49 0 0 0 68.64-78.48a32.2 32.2 0 0 0-.1-34.78z",fill:"currentColor"}),P("path",{d:"M256 160a95.88 95.88 0 0 0-21.37 2.4a2 2 0 0 0-1 3.38l112.59 112.56a2 2 0 0 0 3.38-1A96 96 0 0 0 256 160z",fill:"currentColor"}),P("path",{d:"M165.78 233.66a2 2 0 0 0-3.38 1a96 96 0 0 0 115 115a2 2 0 0 0 1-3.38z",fill:"currentColor"}))}}),vn=S("retry",function(){return P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},P("path",{d:"M320,146s24.36-12-64-12A160,160,0,1,0,416,294",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-miterlimit: 10; stroke-width: 32px;"}),P("polyline",{points:"256 58 336 138 256 218",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))}),gn=S("trash",function(){return P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},P("path",{d:"M432,144,403.33,419.74A32,32,0,0,1,371.55,448H140.46a32,32,0,0,1-31.78-28.26L80,144",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),P("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),P("line",{x1:"312",y1:"240",x2:"200",y2:"352",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),P("line",{x1:"312",y1:"352",x2:"200",y2:"240",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))}),yn=M("alert","\n line-height: var(--n-line-height);\n border-radius: var(--n-border-radius);\n position: relative;\n transition: background-color .3s var(--n-bezier);\n background-color: var(--n-color);\n text-align: start;\n word-break: break-word;\n",[_("border","\n border-radius: inherit;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n transition: border-color .3s var(--n-bezier);\n border: var(--n-border);\n pointer-events: none;\n "),I("closable",[M("alert-body",[_("title","\n padding-right: 24px;\n ")])]),_("icon",{color:"var(--n-icon-color)"}),M("alert-body",{padding:"var(--n-padding)"},[_("title",{color:"var(--n-title-text-color)"}),_("content",{color:"var(--n-content-text-color)"})]),D({originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.9)"}}),_("icon","\n position: absolute;\n left: 0;\n top: 0;\n align-items: center;\n justify-content: center;\n display: flex;\n width: var(--n-icon-size);\n height: var(--n-icon-size);\n font-size: var(--n-icon-size);\n margin: var(--n-icon-margin);\n "),_("close","\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n position: absolute;\n right: 0;\n top: 0;\n margin: var(--n-close-margin);\n "),I("show-icon",[M("alert-body",{paddingLeft:"calc(var(--n-icon-margin-left) + var(--n-icon-size) + var(--n-icon-margin-right))"})]),I("right-adjust",[M("alert-body",{paddingRight:"calc(var(--n-close-size) + var(--n-padding) + 2px)"})]),M("alert-body","\n border-radius: var(--n-border-radius);\n transition: border-color .3s var(--n-bezier);\n ",[_("title","\n transition: color .3s var(--n-bezier);\n font-size: 16px;\n line-height: 19px;\n font-weight: var(--n-title-font-weight);\n ",[B("& +",[_("content",{marginTop:"9px"})])]),_("content",{transition:"color .3s var(--n-bezier)",fontSize:"var(--n-font-size)"})]),_("icon",{transition:"color .3s var(--n-bezier)"})]),mn=Object.assign(Object.assign({},U.props),{title:String,showIcon:{type:Boolean,default:!0},type:{type:String,default:"default"},bordered:{type:Boolean,default:!0},closable:Boolean,onClose:Function,onAfterLeave:Function,onAfterHide:Function}),bn=i({name:"Alert",inheritAttrs:!1,props:mn,slots:Object,setup:function(e){var t=N(e),n=t.mergedClsPrefixRef,r=t.mergedBorderedRef,o=t.inlineThemeDisabled,i=t.mergedRtlRef,a=U("Alert","-alert",yn,V,e,n),s=G("Alert",i,n),l=X(function(){var t=a.value,n=t.common.cubicBezierEaseInOut,r=t.self,o=r.fontSize,i=r.borderRadius,s=r.titleFontWeight,l=r.lineHeight,u=r.iconSize,c=r.iconMargin,d=r.iconMarginRtl,h=r.closeIconSize,p=r.closeBorderRadius,f=r.closeSize,v=r.closeMargin,g=r.closeMarginRtl,y=r.padding,m=e.type,b=H(c),x=b.left,w=b.right;return{"--n-bezier":n,"--n-color":r[Y("color",m)],"--n-close-icon-size":h,"--n-close-border-radius":p,"--n-close-color-hover":r[Y("closeColorHover",m)],"--n-close-color-pressed":r[Y("closeColorPressed",m)],"--n-close-icon-color":r[Y("closeIconColor",m)],"--n-close-icon-color-hover":r[Y("closeIconColorHover",m)],"--n-close-icon-color-pressed":r[Y("closeIconColorPressed",m)],"--n-icon-color":r[Y("iconColor",m)],"--n-border":r[Y("border",m)],"--n-title-text-color":r[Y("titleTextColor",m)],"--n-content-text-color":r[Y("contentTextColor",m)],"--n-line-height":l,"--n-border-radius":i,"--n-font-size":o,"--n-title-font-weight":s,"--n-icon-size":u,"--n-icon-margin":c,"--n-icon-margin-rtl":d,"--n-close-size":f,"--n-close-margin":v,"--n-close-margin-rtl":g,"--n-padding":y,"--n-icon-margin-left":x,"--n-icon-margin-right":w}}),u=o?K("alert",X(function(){return e.type[0]}),l,e):void 0,c=q(!0);return{rtlEnabled:s,mergedClsPrefix:n,mergedBordered:r,visible:c,handleCloseClick:function(){var t;Promise.resolve(null===(t=e.onClose)||void 0===t?void 0:t.call(e)).then(function(e){!1!==e&&(c.value=!1)})},handleAfterLeave:function(){var t,n;t=e.onAfterLeave,n=e.onAfterHide,t&&t(),n&&n()},mergedTheme:a,cssVars:o?void 0:l,themeClass:null==u?void 0:u.themeClass,onRender:null==u?void 0:u.onRender}},render:function(){var e,t=this;return null===(e=this.onRender)||void 0===e||e.call(this),P(W,{onAfterLeave:this.handleAfterLeave},{default:function(){var e=t.mergedClsPrefix,n=t.$slots,r={class:["".concat(e,"-alert"),t.themeClass,t.closable&&"".concat(e,"-alert--closable"),t.showIcon&&"".concat(e,"-alert--show-icon"),!t.title&&t.closable&&"".concat(e,"-alert--right-adjust"),t.rtlEnabled&&"".concat(e,"-alert--rtl")],style:t.cssVars,role:"alert"};return t.visible?P("div",Object.assign({},R(t.$attrs,r)),t.closable&&P(F,{clsPrefix:e,class:"".concat(e,"-alert__close"),onClick:t.handleCloseClick}),t.bordered&&P("div",{class:"".concat(e,"-alert__border")}),t.showIcon&&P("div",{class:"".concat(e,"-alert__icon"),"aria-hidden":"true"},E(n.icon,function(){return[P(O,{clsPrefix:e},{default:function(){switch(t.type){case"success":return P(T,null);case"info":return P(L,null);case"warning":return P(z,null);case"error":return P(j,null);default:return null}}})]})),P("div",{class:["".concat(e,"-alert-body"),t.mergedBordered&&"".concat(e,"-alert-body--bordered")]},A(n.header,function(n){var r=n||t.title;return r?P("div",{class:"".concat(e,"-alert-body__title")},r):null}),n.default&&P("div",{class:"".concat(e,"-alert-body__content")},n))):null}})}}),xn=Z("n-input"),wn=M("input","\n max-width: 100%;\n cursor: text;\n line-height: 1.5;\n z-index: auto;\n outline: none;\n box-sizing: border-box;\n position: relative;\n display: inline-flex;\n border-radius: var(--n-border-radius);\n background-color: var(--n-color);\n transition: background-color .3s var(--n-bezier);\n font-size: var(--n-font-size);\n font-weight: var(--n-font-weight);\n --n-padding-vertical: calc((var(--n-height) - 1.5 * var(--n-font-size)) / 2);\n",[_("input, textarea","\n overflow: hidden;\n flex-grow: 1;\n position: relative;\n "),_("input-el, textarea-el, input-mirror, textarea-mirror, separator, placeholder","\n box-sizing: border-box;\n font-size: inherit;\n line-height: 1.5;\n font-family: inherit;\n border: none;\n outline: none;\n background-color: #0000;\n text-align: inherit;\n transition:\n -webkit-text-fill-color .3s var(--n-bezier),\n caret-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n text-decoration-color .3s var(--n-bezier);\n "),_("input-el, textarea-el","\n -webkit-appearance: none;\n scrollbar-width: none;\n width: 100%;\n min-width: 0;\n text-decoration-color: var(--n-text-decoration-color);\n color: var(--n-text-color);\n caret-color: var(--n-caret-color);\n background-color: transparent;\n ",[B("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb","\n width: 0;\n height: 0;\n display: none;\n "),B("&::placeholder","\n color: #0000;\n -webkit-text-fill-color: transparent !important;\n "),B("&:-webkit-autofill ~",[_("placeholder","display: none;")])]),I("round",[J("textarea","border-radius: calc(var(--n-height) / 2);")]),_("placeholder","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n overflow: hidden;\n color: var(--n-placeholder-color);\n ",[B("span","\n width: 100%;\n display: inline-block;\n ")]),I("textarea",[_("placeholder","overflow: visible;")]),J("autosize","width: 100%;"),I("autosize",[_("textarea-el, input-el","\n position: absolute;\n top: 0;\n left: 0;\n height: 100%;\n ")]),M("input-wrapper","\n overflow: hidden;\n display: inline-flex;\n flex-grow: 1;\n position: relative;\n padding-left: var(--n-padding-left);\n padding-right: var(--n-padding-right);\n "),_("input-mirror","\n padding: 0;\n height: var(--n-height);\n line-height: var(--n-height);\n overflow: hidden;\n visibility: hidden;\n position: static;\n white-space: pre;\n pointer-events: none;\n "),_("input-el","\n padding: 0;\n height: var(--n-height);\n line-height: var(--n-height);\n ",[B("&[type=password]::-ms-reveal","display: none;"),B("+",[_("placeholder","\n display: flex;\n align-items: center; \n ")])]),J("textarea",[_("placeholder","white-space: nowrap;")]),_("eye","\n display: flex;\n align-items: center;\n justify-content: center;\n transition: color .3s var(--n-bezier);\n "),I("textarea","width: 100%;",[M("input-word-count","\n position: absolute;\n right: var(--n-padding-right);\n bottom: var(--n-padding-vertical);\n "),I("resizable",[M("input-wrapper","\n resize: vertical;\n min-height: var(--n-height);\n ")]),_("textarea-el, textarea-mirror, placeholder","\n height: 100%;\n padding-left: 0;\n padding-right: 0;\n padding-top: var(--n-padding-vertical);\n padding-bottom: var(--n-padding-vertical);\n word-break: break-word;\n display: inline-block;\n vertical-align: bottom;\n box-sizing: border-box;\n line-height: var(--n-line-height-textarea);\n margin: 0;\n resize: none;\n white-space: pre-wrap;\n scroll-padding-block-end: var(--n-padding-vertical);\n "),_("textarea-mirror","\n width: 100%;\n pointer-events: none;\n overflow: hidden;\n visibility: hidden;\n position: static;\n white-space: pre-wrap;\n overflow-wrap: break-word;\n ")]),I("pair",[_("input-el, placeholder","text-align: center;"),_("separator","\n display: flex;\n align-items: center;\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n white-space: nowrap;\n ",[M("icon","\n color: var(--n-icon-color);\n "),M("base-icon","\n color: var(--n-icon-color);\n ")])]),I("disabled","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n ",[_("border","border: var(--n-border-disabled);"),_("input-el, textarea-el","\n cursor: not-allowed;\n color: var(--n-text-color-disabled);\n text-decoration-color: var(--n-text-color-disabled);\n "),_("placeholder","color: var(--n-placeholder-color-disabled);"),_("separator","color: var(--n-text-color-disabled);",[M("icon","\n color: var(--n-icon-color-disabled);\n "),M("base-icon","\n color: var(--n-icon-color-disabled);\n ")]),M("input-word-count","\n color: var(--n-count-text-color-disabled);\n "),_("suffix, prefix","color: var(--n-text-color-disabled);",[M("icon","\n color: var(--n-icon-color-disabled);\n "),M("internal-icon","\n color: var(--n-icon-color-disabled);\n ")])]),J("disabled",[_("eye","\n color: var(--n-icon-color);\n cursor: pointer;\n ",[B("&:hover","\n color: var(--n-icon-color-hover);\n "),B("&:active","\n color: var(--n-icon-color-pressed);\n ")]),B("&:hover",[_("state-border","border: var(--n-border-hover);")]),I("focus","background-color: var(--n-color-focus);",[_("state-border","\n border: var(--n-border-focus);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),_("border, state-border","\n box-sizing: border-box;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border-radius: inherit;\n border: var(--n-border);\n transition:\n box-shadow .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n "),_("state-border","\n border-color: #0000;\n z-index: 1;\n "),_("prefix","margin-right: 4px;"),_("suffix","\n margin-left: 4px;\n "),_("suffix, prefix","\n transition: color .3s var(--n-bezier);\n flex-wrap: nowrap;\n flex-shrink: 0;\n line-height: var(--n-height);\n white-space: nowrap;\n display: inline-flex;\n align-items: center;\n justify-content: center;\n color: var(--n-suffix-text-color);\n ",[M("base-loading","\n font-size: var(--n-icon-size);\n margin: 0 2px;\n color: var(--n-loading-color);\n "),M("base-clear","\n font-size: var(--n-icon-size);\n ",[_("placeholder",[M("base-icon","\n transition: color .3s var(--n-bezier);\n color: var(--n-icon-color);\n font-size: var(--n-icon-size);\n ")])]),B(">",[M("icon","\n transition: color .3s var(--n-bezier);\n color: var(--n-icon-color);\n font-size: var(--n-icon-size);\n ")]),M("base-icon","\n font-size: var(--n-icon-size);\n ")]),M("input-word-count","\n pointer-events: none;\n line-height: 1.5;\n font-size: .85em;\n color: var(--n-count-text-color);\n transition: color .3s var(--n-bezier);\n margin-left: 4px;\n font-variant: tabular-nums;\n "),["warning","error"].map(function(e){return I("".concat(e,"-status"),[J("disabled",[M("base-loading","\n color: var(--n-loading-color-".concat(e,")\n ")),_("input-el, textarea-el","\n caret-color: var(--n-caret-color-".concat(e,");\n ")),_("state-border","\n border: var(--n-border-".concat(e,");\n ")),B("&:hover",[_("state-border","\n border: var(--n-border-hover-".concat(e,");\n "))]),B("&:focus","\n background-color: var(--n-color-focus-".concat(e,");\n "),[_("state-border","\n box-shadow: var(--n-box-shadow-focus-".concat(e,");\n border: var(--n-border-focus-").concat(e,");\n "))]),I("focus","\n background-color: var(--n-color-focus-".concat(e,");\n "),[_("state-border","\n box-shadow: var(--n-box-shadow-focus-".concat(e,");\n border: var(--n-border-focus-").concat(e,");\n "))])])])})]),kn=M("input",[I("disabled",[_("input-el, textarea-el","\n -webkit-text-fill-color: var(--n-text-color-disabled);\n ")])]);function Cn(e){var t,n=0,r=k(e);try{for(r.s();!(t=r.n()).done;){t.value;n++}}catch(o){r.e(o)}finally{r.f()}return n}function Pn(e){return""===e||null==e}var Sn=i({name:"InputWordCount",setup:function(e,t){var n=t.slots,r=Q(xn),o=r.mergedValueRef,i=r.maxlengthRef,a=r.mergedClsPrefixRef,s=r.countGraphemesRef,l=X(function(){var e=o.value;return null===e||Array.isArray(e)?0:(s.value||Cn)(e)});return function(){var e=i.value,t=o.value;return P("span",{class:"".concat(a.value,"-input-word-count")},ee(n.default,{value:null===t||Array.isArray(t)?"":t},function(){return[void 0===e?l.value:"".concat(l.value," / ").concat(e)]}))}}}),Mn=Object.assign(Object.assign({},U.props),{bordered:{type:Boolean,default:void 0},type:{type:String,default:"text"},placeholder:[Array,String],defaultValue:{type:[String,Array],default:null},value:[String,Array],disabled:{type:Boolean,default:void 0},size:String,rows:{type:[Number,String],default:3},round:Boolean,minlength:[String,Number],maxlength:[String,Number],clearable:Boolean,autosize:{type:[Boolean,Object],default:!1},pair:Boolean,separator:String,readonly:{type:[String,Boolean],default:!1},passivelyActivated:Boolean,showPasswordOn:String,stateful:{type:Boolean,default:!0},autofocus:Boolean,inputProps:Object,resizable:{type:Boolean,default:!0},showCount:Boolean,loading:{type:Boolean,default:void 0},allowInput:Function,renderCount:Function,onMousedown:Function,onKeydown:Function,onKeyup:[Function,Array],onInput:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClick:[Function,Array],onChange:[Function,Array],onClear:[Function,Array],countGraphemes:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],textDecoration:[String,Array],attrSize:{type:Number,default:20},onInputBlur:[Function,Array],onInputFocus:[Function,Array],onDeactivate:[Function,Array],onActivate:[Function,Array],onWrapperFocus:[Function,Array],onWrapperBlur:[Function,Array],internalDeactivateOnEnter:Boolean,internalForceFocus:Boolean,internalLoadingBeforeSuffix:{type:Boolean,default:!0},showPasswordToggle:Boolean}),_n=i({name:"Input",props:Mn,slots:Object,setup:function(e){var t=N(e),n=t.mergedClsPrefixRef,r=t.mergedBorderedRef,o=t.inlineThemeDisabled,i=t.mergedRtlRef,a=U("Input","-input",wn,oe,e,n);ie&&ae("-input-safari",kn,n);var s=q(null),l=q(null),u=q(null),c=q(null),d=q(null),h=q(null),p=q(null),f=function(e){var t=q(null);function n(){t.value=null}return $(e,n),{recordCursor:function(){var r=e.value;if(null==r?void 0:r.focus){var o=r.selectionStart,i=r.selectionEnd,a=r.value;null!=o&&null!=i?t.value={start:o,end:i,beforeText:a.slice(0,o),afterText:a.slice(i)}:n()}else n()},restoreCursor:function(){var n,r=t.value,o=e.value;if(r&&o){var i=o.value,a=r.start,s=r.beforeText,l=r.afterText,u=i.length;if(i.endsWith(l))u=i.length-l.length;else if(i.startsWith(s))u=s.length;else{var c=s[a-1],d=i.indexOf(c,a-1);-1!==d&&(u=d+1)}null===(n=o.setSelectionRange)||void 0===n||n.call(o,u,u)}}}}(p),v=q(null),g=At("Input").localeRef,y=q(e.defaultValue),m=se(e,"value"),b=le(m,y),x=ue(e),w=x.mergedSizeRef,k=x.mergedDisabledRef,C=x.mergedStatusRef,P=q(!1),S=q(!1),M=q(!1),_=q(!1),I=null,D=X(function(){var t=e.placeholder;return e.pair?Array.isArray(t)?t:void 0===t?["",""]:[t,t]:void 0===t?[g.value.placeholder]:[t]}),B=X(function(){var e=M.value,t=b.value,n=D.value;return!e&&(Pn(t)||Array.isArray(t)&&Pn(t[0]))&&n[0]}),R=X(function(){var e=M.value,t=b.value,n=D.value;return!e&&n[1]&&(Pn(t)||Array.isArray(t)&&Pn(t[1]))}),F=ce(function(){return e.internalForceFocus||P.value}),E=ce(function(){if(k.value||e.readonly||!e.clearable||!F.value&&!S.value)return!1;var t=b.value,n=F.value;return e.pair?!(!Array.isArray(t)||!t[0]&&!t[1])&&(S.value||n):!!t&&(S.value||n)}),O=X(function(){var t=e.showPasswordOn;return t||(e.showPasswordToggle?"click":void 0)}),j=q(!1),z=X(function(){var t=e.textDecoration;return t?Array.isArray(t)?t.map(function(e){return{textDecoration:e}}):[{textDecoration:t}]:["",""]}),L=q(void 0),T=X(function(){var t=e.maxlength;return void 0===t?void 0:Number(t)});de(function(){var e=b.value;Array.isArray(e)||ne(e)});var A=he().proxy;function W(t,n){var r=e.onUpdateValue,o=e["onUpdate:value"],i=e.onInput,a=x.nTriggerFormInput;r&&ye(r,t,n),o&&ye(o,t,n),i&&ye(i,t,n),y.value=t,a()}function V(t,n){var r=e.onChange,o=x.nTriggerFormChange;r&&ye(r,t,n),y.value=t,o()}function Z(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"input",o=t.target.value;if(ne(o),t instanceof InputEvent&&!t.isComposing&&(M.value=!1),"textarea"===e.type){var i=v.value;i&&i.syncUnifiedContainer()}if(I=o,!M.value){f.recordCursor();var a=function(t){var n=e.countGraphemes,r=e.maxlength,o=e.minlength;if(n){var i;if(void 0!==r&&(void 0===i&&(i=n(t)),i>Number(r)))return!1;if(void 0!==o&&(void 0===i&&(i=n(t)),i<Number(r)))return!1}var a=e.allowInput;if("function"==typeof a)return a(t);return!0}(o);if(a)if(e.pair){var s=b.value;(s=Array.isArray(s)?[s[0],s[1]]:["",""])[n]=o,"input"===r?W(s,{source:n}):V(s,{source:n})}else"input"===r?W(o,{source:n}):V(o,{source:n});A.$forceUpdate(),a||ve(f.restoreCursor)}}function J(t,n){(null===t.relatedTarget||t.relatedTarget!==d.value&&t.relatedTarget!==h.value&&t.relatedTarget!==l.value&&t.relatedTarget!==s.value)&&("focus"===n?(!function(t){var n=e.onFocus,r=x.nTriggerFormFocus;n&&ye(n,t),r()}(t),P.value=!0):"blur"===n&&(!function(t){var n=e.onBlur,r=x.nTriggerFormBlur;n&&ye(n,t),r()}(t),P.value=!1))}function Q(){e.pair?(W(["",""],{source:"clear"}),V(["",""],{source:"clear"})):(W("",{source:"clear"}),V("",{source:"clear"}))}function ee(){e.passivelyActivated&&(_.value=!1,ve(function(){var e;null===(e=s.value)||void 0===e||e.focus()}))}function te(){var t,n,r;k.value||(e.passivelyActivated?null===(t=s.value)||void 0===t||t.focus():(null===(n=l.value)||void 0===n||n.focus(),null===(r=d.value)||void 0===r||r.focus()))}function ne(t){var n=e.type,r=e.pair,o=e.autosize;if(!r&&o)if("textarea"===n){var i=u.value;i&&(i.textContent="".concat(null!=t?t:"","\r\n"))}else{var a=c.value;a&&(t?a.textContent=t:a.innerHTML="&nbsp;")}}var re=q({top:"0"});var be=null;pe(function(){var t=e.autosize,n=e.type;t&&"textarea"===n?be=$(b,function(e){Array.isArray(e)||e===I||ne(e)}):null==be||be()});var xe=null;pe(function(){"textarea"===e.type?xe=$(b,function(e){var t;Array.isArray(e)||e===I||null===(t=v.value)||void 0===t||t.syncUnifiedContainer()}):null==xe||xe()}),fe(xn,{mergedValueRef:b,maxlengthRef:T,mergedClsPrefixRef:n,countGraphemesRef:se(e,"countGraphemes")});var we={wrapperElRef:s,inputElRef:d,textareaElRef:l,isCompositing:M,clear:Q,focus:te,blur:function(){var e;(null===(e=s.value)||void 0===e?void 0:e.contains(document.activeElement))&&document.activeElement.blur()},select:function(){var e,t;null===(e=l.value)||void 0===e||e.select(),null===(t=d.value)||void 0===t||t.select()},deactivate:function(){var e=s.value;(null==e?void 0:e.contains(document.activeElement))&&e!==document.activeElement&&ee()},activate:function(){k.value||(l.value?l.value.focus():d.value&&d.value.focus())},scrollTo:function(t){if("textarea"===e.type){var n=l.value;null==n||n.scrollTo(t)}else{var r=d.value;null==r||r.scrollTo(t)}}},ke=G("Input",i,n),Ce=X(function(){var e=w.value,t=a.value,n=t.common.cubicBezierEaseInOut,r=t.self,o=r.color,i=r.borderRadius,s=r.textColor,l=r.caretColor,u=r.caretColorError,c=r.caretColorWarning,d=r.textDecorationColor,h=r.border,p=r.borderDisabled,f=r.borderHover,v=r.borderFocus,g=r.placeholderColor,y=r.placeholderColorDisabled,m=r.lineHeightTextarea,b=r.colorDisabled,x=r.colorFocus,k=r.textColorDisabled,C=r.boxShadowFocus,P=r.iconSize,S=r.colorFocusWarning,M=r.boxShadowFocusWarning,_=r.borderWarning,I=r.borderFocusWarning,D=r.borderHoverWarning,B=r.colorFocusError,R=r.boxShadowFocusError,F=r.borderError,E=r.borderFocusError,O=r.borderHoverError,j=r.clearSize,z=r.clearColor,L=r.clearColorHover,T=r.clearColorPressed,A=r.iconColor,W=r.iconColorDisabled,N=r.suffixTextColor,U=r.countTextColor,V=r.countTextColorDisabled,G=r.iconColorHover,X=r.iconColorPressed,K=r.loadingColor,q=r.loadingColorError,Z=r.loadingColorWarning,J=r.fontWeight,$=r[Y("padding",e)],Q=r[Y("fontSize",e)],ee=r[Y("height",e)],te=H($);return{"--n-bezier":n,"--n-count-text-color":U,"--n-count-text-color-disabled":V,"--n-color":o,"--n-font-size":Q,"--n-font-weight":J,"--n-border-radius":i,"--n-height":ee,"--n-padding-left":te.left,"--n-padding-right":te.right,"--n-text-color":s,"--n-caret-color":l,"--n-text-decoration-color":d,"--n-border":h,"--n-border-disabled":p,"--n-border-hover":f,"--n-border-focus":v,"--n-placeholder-color":g,"--n-placeholder-color-disabled":y,"--n-icon-size":P,"--n-line-height-textarea":m,"--n-color-disabled":b,"--n-color-focus":x,"--n-text-color-disabled":k,"--n-box-shadow-focus":C,"--n-loading-color":K,"--n-caret-color-warning":c,"--n-color-focus-warning":S,"--n-box-shadow-focus-warning":M,"--n-border-warning":_,"--n-border-focus-warning":I,"--n-border-hover-warning":D,"--n-loading-color-warning":Z,"--n-caret-color-error":u,"--n-color-focus-error":B,"--n-box-shadow-focus-error":R,"--n-border-error":F,"--n-border-focus-error":E,"--n-border-hover-error":O,"--n-loading-color-error":q,"--n-clear-color":z,"--n-clear-size":j,"--n-clear-color-hover":L,"--n-clear-color-pressed":T,"--n-icon-color":A,"--n-icon-color-hover":G,"--n-icon-color-pressed":X,"--n-icon-color-disabled":W,"--n-suffix-text-color":N}}),Pe=o?K("input",X(function(){return w.value[0]}),Ce,e):void 0;return Object.assign(Object.assign({},we),{wrapperElRef:s,inputElRef:d,inputMirrorElRef:c,inputEl2Ref:h,textareaElRef:l,textareaMirrorElRef:u,textareaScrollbarInstRef:v,rtlEnabled:ke,uncontrolledValue:y,mergedValue:b,passwordVisible:j,mergedPlaceholder:D,showPlaceholder1:B,showPlaceholder2:R,mergedFocus:F,isComposing:M,activated:_,showClearButton:E,mergedSize:w,mergedDisabled:k,textDecorationStyle:z,mergedClsPrefix:n,mergedBordered:r,mergedShowPasswordOn:O,placeholderStyle:re,mergedStatus:C,textAreaScrollContainerWidth:L,handleTextAreaScroll:function(e){var t,n=e.target.scrollTop;re.value.top="".concat(-n,"px"),null===(t=v.value)||void 0===t||t.syncUnifiedContainer()},handleCompositionStart:function(){M.value=!0},handleCompositionEnd:function(e){M.value=!1,e.target===h.value?Z(e,1):Z(e,0)},handleInput:Z,handleInputBlur:function(t){var n;!function(t){var n=e.onInputBlur;n&&ye(n,t)}(t),t.relatedTarget===s.value&&(n=e.onDeactivate)&&ye(n),(null===t.relatedTarget||t.relatedTarget!==d.value&&t.relatedTarget!==h.value&&t.relatedTarget!==l.value)&&(_.value=!1),J(t,"blur"),p.value=null},handleInputFocus:function(t,n){var r;!function(t){var n=e.onInputFocus;n&&ye(n,t)}(t),P.value=!0,_.value=!0,(r=e.onActivate)&&ye(r),J(t,"focus"),0===n?p.value=d.value:1===n?p.value=h.value:2===n&&(p.value=l.value)},handleWrapperBlur:function(t){e.passivelyActivated&&(!function(t){var n=e.onWrapperBlur;n&&ye(n,t)}(t),J(t,"blur"))},handleWrapperFocus:function(t){e.passivelyActivated&&(P.value=!0,function(t){var n=e.onWrapperFocus;n&&ye(n,t)}(t),J(t,"focus"))},handleMouseEnter:function(){var t;S.value=!0,"textarea"===e.type&&(null===(t=v.value)||void 0===t||t.handleMouseEnterWrapper())},handleMouseLeave:function(){var t;S.value=!1,"textarea"===e.type&&(null===(t=v.value)||void 0===t||t.handleMouseLeaveWrapper())},handleMouseDown:function(t){var n=e.onMousedown;n&&n(t);var r=t.target.tagName;if("INPUT"!==r&&"TEXTAREA"!==r){if(e.resizable){var o=s.value;if(o){var i=o.getBoundingClientRect(),a=i.left,l=i.top,u=i.width,c=i.height;if(a+u-14<t.clientX&&t.clientX<a+u&&l+c-14<t.clientY&&t.clientY<l+c)return}}t.preventDefault(),P.value||te()}},handleChange:function(e,t){Z(e,t,"change")},handleClick:function(t){!function(t){var n=e.onClick;n&&ye(n,t)}(t)},handleClear:function(t){!function(t){var n=e.onClear;n&&ye(n,t)}(t),Q()},handlePasswordToggleClick:function(){k.value||"click"===O.value&&(j.value=!j.value)},handlePasswordToggleMousedown:function(e){if(!k.value){e.preventDefault();var t=function(e){e.preventDefault(),me("mouseup",document,t)};if(ge("mouseup",document,t),"mousedown"===O.value){j.value=!0;var n=function(){j.value=!1,me("mouseup",document,n)};ge("mouseup",document,n)}}},handleWrapperKeydown:function(t){switch(e.onKeydown&&ye(e.onKeydown,t),t.key){case"Escape":ee();break;case"Enter":!function(t){var n,r;if(e.passivelyActivated){if(_.value)return void(e.internalDeactivateOnEnter&&ee());t.preventDefault(),"textarea"===e.type?null===(n=l.value)||void 0===n||n.focus():null===(r=d.value)||void 0===r||r.focus()}}(t)}},handleWrapperKeyup:function(t){e.onKeyup&&ye(e.onKeyup,t)},handleTextAreaMirrorResize:function(){!function(){var t,n;if("textarea"===e.type){var r=e.autosize;if(r&&(L.value=null===(n=null===(t=v.value)||void 0===t?void 0:t.$el)||void 0===n?void 0:n.offsetWidth),!l.value)return;if("boolean"==typeof r)return;var o=window.getComputedStyle(l.value),i=o.paddingTop,a=o.paddingBottom,s=o.lineHeight,c=Number(i.slice(0,-2)),d=Number(a.slice(0,-2)),h=Number(s.slice(0,-2)),p=u.value;if(!p)return;if(r.minRows){var f=Math.max(r.minRows,1),g="".concat(c+d+h*f,"px");p.style.minHeight=g}if(r.maxRows){var y="".concat(c+d+h*r.maxRows,"px");p.style.maxHeight=y}}}()},getTextareaScrollContainer:function(){return l.value},mergedTheme:a,cssVars:o?void 0:Ce,themeClass:null==Pe?void 0:Pe.themeClass,onRender:null==Pe?void 0:Pe.onRender})},render:function(){var e,t,n=this,r=this.mergedClsPrefix,o=this.mergedStatus,i=this.themeClass,a=this.type,s=this.countGraphemes,l=this.onRender,u=this.$slots;return null==l||l(),P("div",{ref:"wrapperElRef",class:["".concat(r,"-input"),i,o&&"".concat(r,"-input--").concat(o,"-status"),x(x(x(x(x(x(x(x(x({},"".concat(r,"-input--rtl"),this.rtlEnabled),"".concat(r,"-input--disabled"),this.mergedDisabled),"".concat(r,"-input--textarea"),"textarea"===a),"".concat(r,"-input--resizable"),this.resizable&&!this.autosize),"".concat(r,"-input--autosize"),this.autosize),"".concat(r,"-input--round"),this.round&&!("textarea"===a)),"".concat(r,"-input--pair"),this.pair),"".concat(r,"-input--focus"),this.mergedFocus),"".concat(r,"-input--stateful"),this.stateful)],style:this.cssVars,tabindex:this.mergedDisabled||!this.passivelyActivated||this.activated?void 0:0,onFocus:this.handleWrapperFocus,onBlur:this.handleWrapperBlur,onClick:this.handleClick,onMousedown:this.handleMouseDown,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd,onKeyup:this.handleWrapperKeyup,onKeydown:this.handleWrapperKeydown},P("div",{class:"".concat(r,"-input-wrapper")},A(u.prefix,function(e){return e&&P("div",{class:"".concat(r,"-input__prefix")},e)}),"textarea"===a?P(te,{ref:"textareaScrollbarInstRef",class:"".concat(r,"-input__textarea"),container:this.getTextareaScrollContainer,triggerDisplayManually:!0,useUnifiedContainer:!0,internalHoistYRail:!0},{default:function(){var e,t,o=n.textAreaScrollContainerWidth,i={width:n.autosize&&o&&"".concat(o,"px")};return P(ne,null,P("textarea",Object.assign({},n.inputProps,{ref:"textareaElRef",class:["".concat(r,"-input__textarea-el"),null===(e=n.inputProps)||void 0===e?void 0:e.class],autofocus:n.autofocus,rows:Number(n.rows),placeholder:n.placeholder,value:n.mergedValue,disabled:n.mergedDisabled,maxlength:s?void 0:n.maxlength,minlength:s?void 0:n.minlength,readonly:n.readonly,tabindex:n.passivelyActivated&&!n.activated?-1:void 0,style:[n.textDecorationStyle[0],null===(t=n.inputProps)||void 0===t?void 0:t.style,i],onBlur:n.handleInputBlur,onFocus:function(e){n.handleInputFocus(e,2)},onInput:n.handleInput,onChange:n.handleChange,onScroll:n.handleTextAreaScroll})),n.showPlaceholder1?P("div",{class:"".concat(r,"-input__placeholder"),style:[n.placeholderStyle,i],key:"placeholder"},n.mergedPlaceholder[0]):null,n.autosize?P(re,{onResize:n.handleTextAreaMirrorResize},{default:function(){return P("div",{ref:"textareaMirrorElRef",class:"".concat(r,"-input__textarea-mirror"),key:"mirror"})}}):null)}}):P("div",{class:"".concat(r,"-input__input")},P("input",Object.assign({type:"password"===a&&this.mergedShowPasswordOn&&this.passwordVisible?"text":a},this.inputProps,{ref:"inputElRef",class:["".concat(r,"-input__input-el"),null===(e=this.inputProps)||void 0===e?void 0:e.class],style:[this.textDecorationStyle[0],null===(t=this.inputProps)||void 0===t?void 0:t.style],tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[0],disabled:this.mergedDisabled,maxlength:s?void 0:this.maxlength,minlength:s?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[0]:this.mergedValue,readonly:this.readonly,autofocus:this.autofocus,size:this.attrSize,onBlur:this.handleInputBlur,onFocus:function(e){n.handleInputFocus(e,0)},onInput:function(e){n.handleInput(e,0)},onChange:function(e){n.handleChange(e,0)}})),this.showPlaceholder1?P("div",{class:"".concat(r,"-input__placeholder")},P("span",null,this.mergedPlaceholder[0])):null,this.autosize?P("div",{class:"".concat(r,"-input__input-mirror"),key:"mirror",ref:"inputMirrorElRef"}," "):null),!this.pair&&A(u.suffix,function(e){return e||n.clearable||n.showCount||n.mergedShowPasswordOn||void 0!==n.loading?P("div",{class:"".concat(r,"-input__suffix")},[A(u["clear-icon-placeholder"],function(e){return(n.clearable||e)&&P(Wt,{clsPrefix:r,show:n.showClearButton,onClear:n.handleClear},{placeholder:function(){return e},icon:function(){var e,t;return null===(t=(e=n.$slots)["clear-icon"])||void 0===t?void 0:t.call(e)}})}),n.internalLoadingBeforeSuffix?null:e,void 0!==n.loading?P(Nt,{clsPrefix:r,loading:n.loading,showArrow:!1,showClear:!1,style:n.cssVars}):null,n.internalLoadingBeforeSuffix?e:null,n.showCount&&"textarea"!==n.type?P(Sn,null,{default:function(e){var t,r=n.renderCount;return r?r(e):null===(t=u.count)||void 0===t?void 0:t.call(u,e)}}):null,n.mergedShowPasswordOn&&"password"===n.type?P("div",{class:"".concat(r,"-input__eye"),onMousedown:n.handlePasswordToggleMousedown,onClick:n.handlePasswordToggleClick},n.passwordVisible?E(u["password-visible-icon"],function(){return[P(O,{clsPrefix:r},{default:function(){return P(pn,null)}})]}):E(u["password-invisible-icon"],function(){return[P(O,{clsPrefix:r},{default:function(){return P(fn,null)}})]})):null]):null})),this.pair?P("span",{class:"".concat(r,"-input__separator")},E(u.separator,function(){return[n.separator]})):null,this.pair?P("div",{class:"".concat(r,"-input-wrapper")},P("div",{class:"".concat(r,"-input__input")},P("input",{ref:"inputEl2Ref",type:this.type,class:"".concat(r,"-input__input-el"),tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[1],disabled:this.mergedDisabled,maxlength:s?void 0:this.maxlength,minlength:s?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[1]:void 0,readonly:this.readonly,style:this.textDecorationStyle[1],onBlur:this.handleInputBlur,onFocus:function(e){n.handleInputFocus(e,1)},onInput:function(e){n.handleInput(e,1)},onChange:function(e){n.handleChange(e,1)}}),this.showPlaceholder2?P("div",{class:"".concat(r,"-input__placeholder")},P("span",null,this.mergedPlaceholder[1])):null),A(u.suffix,function(e){return(n.clearable||e)&&P("div",{class:"".concat(r,"-input__suffix")},[n.clearable&&P(Wt,{clsPrefix:r,show:n.showClearButton,onClear:n.handleClear},{icon:function(){var e;return null===(e=u["clear-icon"])||void 0===e?void 0:e.call(u)},placeholder:function(){var e;return null===(e=u["clear-icon-placeholder"])||void 0===e?void 0:e.call(u)}}),e])})):null,this.mergedBordered?P("div",{class:"".concat(r,"-input__border")}):null,this.mergedBordered?P("div",{class:"".concat(r,"-input__state-border")}):null,this.showCount&&"textarea"===a?P(Sn,null,{default:function(e){var t,r=n.renderCount;return r?r(e):null===(t=u.count)||void 0===t?void 0:t.call(u,e)}}):null)}}),In=Z("n-checkbox-group"),Dn=B([M("checkbox","\n font-size: var(--n-font-size);\n outline: none;\n cursor: pointer;\n display: inline-flex;\n flex-wrap: nowrap;\n align-items: flex-start;\n word-break: break-word;\n line-height: var(--n-size);\n --n-merged-color-table: var(--n-color-table);\n ",[I("show-label","line-height: var(--n-label-line-height);"),B("&:hover",[M("checkbox-box",[_("border","border: var(--n-border-checked);")])]),B("&:focus:not(:active)",[M("checkbox-box",[_("border","\n border: var(--n-border-focus);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),I("inside-table",[M("checkbox-box","\n background-color: var(--n-merged-color-table);\n ")]),I("checked",[M("checkbox-box","\n background-color: var(--n-color-checked);\n ",[M("checkbox-icon",[B(".check-icon","\n opacity: 1;\n transform: scale(1);\n ")])])]),I("indeterminate",[M("checkbox-box",[M("checkbox-icon",[B(".check-icon","\n opacity: 0;\n transform: scale(.5);\n "),B(".line-icon","\n opacity: 1;\n transform: scale(1);\n ")])])]),I("checked, indeterminate",[B("&:focus:not(:active)",[M("checkbox-box",[_("border","\n border: var(--n-border-checked);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),M("checkbox-box","\n background-color: var(--n-color-checked);\n border-left: 0;\n border-top: 0;\n ",[_("border",{border:"var(--n-border-checked)"})])]),I("disabled",{cursor:"not-allowed"},[I("checked",[M("checkbox-box","\n background-color: var(--n-color-disabled-checked);\n ",[_("border",{border:"var(--n-border-disabled-checked)"}),M("checkbox-icon",[B(".check-icon, .line-icon",{fill:"var(--n-check-mark-color-disabled-checked)"})])])]),M("checkbox-box","\n background-color: var(--n-color-disabled);\n ",[_("border","\n border: var(--n-border-disabled);\n "),M("checkbox-icon",[B(".check-icon, .line-icon","\n fill: var(--n-check-mark-color-disabled);\n ")])]),_("label","\n color: var(--n-text-color-disabled);\n ")]),M("checkbox-box-wrapper","\n position: relative;\n width: var(--n-size);\n flex-shrink: 0;\n flex-grow: 0;\n user-select: none;\n -webkit-user-select: none;\n "),M("checkbox-box","\n position: absolute;\n left: 0;\n top: 50%;\n transform: translateY(-50%);\n height: var(--n-size);\n width: var(--n-size);\n display: inline-block;\n box-sizing: border-box;\n border-radius: var(--n-border-radius);\n background-color: var(--n-color);\n transition: background-color 0.3s var(--n-bezier);\n ",[_("border","\n transition:\n border-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n border-radius: inherit;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border: var(--n-border);\n "),M("checkbox-icon","\n display: flex;\n align-items: center;\n justify-content: center;\n position: absolute;\n left: 1px;\n right: 1px;\n top: 1px;\n bottom: 1px;\n ",[B(".check-icon, .line-icon","\n width: 100%;\n fill: var(--n-check-mark-color);\n opacity: 0;\n transform: scale(0.5);\n transform-origin: center;\n transition:\n fill 0.3s var(--n-bezier),\n transform 0.3s var(--n-bezier),\n opacity 0.3s var(--n-bezier),\n border-color 0.3s var(--n-bezier);\n "),we({left:"1px",top:"1px"})])]),_("label","\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n user-select: none;\n -webkit-user-select: none;\n padding: var(--n-label-padding);\n font-weight: var(--n-label-font-weight);\n ",[B("&:empty",{display:"none"})])]),be(M("checkbox","\n --n-merged-color-table: var(--n-color-table-modal);\n ")),xe(M("checkbox","\n --n-merged-color-table: var(--n-color-table-popover);\n "))]),Bn=Object.assign(Object.assign({},U.props),{size:String,checked:{type:[Boolean,String,Number],default:void 0},defaultChecked:{type:[Boolean,String,Number],default:!1},value:[String,Number],disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:String,focusable:{type:Boolean,default:!0},checkedValue:{type:[Boolean,String,Number],default:!0},uncheckedValue:{type:[Boolean,String,Number],default:!1},"onUpdate:checked":[Function,Array],onUpdateChecked:[Function,Array],privateInsideTable:Boolean,onChange:[Function,Array]}),Rn=i({name:"Checkbox",props:Bn,setup:function(e){var t=Q(In,null),n=q(null),r=N(e),o=r.mergedClsPrefixRef,i=r.inlineThemeDisabled,a=r.mergedRtlRef,s=q(e.defaultChecked),l=se(e,"checked"),u=le(l,s),c=ce(function(){if(t){var n=t.valueSetRef.value;return!(!n||void 0===e.value)&&n.has(e.value)}return u.value===e.checkedValue}),d=ue(e,{mergedSize:function(n){var r=e.size;if(void 0!==r)return r;if(t){var o=t.mergedSizeRef.value;if(void 0!==o)return o}if(n){var i=n.mergedSize;if(void 0!==i)return i.value}return"medium"},mergedDisabled:function(n){var r=e.disabled;if(void 0!==r)return r;if(t){if(t.disabledRef.value)return!0;var o=t.maxRef.value,i=t.checkedCountRef;if(void 0!==o&&i.value>=o&&!c.value)return!0;var a=t.minRef.value;if(void 0!==a&&i.value<=a&&c.value)return!0}return!!n&&n.disabled.value}}),h=d.mergedDisabledRef,p=d.mergedSizeRef,f=U("Checkbox","-checkbox",Dn,Ce,e,o);function v(n){if(t&&void 0!==e.value)t.toggleCheckbox(!c.value,e.value);else{var r=e.onChange,o=e["onUpdate:checked"],i=e.onUpdateChecked,a=d.nTriggerFormInput,l=d.nTriggerFormChange,u=c.value?e.uncheckedValue:e.checkedValue;o&&ye(o,u,n),i&&ye(i,u,n),r&&ye(r,u,n),a(),l(),s.value=u}}var g={focus:function(){var e;null===(e=n.value)||void 0===e||e.focus()},blur:function(){var e;null===(e=n.value)||void 0===e||e.blur()}},y=G("Checkbox",a,o),m=X(function(){var e=p.value,t=f.value,n=t.common.cubicBezierEaseInOut,r=t.self,o=r.borderRadius,i=r.color,a=r.colorChecked,s=r.colorDisabled,l=r.colorTableHeader,u=r.colorTableHeaderModal,c=r.colorTableHeaderPopover,d=r.checkMarkColor,h=r.checkMarkColorDisabled,v=r.border,g=r.borderFocus,y=r.borderDisabled,m=r.borderChecked,b=r.boxShadowFocus,x=r.textColor,w=r.textColorDisabled,k=r.checkMarkColorDisabledChecked,C=r.colorDisabledChecked,P=r.borderDisabledChecked,S=r.labelPadding,M=r.labelLineHeight,_=r.labelFontWeight,I=r[Y("fontSize",e)];return{"--n-label-line-height":M,"--n-label-font-weight":_,"--n-size":r[Y("size",e)],"--n-bezier":n,"--n-border-radius":o,"--n-border":v,"--n-border-checked":m,"--n-border-focus":g,"--n-border-disabled":y,"--n-border-disabled-checked":P,"--n-box-shadow-focus":b,"--n-color":i,"--n-color-checked":a,"--n-color-table":l,"--n-color-table-modal":u,"--n-color-table-popover":c,"--n-color-disabled":s,"--n-color-disabled-checked":C,"--n-text-color":x,"--n-text-color-disabled":w,"--n-check-mark-color":d,"--n-check-mark-color-disabled":h,"--n-check-mark-color-disabled-checked":k,"--n-font-size":I,"--n-label-padding":S}}),b=i?K("checkbox",X(function(){return p.value[0]}),m,e):void 0;return Object.assign(d,g,{rtlEnabled:y,selfRef:n,mergedClsPrefix:o,mergedDisabled:h,renderedChecked:c,mergedTheme:f,labelId:Pe(),handleClick:function(e){h.value||v(e)},handleKeyUp:function(e){if(!h.value)switch(e.key){case" ":case"Enter":v(e)}},handleKeyDown:function(e){if(" "===e.key)e.preventDefault()},cssVars:i?void 0:m,themeClass:null==b?void 0:b.themeClass,onRender:null==b?void 0:b.onRender})},render:function(){var e,t=this,n=this.$slots,r=this.renderedChecked,o=this.mergedDisabled,i=this.indeterminate,a=this.privateInsideTable,s=this.cssVars,l=this.labelId,u=this.label,c=this.mergedClsPrefix,d=this.focusable,h=this.handleKeyUp,p=this.handleKeyDown,f=this.handleClick;null===(e=this.onRender)||void 0===e||e.call(this);var v=A(n.default,function(e){return u||e?P("span",{class:"".concat(c,"-checkbox__label"),id:l},u||e):null});return P("div",{ref:"selfRef",class:["".concat(c,"-checkbox"),this.themeClass,this.rtlEnabled&&"".concat(c,"-checkbox--rtl"),r&&"".concat(c,"-checkbox--checked"),o&&"".concat(c,"-checkbox--disabled"),i&&"".concat(c,"-checkbox--indeterminate"),a&&"".concat(c,"-checkbox--inside-table"),v&&"".concat(c,"-checkbox--show-label")],tabindex:o||!d?void 0:0,role:"checkbox","aria-checked":i?"mixed":r,"aria-labelledby":l,style:s,onKeyup:h,onKeydown:p,onClick:f,onMousedown:function(){ge("selectstart",window,function(e){e.preventDefault()},{once:!0})}},P("div",{class:"".concat(c,"-checkbox-box-wrapper")}," ",P("div",{class:"".concat(c,"-checkbox-box")},P(ke,null,{default:function(){return t.indeterminate?P("div",{key:"indeterminate",class:"".concat(c,"-checkbox-icon")},P("svg",{viewBox:"0 0 100 100",class:"line-icon"},P("path",{d:"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z"}))):P("div",{key:"check",class:"".concat(c,"-checkbox-icon")},P("svg",{viewBox:"0 0 64 64",class:"check-icon"},P("path",{d:"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z"})))}}),P("div",{class:"".concat(c,"-checkbox-box__border")}))),v)}});function Fn(){var e=Q(_e,null);return null===e&&Se("use-message","No outer <n-message-provider /> founded. See prerequisite in https://www.naiveui.com/en-US/os-theme/components/message for more details. If you want to use `useMessage` outside setup, please check https://www.naiveui.com/zh-CN/os-theme/components/message#Q-&-A."),e}var En={success:P(T,null),error:P(j,null),warning:P(z,null),info:P(L,null)},On=i({name:"ProgressCircle",props:{clsPrefix:{type:String,required:!0},status:{type:String,required:!0},strokeWidth:{type:Number,required:!0},fillColor:[String,Object],railColor:String,railStyle:[String,Object],percentage:{type:Number,default:0},offsetDegree:{type:Number,default:0},showIndicator:{type:Boolean,required:!0},indicatorTextColor:String,unit:String,viewBoxWidth:{type:Number,required:!0},gapDegree:{type:Number,required:!0},gapOffsetDegree:{type:Number,default:0}},setup:function(e,t){var n=t.slots;function r(t,n,r,o){var i=e.gapDegree,a=e.viewBoxWidth,s=50,l=50+e.strokeWidth/2,u="M ".concat(l,",").concat(l," m ").concat(0,",").concat(50,"\n      a ").concat(s,",").concat(s," 0 1 1 ").concat(0,",").concat(-100,"\n      a ").concat(s,",").concat(s," 0 1 1 ").concat(-0,",").concat(100),c=2*Math.PI*s;return{pathString:u,pathStyle:{stroke:"rail"===o?r:"object"===b(e.fillColor)?"url(#gradient)":r,strokeDasharray:"".concat(t/100*(c-i),"px ").concat(8*a,"px"),strokeDashoffset:"-".concat(i/2,"px"),transformOrigin:n?"center":void 0,transform:n?"rotate(".concat(n,"deg)"):void 0}}}return function(){var t,o,i,a=e.fillColor,s=e.railColor,l=e.strokeWidth,u=e.offsetDegree,c=e.status,d=e.percentage,h=e.showIndicator,p=e.indicatorTextColor,f=e.unit,v=e.gapOffsetDegree,g=e.clsPrefix,y=r(100,0,s,"rail"),m=y.pathString,x=y.pathStyle,w=r(d,u,a,"fill"),k=w.pathString,C=w.pathStyle,S=100+l;return P("div",{class:"".concat(g,"-progress-content"),role:"none"},P("div",{class:"".concat(g,"-progress-graph"),"aria-hidden":!0},P("div",{class:"".concat(g,"-progress-graph-circle"),style:{transform:v?"rotate(".concat(v,"deg)"):void 0}},P("svg",{viewBox:"0 0 ".concat(S," ").concat(S)},(t="object"===b(e.fillColor),o=t?e.fillColor.stops[0]:"",i=t?e.fillColor.stops[1]:"",t&&P("defs",null,P("linearGradient",{id:"gradient",x1:"0%",y1:"100%",x2:"100%",y2:"0%"},P("stop",{offset:"0%","stop-color":o}),P("stop",{offset:"100%","stop-color":i})))),P("g",null,P("path",{class:"".concat(g,"-progress-graph-circle-rail"),d:m,"stroke-width":l,"stroke-linecap":"round",fill:"none",style:x})),P("g",null,P("path",{class:["".concat(g,"-progress-graph-circle-fill"),0===d&&"".concat(g,"-progress-graph-circle-fill--empty")],d:k,"stroke-width":l,"stroke-linecap":"round",fill:"none",style:C}))))),h?P("div",null,n.default?P("div",{class:"".concat(g,"-progress-custom-content"),role:"none"},n.default()):"default"!==c?P("div",{class:"".concat(g,"-progress-icon"),"aria-hidden":!0},P(O,{clsPrefix:g},{default:function(){return En[c]}})):P("div",{class:"".concat(g,"-progress-text"),style:{color:p},role:"none"},P("span",{class:"".concat(g,"-progress-text__percentage")},d),P("span",{class:"".concat(g,"-progress-text__unit")},f))):null)}}}),jn={success:P(T,null),error:P(j,null),warning:P(z,null),info:P(L,null)},zn=i({name:"ProgressLine",props:{clsPrefix:{type:String,required:!0},percentage:{type:Number,default:0},railColor:String,railStyle:[String,Object],fillColor:[String,Object],status:{type:String,required:!0},indicatorPlacement:{type:String,required:!0},indicatorTextColor:String,unit:{type:String,default:"%"},processing:{type:Boolean,required:!0},showIndicator:{type:Boolean,required:!0},height:[String,Number],railBorderRadius:[String,Number],fillBorderRadius:[String,Number]},setup:function(e,t){var n=t.slots,r=X(function(){return Ie(e.height)}),o=X(function(){var t,n;return"object"===b(e.fillColor)?"linear-gradient(to right, ".concat(null===(t=e.fillColor)||void 0===t?void 0:t.stops[0]," , ").concat(null===(n=e.fillColor)||void 0===n?void 0:n.stops[1],")"):e.fillColor}),i=X(function(){return void 0!==e.railBorderRadius?Ie(e.railBorderRadius):void 0!==e.height?Ie(e.height,{c:.5}):""}),a=X(function(){return void 0!==e.fillBorderRadius?Ie(e.fillBorderRadius):void 0!==e.railBorderRadius?Ie(e.railBorderRadius):void 0!==e.height?Ie(e.height,{c:.5}):""});return function(){var t=e.indicatorPlacement,s=e.railColor,l=e.railStyle,u=e.percentage,c=e.unit,d=e.indicatorTextColor,h=e.status,p=e.showIndicator,f=e.processing,v=e.clsPrefix;return P("div",{class:"".concat(v,"-progress-content"),role:"none"},P("div",{class:"".concat(v,"-progress-graph"),"aria-hidden":!0},P("div",{class:["".concat(v,"-progress-graph-line"),x({},"".concat(v,"-progress-graph-line--indicator-").concat(t),!0)]},P("div",{class:"".concat(v,"-progress-graph-line-rail"),style:[{backgroundColor:s,height:r.value,borderRadius:i.value},l]},P("div",{class:["".concat(v,"-progress-graph-line-fill"),f&&"".concat(v,"-progress-graph-line-fill--processing")],style:{maxWidth:"".concat(e.percentage,"%"),background:o.value,height:r.value,lineHeight:r.value,borderRadius:a.value}},"inside"===t?P("div",{class:"".concat(v,"-progress-graph-line-indicator"),style:{color:d}},n.default?n.default():"".concat(u).concat(c)):null)))),p&&"outside"===t?P("div",null,n.default?P("div",{class:"".concat(v,"-progress-custom-content"),style:{color:d},role:"none"},n.default()):"default"===h?P("div",{role:"none",class:"".concat(v,"-progress-icon ").concat(v,"-progress-icon--as-text"),style:{color:d}},u,c):P("div",{class:"".concat(v,"-progress-icon"),"aria-hidden":!0},P(O,{clsPrefix:v},{default:function(){return jn[h]}}))):null)}}});function Ln(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return"m ".concat(n/2," ").concat(n/2-e," a ").concat(e," ").concat(e," 0 1 1 0 ").concat(2*e," a ").concat(e," ").concat(e," 0 1 1 0 -").concat(2*e)}var Tn=i({name:"ProgressMultipleCircle",props:{clsPrefix:{type:String,required:!0},viewBoxWidth:{type:Number,required:!0},percentage:{type:Array,default:[0]},strokeWidth:{type:Number,required:!0},circleGap:{type:Number,required:!0},showIndicator:{type:Boolean,required:!0},fillColor:{type:Array,default:function(){return[]}},railColor:{type:Array,default:function(){return[]}},railStyle:{type:Array,default:function(){return[]}}},setup:function(e,t){var n=t.slots,r=X(function(){var t=e.percentage.map(function(t,n){return"".concat(Math.PI*t/100*(e.viewBoxWidth/2-e.strokeWidth/2*(1+2*n)-e.circleGap*n)*2,", ").concat(8*e.viewBoxWidth)});return t});return function(){var t=e.viewBoxWidth,o=e.strokeWidth,i=e.circleGap,a=e.showIndicator,s=e.fillColor,l=e.railColor,u=e.railStyle,c=e.percentage,d=e.clsPrefix;return P("div",{class:"".concat(d,"-progress-content"),role:"none"},P("div",{class:"".concat(d,"-progress-graph"),"aria-hidden":!0},P("div",{class:"".concat(d,"-progress-graph-circle")},P("svg",{viewBox:"0 0 ".concat(t," ").concat(t)},P("defs",null,c.map(function(t,n){return function(t,n){var r=e.fillColor[n],o="object"===b(r)?r.stops[0]:"",i="object"===b(r)?r.stops[1]:"";return"object"===b(e.fillColor[n])&&P("linearGradient",{id:"gradient-".concat(n),x1:"100%",y1:"0%",x2:"0%",y2:"100%"},P("stop",{offset:"0%","stop-color":o}),P("stop",{offset:"100%","stop-color":i}))}(0,n)})),c.map(function(e,n){return P("g",{key:n},P("path",{class:"".concat(d,"-progress-graph-circle-rail"),d:Ln(t/2-o/2*(1+2*n)-i*n,o,t),"stroke-width":o,"stroke-linecap":"round",fill:"none",style:[{strokeDashoffset:0,stroke:l[n]},u[n]]}),P("path",{class:["".concat(d,"-progress-graph-circle-fill"),0===e&&"".concat(d,"-progress-graph-circle-fill--empty")],d:Ln(t/2-o/2*(1+2*n)-i*n,o,t),"stroke-width":o,"stroke-linecap":"round",fill:"none",style:{strokeDasharray:r.value[n],strokeDashoffset:0,stroke:"object"===b(s[n])?"url(#gradient-".concat(n,")"):s[n]}}))})))),a&&n.default?P("div",null,P("div",{class:"".concat(d,"-progress-text")},n.default())):null)}}}),An=B([M("progress",{display:"inline-block"},[M("progress-icon","\n color: var(--n-icon-color);\n transition: color .3s var(--n-bezier);\n "),I("line","\n width: 100%;\n display: block;\n ",[M("progress-content","\n display: flex;\n align-items: center;\n ",[M("progress-graph",{flex:1})]),M("progress-custom-content",{marginLeft:"14px"}),M("progress-icon","\n width: 30px;\n padding-left: 14px;\n height: var(--n-icon-size-line);\n line-height: var(--n-icon-size-line);\n font-size: var(--n-icon-size-line);\n ",[I("as-text","\n color: var(--n-text-color-line-outer);\n text-align: center;\n width: 40px;\n font-size: var(--n-font-size);\n padding-left: 4px;\n transition: color .3s var(--n-bezier);\n ")])]),I("circle, dashboard",{width:"120px"},[M("progress-custom-content","\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n display: flex;\n align-items: center;\n justify-content: center;\n "),M("progress-text","\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n display: flex;\n align-items: center;\n color: inherit;\n font-size: var(--n-font-size-circle);\n color: var(--n-text-color-circle);\n font-weight: var(--n-font-weight-circle);\n transition: color .3s var(--n-bezier);\n white-space: nowrap;\n "),M("progress-icon","\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n display: flex;\n align-items: center;\n color: var(--n-icon-color);\n font-size: var(--n-icon-size-circle);\n ")]),I("multiple-circle","\n width: 200px;\n color: inherit;\n ",[M("progress-text","\n font-weight: var(--n-font-weight-circle);\n color: var(--n-text-color-circle);\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n display: flex;\n align-items: center;\n justify-content: center;\n transition: color .3s var(--n-bezier);\n ")]),M("progress-content",{position:"relative"}),M("progress-graph",{position:"relative"},[M("progress-graph-circle",[B("svg",{verticalAlign:"bottom"}),M("progress-graph-circle-fill","\n stroke: var(--n-fill-color);\n transition:\n opacity .3s var(--n-bezier),\n stroke .3s var(--n-bezier),\n stroke-dasharray .3s var(--n-bezier);\n ",[I("empty",{opacity:0})]),M("progress-graph-circle-rail","\n transition: stroke .3s var(--n-bezier);\n overflow: hidden;\n stroke: var(--n-rail-color);\n ")]),M("progress-graph-line",[I("indicator-inside",[M("progress-graph-line-rail","\n height: 16px;\n line-height: 16px;\n border-radius: 10px;\n ",[M("progress-graph-line-fill","\n height: inherit;\n border-radius: 10px;\n "),M("progress-graph-line-indicator","\n background: #0000;\n white-space: nowrap;\n text-align: right;\n margin-left: 14px;\n margin-right: 14px;\n height: inherit;\n font-size: 12px;\n color: var(--n-text-color-line-inner);\n transition: color .3s var(--n-bezier);\n ")])]),I("indicator-inside-label","\n height: 16px;\n display: flex;\n align-items: center;\n ",[M("progress-graph-line-rail","\n flex: 1;\n transition: background-color .3s var(--n-bezier);\n "),M("progress-graph-line-indicator","\n background: var(--n-fill-color);\n font-size: 12px;\n transform: translateZ(0);\n display: flex;\n vertical-align: middle;\n height: 16px;\n line-height: 16px;\n padding: 0 10px;\n border-radius: 10px;\n position: absolute;\n white-space: nowrap;\n color: var(--n-text-color-line-inner);\n transition:\n right .2s var(--n-bezier),\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n ")]),M("progress-graph-line-rail","\n position: relative;\n overflow: hidden;\n height: var(--n-rail-height);\n border-radius: 5px;\n background-color: var(--n-rail-color);\n transition: background-color .3s var(--n-bezier);\n ",[M("progress-graph-line-fill","\n background: var(--n-fill-color);\n position: relative;\n border-radius: 5px;\n height: inherit;\n width: 100%;\n max-width: 0%;\n transition:\n background-color .3s var(--n-bezier),\n max-width .2s var(--n-bezier);\n ",[I("processing",[B("&::after",'\n content: "";\n background-image: var(--n-line-bg-processing);\n animation: progress-processing-animation 2s var(--n-bezier) infinite;\n ')])])])])])]),B("@keyframes progress-processing-animation","\n 0% {\n position: absolute;\n left: 0;\n top: 0;\n bottom: 0;\n right: 100%;\n opacity: 1;\n }\n 66% {\n position: absolute;\n left: 0;\n top: 0;\n bottom: 0;\n right: 0;\n opacity: 0;\n }\n 100% {\n position: absolute;\n left: 0;\n top: 0;\n bottom: 0;\n right: 0;\n opacity: 0;\n }\n ")]),Wn=Object.assign(Object.assign({},U.props),{processing:Boolean,type:{type:String,default:"line"},gapDegree:Number,gapOffsetDegree:Number,status:{type:String,default:"default"},railColor:[String,Array],railStyle:[String,Array],color:[String,Array,Object],viewBoxWidth:{type:Number,default:100},strokeWidth:{type:Number,default:7},percentage:[Number,Array],unit:{type:String,default:"%"},showIndicator:{type:Boolean,default:!0},indicatorPosition:{type:String,default:"outside"},indicatorPlacement:{type:String,default:"outside"},indicatorTextColor:String,circleGap:{type:Number,default:1},height:Number,borderRadius:[String,Number],fillBorderRadius:[String,Number],offsetDegree:Number}),Nn=i({name:"Progress",props:Wn,setup:function(e){var t=X(function(){return e.indicatorPlacement||e.indicatorPosition}),n=X(function(){return e.gapDegree||0===e.gapDegree?e.gapDegree:"dashboard"===e.type?75:void 0}),r=N(e),o=r.mergedClsPrefixRef,i=r.inlineThemeDisabled,a=U("Progress","-progress",An,De,e,o),s=X(function(){var t=e.status,n=a.value,r=n.common.cubicBezierEaseInOut,o=n.self,i=o.fontSize,s=o.fontSizeCircle,l=o.railColor,u=o.railHeight,c=o.iconSizeCircle,d=o.iconSizeLine,h=o.textColorCircle,p=o.textColorLineInner,f=o.textColorLineOuter,v=o.lineBgProcessing,g=o.fontWeightCircle,y=o[Y("iconColor",t)];return{"--n-bezier":r,"--n-fill-color":o[Y("fillColor",t)],"--n-font-size":i,"--n-font-size-circle":s,"--n-font-weight-circle":g,"--n-icon-color":y,"--n-icon-size-circle":c,"--n-icon-size-line":d,"--n-line-bg-processing":v,"--n-rail-color":l,"--n-rail-height":u,"--n-text-color-circle":h,"--n-text-color-line-inner":p,"--n-text-color-line-outer":f}}),l=i?K("progress",X(function(){return e.status[0]}),s,e):void 0;return{mergedClsPrefix:o,mergedIndicatorPlacement:t,gapDeg:n,cssVars:i?void 0:s,themeClass:null==l?void 0:l.themeClass,onRender:null==l?void 0:l.onRender}},render:function(){var e=this.type,t=this.cssVars,n=this.indicatorTextColor,r=this.showIndicator,o=this.status,i=this.railColor,a=this.railStyle,s=this.color,l=this.percentage,u=this.viewBoxWidth,c=this.strokeWidth,d=this.mergedIndicatorPlacement,h=this.unit,p=this.borderRadius,f=this.fillBorderRadius,v=this.height,g=this.processing,y=this.circleGap,m=this.mergedClsPrefix,b=this.gapDeg,x=this.gapOffsetDegree,w=this.themeClass,k=this.$slots,C=this.onRender;return null==C||C(),P("div",{class:[w,"".concat(m,"-progress"),"".concat(m,"-progress--").concat(e),"".concat(m,"-progress--").concat(o)],style:t,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":l,role:"circle"===e||"line"===e||"dashboard"===e?"progressbar":"none"},"circle"===e||"dashboard"===e?P(On,{clsPrefix:m,status:o,showIndicator:r,indicatorTextColor:n,railColor:i,fillColor:s,railStyle:a,offsetDegree:this.offsetDegree,percentage:l,viewBoxWidth:u,strokeWidth:c,gapDegree:void 0===b?"dashboard"===e?75:0:b,gapOffsetDegree:x,unit:h},k):"line"===e?P(zn,{clsPrefix:m,status:o,showIndicator:r,indicatorTextColor:n,railColor:i,fillColor:s,railStyle:a,percentage:l,processing:g,indicatorPlacement:d,unit:h,fillBorderRadius:f,railBorderRadius:p,height:v},k):"multiple-circle"===e?P(Tn,{clsPrefix:m,strokeWidth:c,railColor:i,fillColor:s,railStyle:a,viewBoxWidth:u,percentage:l,showIndicator:r,circleGap:y},k):null)}}),Un=B([B("@keyframes spin-rotate","\n from {\n transform: rotate(0);\n }\n to {\n transform: rotate(360deg);\n }\n "),M("spin-container","\n position: relative;\n ",[M("spin-body","\n position: absolute;\n top: 50%;\n left: 50%;\n transform: translateX(-50%) translateY(-50%);\n ",[Be()])]),M("spin-body","\n display: inline-flex;\n align-items: center;\n justify-content: center;\n flex-direction: column;\n "),M("spin","\n display: inline-flex;\n height: var(--n-size);\n width: var(--n-size);\n font-size: var(--n-size);\n color: var(--n-color);\n ",[I("rotate","\n animation: spin-rotate 2s linear infinite;\n ")]),M("spin-description","\n display: inline-block;\n font-size: var(--n-font-size);\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n margin-top: 8px;\n "),M("spin-content","\n opacity: 1;\n transition: opacity .3s var(--n-bezier);\n pointer-events: all;\n ",[I("spinning","\n user-select: none;\n -webkit-user-select: none;\n pointer-events: none;\n opacity: var(--n-opacity-spinning);\n ")])]),Vn={small:20,medium:18,large:16},Gn=Object.assign(Object.assign({},U.props),{contentClass:String,contentStyle:[Object,String],description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:function(){return!0},default:void 0},delay:Number}),Xn=i({name:"Spin",props:Gn,slots:Object,setup:function(e){var t=N(e),n=t.mergedClsPrefixRef,r=t.inlineThemeDisabled,o=U("Spin","-spin",Un,Ee,e,n),i=X(function(){var t=e.size,n=o.value,r=n.common.cubicBezierEaseInOut,i=n.self,a=i.opacitySpinning,s=i.color,l=i.textColor;return{"--n-bezier":r,"--n-opacity-spinning":a,"--n-size":"number"==typeof t?Oe(t):i[Y("size",t)],"--n-color":s,"--n-text-color":l}}),a=r?K("spin",X(function(){var t=e.size;return"number"==typeof t?String(t):t[0]}),i,e):void 0,s=je(e,["spinning","show"]),l=q(!1);return pe(function(t){var n;if(s.value){var r=e.delay;if(r)return n=window.setTimeout(function(){l.value=!0},r),void t(function(){clearTimeout(n)})}l.value=s.value}),{mergedClsPrefix:n,active:l,mergedStrokeWidth:X(function(){var t=e.strokeWidth;if(void 0!==t)return t;var n=e.size;return Vn["number"==typeof n?"medium":n]}),cssVars:r?void 0:i,themeClass:null==a?void 0:a.themeClass,onRender:null==a?void 0:a.onRender}},render:function(){var e,t,n=this,r=this.$slots,o=this.mergedClsPrefix,i=this.description,a=r.icon&&this.rotate,s=(i||r.description)&&P("div",{class:"".concat(o,"-spin-description")},i||(null===(e=r.description)||void 0===e?void 0:e.call(r))),l=r.icon?P("div",{class:["".concat(o,"-spin-body"),this.themeClass]},P("div",{class:["".concat(o,"-spin"),a&&"".concat(o,"-spin--rotate")],style:r.default?"":this.cssVars},r.icon()),s):P("div",{class:["".concat(o,"-spin-body"),this.themeClass]},P(Re,{clsPrefix:o,style:r.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:"".concat(o,"-spin")}),s);return null===(t=this.onRender)||void 0===t||t.call(this),r.default?P("div",{class:["".concat(o,"-spin-container"),this.themeClass],style:this.cssVars},P("div",{class:["".concat(o,"-spin-content"),this.active&&"".concat(o,"-spin-content--spinning"),this.contentClass],style:this.contentStyle},r),P(Fe,{name:"fade-in-transition"},{default:function(){return n.active?l:null}})):l}}),Hn=Z("n-upload"),Yn=B([M("upload","width: 100%;",[I("dragger-inside",[M("upload-trigger","\n display: block;\n ")]),I("drag-over",[M("upload-dragger","\n border: var(--n-dragger-border-hover);\n ")])]),M("upload-dragger","\n cursor: pointer;\n box-sizing: border-box;\n width: 100%;\n text-align: center;\n border-radius: var(--n-border-radius);\n padding: 24px;\n opacity: 1;\n transition:\n opacity .3s var(--n-bezier),\n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n background-color: var(--n-dragger-color);\n border: var(--n-dragger-border);\n ",[B("&:hover","\n border: var(--n-dragger-border-hover);\n "),I("disabled","\n cursor: not-allowed;\n ")]),M("upload-trigger","\n display: inline-block;\n box-sizing: border-box;\n opacity: 1;\n transition: opacity .3s var(--n-bezier);\n ",[B("+",[M("upload-file-list","margin-top: 8px;")]),I("disabled","\n opacity: var(--n-item-disabled-opacity);\n cursor: not-allowed;\n "),I("image-card","\n width: 96px;\n height: 96px;\n ",[M("base-icon","\n font-size: 24px;\n "),M("upload-dragger","\n padding: 0;\n height: 100%;\n width: 100%;\n display: flex;\n align-items: center;\n justify-content: center;\n ")])]),M("upload-file-list","\n line-height: var(--n-line-height);\n opacity: 1;\n transition: opacity .3s var(--n-bezier);\n ",[B("a, img","outline: none;"),I("disabled","\n opacity: var(--n-item-disabled-opacity);\n cursor: not-allowed;\n ",[M("upload-file","cursor: not-allowed;")]),I("grid","\n display: grid;\n grid-template-columns: repeat(auto-fill, 96px);\n grid-gap: 8px;\n margin-top: 0;\n "),M("upload-file","\n display: block;\n box-sizing: border-box;\n cursor: default;\n padding: 0px 12px 0 6px;\n transition: background-color .3s var(--n-bezier);\n border-radius: var(--n-border-radius);\n ",[D(),M("progress",[D({foldPadding:!0})]),B("&:hover","\n background-color: var(--n-item-color-hover);\n ",[M("upload-file-info",[_("action","\n opacity: 1;\n ")])]),I("image-type","\n border-radius: var(--n-border-radius);\n text-decoration: underline;\n text-decoration-color: #0000;\n ",[M("upload-file-info","\n padding-top: 0px;\n padding-bottom: 0px;\n width: 100%;\n height: 100%;\n display: flex;\n justify-content: space-between;\n align-items: center;\n padding: 6px 0;\n ",[M("progress","\n padding: 2px 0;\n margin-bottom: 0;\n "),_("name","\n padding: 0 8px;\n "),_("thumbnail","\n width: 32px;\n height: 32px;\n font-size: 28px;\n display: flex;\n justify-content: center;\n align-items: center;\n ",[B("img","\n width: 100%;\n ")])])]),I("text-type",[M("progress","\n box-sizing: border-box;\n padding-bottom: 6px;\n margin-bottom: 6px;\n ")]),I("image-card-type","\n position: relative;\n width: 96px;\n height: 96px;\n border: var(--n-item-border-image-card);\n border-radius: var(--n-border-radius);\n padding: 0;\n display: flex;\n align-items: center;\n justify-content: center;\n transition: border-color .3s var(--n-bezier), background-color .3s var(--n-bezier);\n border-radius: var(--n-border-radius);\n overflow: hidden;\n ",[M("progress","\n position: absolute;\n left: 8px;\n bottom: 8px;\n right: 8px;\n width: unset;\n "),M("upload-file-info","\n padding: 0;\n width: 100%;\n height: 100%;\n ",[_("thumbnail","\n width: 100%;\n height: 100%;\n display: flex;\n flex-direction: column;\n align-items: center;\n justify-content: center;\n font-size: 36px;\n ",[B("img","\n width: 100%;\n ")])]),B("&::before",'\n position: absolute;\n z-index: 1;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border-radius: inherit;\n opacity: 0;\n transition: opacity .2s var(--n-bezier);\n content: "";\n '),B("&:hover",[B("&::before","opacity: 1;"),M("upload-file-info",[_("thumbnail","opacity: .12;")])])]),I("error-status",[B("&:hover","\n background-color: var(--n-item-color-hover-error);\n "),M("upload-file-info",[_("name","color: var(--n-item-text-color-error);"),_("thumbnail","color: var(--n-item-text-color-error);")]),I("image-card-type","\n border: var(--n-item-border-image-card-error);\n ")]),I("with-url","\n cursor: pointer;\n ",[M("upload-file-info",[_("name","\n color: var(--n-item-text-color-success);\n text-decoration-color: var(--n-item-text-color-success);\n ",[B("a","\n text-decoration: underline;\n ")])])]),M("upload-file-info","\n position: relative;\n padding-top: 6px;\n padding-bottom: 6px;\n display: flex;\n flex-wrap: nowrap;\n ",[_("thumbnail","\n font-size: 18px;\n opacity: 1;\n transition: opacity .2s var(--n-bezier);\n color: var(--n-item-icon-color);\n ",[M("base-icon","\n margin-right: 2px;\n vertical-align: middle;\n transition: color .3s var(--n-bezier);\n ")]),_("action","\n padding-top: inherit;\n padding-bottom: inherit;\n position: absolute;\n right: 0;\n top: 0;\n bottom: 0;\n width: 80px;\n display: flex;\n align-items: center;\n transition: opacity .2s var(--n-bezier);\n justify-content: flex-end;\n opacity: 0;\n ",[M("button",[B("&:not(:last-child)",{marginRight:"4px"}),M("base-icon",[B("svg",[we()])])]),I("image-type","\n position: relative;\n max-width: 80px;\n width: auto;\n "),I("image-card-type","\n z-index: 2;\n position: absolute;\n width: 100%;\n height: 100%;\n left: 0;\n right: 0;\n bottom: 0;\n top: 0;\n display: flex;\n justify-content: center;\n align-items: center;\n ")]),_("name","\n color: var(--n-item-text-color);\n flex: 1;\n display: flex;\n justify-content: center;\n text-overflow: ellipsis;\n overflow: hidden;\n flex-direction: column;\n text-decoration-color: #0000;\n font-size: var(--n-font-size);\n transition:\n color .3s var(--n-bezier),\n text-decoration-color .3s var(--n-bezier); \n ",[B("a","\n color: inherit;\n text-decoration: underline;\n ")])])])]),M("upload-file-input","\n display: none;\n width: 0;\n height: 0;\n opacity: 0;\n ")]),Kn="__UPLOAD_DRAGGER__",qn=i(x(x({name:"UploadDragger"},Kn,!0),"setup",function(e,t){var n=t.slots,r=Q(Hn,null);return r||Se("upload-dragger","`n-upload-dragger` must be placed inside `n-upload`."),function(){var e=r.mergedClsPrefixRef.value,t=r.mergedDisabledRef.value,o=r.maxReachedRef.value;return P("div",{class:["".concat(e,"-upload-dragger"),(t||o)&&"".concat(e,"-upload-dragger--disabled")]},n)}})),Zn=P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},P("g",{fill:"none"},P("path",{d:"M21.75 3A3.25 3.25 0 0 1 25 6.25v15.5A3.25 3.25 0 0 1 21.75 25H6.25A3.25 3.25 0 0 1 3 21.75V6.25A3.25 3.25 0 0 1 6.25 3h15.5zm.583 20.4l-7.807-7.68a.75.75 0 0 0-.968-.07l-.084.07l-7.808 7.68c.183.065.38.1.584.1h15.5c.204 0 .4-.035.583-.1l-7.807-7.68l7.807 7.68zM21.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v15.5c0 .208.036.408.103.593l7.82-7.692a2.25 2.25 0 0 1 3.026-.117l.129.117l7.82 7.692c.066-.185.102-.385.102-.593V6.25a1.75 1.75 0 0 0-1.75-1.75zm-3.25 3a2.5 2.5 0 1 1 0 5a2.5 2.5 0 0 1 0-5zm0 1.5a1 1 0 1 0 0 2a1 1 0 0 0 0-2z",fill:"currentColor"}))),Jn=P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},P("g",{fill:"none"},P("path",{d:"M6.4 2A2.4 2.4 0 0 0 4 4.4v19.2A2.4 2.4 0 0 0 6.4 26h15.2a2.4 2.4 0 0 0 2.4-2.4V11.578c0-.729-.29-1.428-.805-1.944l-6.931-6.931A2.4 2.4 0 0 0 14.567 2H6.4zm-.9 2.4a.9.9 0 0 1 .9-.9H14V10a2 2 0 0 0 2 2h6.5v11.6a.9.9 0 0 1-.9.9H6.4a.9.9 0 0 1-.9-.9V4.4zm16.44 6.1H16a.5.5 0 0 1-.5-.5V4.06l6.44 6.44z",fill:"currentColor"}))),$n=i({name:"UploadProgress",props:{show:Boolean,percentage:{type:Number,required:!0},status:{type:String,required:!0}},setup:function(){return{mergedTheme:Q(Hn).mergedThemeRef}},render:function(){var e=this;return P(W,null,{default:function(){return e.show?P(Nn,{type:"line",showIndicator:!1,percentage:e.percentage,status:e.status,height:2,theme:e.mergedTheme.peers.Progress,themeOverrides:e.mergedTheme.peerOverrides.Progress}):null}})}}),Qn=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch($r){i($r)}}function s(e){try{l(r.throw(e))}catch($r){i($r)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function er(e){return e.includes("image/")}function tr(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/"),t=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(t)||[""])[0]}var nr=/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i,rr=function(e){if(e.type)return er(e.type);var t=tr(e.name||"");if(nr.test(t))return!0;var n=e.thumbnailUrl||e.url||"",r=tr(n);return!(!/^data:image\//.test(n)&&!nr.test(r))};var or=ze&&window.FileReader&&window.File;function ir(e){return e.isDirectory}function ar(e){return e.isFile}function sr(e){var t=e.id,n=e.name,r=e.percentage,o=e.status,i=e.url,a=e.file,s=e.thumbnailUrl,l=e.type,u=e.fullPath,c=e.batchId;return{id:t,name:n,percentage:null!=r?r:null,status:o,url:null!=i?i:null,file:null!=a?a:null,thumbnailUrl:null!=s?s:null,type:null!=l?l:null,fullPath:null!=u?u:null,batchId:null!=c?c:null}}var lr=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch($r){i($r)}}function s(e){try{l(r.throw(e))}catch($r){i($r)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},ur={paddingMedium:"0 3px",heightMedium:"24px",iconSizeMedium:"18px"},cr=i({name:"UploadFile",props:{clsPrefix:{type:String,required:!0},file:{type:Object,required:!0},listType:{type:String,required:!0},index:{type:Number,required:!0}},setup:function(e){var t=this,n=Q(Hn),r=q(null),o=q(""),i=X(function(){var t=e.file;return"finished"===t.status?"success":"error"===t.status?"error":"info"}),a=X(function(){if("error"===e.file.status)return"error"}),s=X(function(){return"uploading"===e.file.status}),l=X(function(){if(!n.showCancelButtonRef.value)return!1;var t=e.file;return["uploading","pending","error"].includes(t.status)}),u=X(function(){if(!n.showRemoveButtonRef.value)return!1;var t=e.file;return["finished"].includes(t.status)}),c=X(function(){if(!n.showDownloadButtonRef.value)return!1;var t=e.file;return["finished"].includes(t.status)}),d=X(function(){if(!n.showRetryButtonRef.value)return!1;var t=e.file;return["error"].includes(t.status)}),h=ce(function(){return o.value||e.file.thumbnailUrl||e.file.url}),p=X(function(){if(!n.showPreviewButtonRef.value)return!1;var t=e.file.status,r=e.listType;return["finished"].includes(t)&&h.value&&"image-card"===r});function f(t){var r=n.xhrMap,o=n.doChange,i=n.onRemoveRef.value,a=n.mergedFileListRef.value;Promise.resolve(!i||i({file:Object.assign({},t),fileList:a,index:e.index})).then(function(e){if(!1!==e){var n=Object.assign({},t,{status:"removed"});r.delete(t.id),o(n,void 0,{remove:!0})}})}return pe(function(){lr(t,void 0,void 0,y().m(function t(){var r;return y().w(function(t){for(;;)switch(t.n){case 0:if("image"===(r=e.listType)||"image-card"===r){t.n=1;break}return t.a(2);case 1:if(!n.shouldUseThumbnailUrlRef.value(e.file)){t.n=3;break}return t.n=2,n.getFileThumbnailUrlResolver(e.file);case 2:o.value=t.v;case 3:return t.a(2)}},t)}))}),{mergedTheme:n.mergedThemeRef,progressStatus:i,buttonType:a,showProgress:s,disabled:n.mergedDisabledRef,showCancelButton:l,showRemoveButton:u,showDownloadButton:c,showRetryButton:d,showPreviewButton:p,mergedThumbnailUrl:h,shouldUseThumbnailUrl:n.shouldUseThumbnailUrlRef,renderIcon:n.renderIconRef,imageRef:r,handleRemoveOrCancelClick:function(t){t.preventDefault();var r=e.file;["finished","pending","error"].includes(r.status)?f(r):["uploading"].includes(r.status)?function(e){var t=n.xhrMap.get(e.id);null==t||t.abort(),f(Object.assign({},e))}(r):Ae("upload","The button clicked type is unknown.")},handleDownloadClick:function(t){var r,o,i;t.preventDefault(),r=e.file,o=n.onDownloadRef.value,i=n.customDownloadRef.value,Promise.resolve(!o||o(Object.assign({},r))).then(function(e){!1!==e&&(i?i(Object.assign({},r)):zt(r.url,r.name))})},handleRetryClick:function(){return lr(this,void 0,void 0,y().m(function t(){var r;return y().w(function(t){for(;;)switch(t.n){case 0:if(!(r=n.onRetryRef.value)){t.n=2;break}return t.n=1,r({file:e.file});case 1:if(!1!==t.v){t.n=2;break}return t.a(2);case 2:n.submit(e.file.id);case 3:return t.a(2)}},t)}))},handlePreviewClick:function(t){var o=n.onPreviewRef.value;if(o)o(e.file,{event:t});else if("image-card"===e.listType){var i=r.value;if(!i)return;i.click()}}}},render:function(){var e,t=this,n=this.clsPrefix,r=this.mergedTheme,o=this.listType,i=this.file,a=this.renderIcon,s="image"===o;e=s||"image-card"===o?this.shouldUseThumbnailUrl(i)&&this.mergedThumbnailUrl?P("a",{rel:"noopener noreferer",target:"_blank",href:i.url||void 0,class:"".concat(n,"-upload-file-info__thumbnail"),onClick:this.handlePreviewClick},"image-card"===o?P(Ot,{src:this.mergedThumbnailUrl||void 0,previewSrc:i.url||void 0,alt:i.name,ref:"imageRef"}):P("img",{src:this.mergedThumbnailUrl||void 0,alt:i.name})):P("span",{class:"".concat(n,"-upload-file-info__thumbnail")},a?a(i):rr(i)?P(O,{clsPrefix:n},{default:Zn}):P(O,{clsPrefix:n},{default:Jn})):P("span",{class:"".concat(n,"-upload-file-info__thumbnail")},a?a(i):P(O,{clsPrefix:n},{default:function(){return P(dn,null)}}));var l=P($n,{show:this.showProgress,percentage:i.percentage||0,status:this.progressStatus}),u="text"===o||"image"===o;return P("div",{class:["".concat(n,"-upload-file"),"".concat(n,"-upload-file--").concat(this.progressStatus,"-status"),i.url&&"error"!==i.status&&"image-card"!==o&&"".concat(n,"-upload-file--with-url"),"".concat(n,"-upload-file--").concat(o,"-type")]},P("div",{class:"".concat(n,"-upload-file-info")},e,P("div",{class:"".concat(n,"-upload-file-info__name")},u&&(i.url&&"error"!==i.status?P("a",{rel:"noopener noreferer",target:"_blank",href:i.url||void 0,onClick:this.handlePreviewClick},i.name):P("span",{onClick:this.handlePreviewClick},i.name)),s&&l),P("div",{class:["".concat(n,"-upload-file-info__action"),"".concat(n,"-upload-file-info__action--").concat(o,"-type")]},this.showPreviewButton?P(Te,{key:"preview",quaternary:!0,type:this.buttonType,onClick:this.handlePreviewClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:ur},{icon:function(){return P(O,{clsPrefix:n},{default:function(){return P(pn,null)}})}}):null,(this.showRemoveButton||this.showCancelButton)&&!this.disabled&&P(Te,{key:"cancelOrTrash",theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,quaternary:!0,builtinThemeOverrides:ur,type:this.buttonType,onClick:this.handleRemoveOrCancelClick},{icon:function(){return P(ke,null,{default:function(){return t.showRemoveButton?P(O,{clsPrefix:n,key:"trash"},{default:function(){return P(gn,null)}}):P(O,{clsPrefix:n,key:"cancel"},{default:function(){return P(hn,null)}})}})}}),this.showRetryButton&&!this.disabled&&P(Te,{key:"retry",quaternary:!0,type:this.buttonType,onClick:this.handleRetryClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:ur},{icon:function(){return P(O,{clsPrefix:n},{default:function(){return P(vn,null)}})}}),this.showDownloadButton?P(Te,{key:"download",quaternary:!0,type:this.buttonType,onClick:this.handleDownloadClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:ur},{icon:function(){return P(O,{clsPrefix:n},{default:function(){return P(jt,null)}})}}):null)),!s&&l)}}),dr=i({name:"UploadTrigger",props:{abstract:Boolean},slots:Object,setup:function(e,t){var n=t.slots,r=Q(Hn,null);r||Se("upload-trigger","`n-upload-trigger` must be placed inside `n-upload`.");var o=r.mergedClsPrefixRef,i=r.mergedDisabledRef,a=r.maxReachedRef,s=r.listTypeRef,l=r.dragOverRef,u=r.openOpenFileDialog,c=r.draggerInsideRef,d=r.handleFileAddition,h=r.mergedDirectoryDndRef,p=r.triggerClassRef,f=r.triggerStyleRef,v=X(function(){return"image-card"===s.value});function m(){i.value||a.value||u()}function b(e){e.preventDefault(),l.value=!0}function x(e){e.preventDefault(),l.value=!0}function w(e){e.preventDefault(),l.value=!1}function C(e){var t;if(e.preventDefault(),!c.value||i.value||a.value)l.value=!1;else{var n=null===(t=e.dataTransfer)||void 0===t?void 0:t.items;(null==n?void 0:n.length)?function(e,t){return Qn(this,void 0,void 0,y().m(function n(){var r,o;return y().w(function(n){for(;;)switch(n.n){case 0:return o=function(e){return Qn(this,void 0,void 0,y().m(function n(){var i,a,s,l;return y().w(function(n){for(;;)switch(n.p=n.n){case 0:i=k(e),n.p=1,s=y().m(function e(){var n,i,s,l,u,c,d;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=a.value){e.n=1;break}return e.a(2,1);case 1:if(!t||!ir(n)){e.n=10;break}i=n.createReader(),s=[],e.p=2;case 3:return e.n=4,new Promise(function(e,t){i.readEntries(e,t)});case 4:l=e.v,s=s.concat(l);case 5:if(l.length>0){e.n=3;break}case 6:e.n=8;break;case 7:e.p=7,c=e.v,Le("upload","error happens when handling directory upload",c);case 8:return e.n=9,o(s);case 9:e.n=14;break;case 10:if(!ar(n)){e.n=14;break}return e.p=11,e.n=12,new Promise(function(e,t){n.file(e,t)});case 12:u=e.v,r.push({file:u,entry:n,source:"dnd"}),e.n=14;break;case 13:e.p=13,d=e.v,Le("upload","error happens when handling file upload",d);case 14:return e.a(2)}},e,null,[[11,13],[2,7]])}),i.s();case 2:if((a=i.n()).done){n.n=5;break}return n.d(g(s()),3);case 3:if(!n.v){n.n=4;break}return n.a(3,4);case 4:n.n=2;break;case 5:n.n=7;break;case 6:n.p=6,l=n.v,i.e(l);case 7:return n.p=7,i.f(),n.f(7);case 8:return n.a(2)}},n,null,[[1,6,7,8]])}))},r=[],n.n=1,o(e);case 1:return n.a(2,r)}},n)}))}(Array.from(n).map(function(e){return e.webkitGetAsEntry()}),h.value).then(function(e){d(e)}).finally(function(){l.value=!1}):l.value=!1}}return function(){var t,r=o.value;return e.abstract?null===(t=n.default)||void 0===t?void 0:t.call(n,{handleClick:m,handleDrop:C,handleDragOver:b,handleDragEnter:x,handleDragLeave:w}):P("div",{class:["".concat(r,"-upload-trigger"),(i.value||a.value)&&"".concat(r,"-upload-trigger--disabled"),v.value&&"".concat(r,"-upload-trigger--image-card"),p.value],style:f.value,onClick:m,onDrop:C,onDragover:b,onDragenter:x,onDragleave:w},v.value?P(qn,null,{default:function(){return E(n.default,function(){return[P(O,{clsPrefix:r},{default:function(){return P(cn,null)}})]})}}):n)}}}),hr=i({name:"UploadFileList",setup:function(e,t){var n=t.slots,r=Q(Hn,null);r||Se("upload-file-list","`n-upload-file-list` must be placed inside `n-upload`.");var o=r.abstractRef,i=r.mergedClsPrefixRef,a=r.listTypeRef,s=r.mergedFileListRef,l=r.fileListClassRef,u=r.fileListStyleRef,c=r.cssVarsRef,d=r.themeClassRef,h=r.maxReachedRef,p=r.showTriggerRef,f=r.imageGroupPropsRef,v=X(function(){return"image-card"===a.value}),g=function(){return s.value.map(function(e,t){return P(cr,{clsPrefix:i.value,key:e.id,file:e,index:t,listType:a.value})})};return function(){var e=i.value,t=o.value;return P("div",{class:["".concat(e,"-upload-file-list"),v.value&&"".concat(e,"-upload-file-list--grid"),t?null==d?void 0:d.value:void 0,l.value],style:[t&&c?c.value:"",u.value]},v.value?P(Lt,Object.assign({},f.value),{default:g}):P(W,{group:!0},{default:g}),p.value&&!h.value&&v.value&&P(dr,null,n))}}}),pr=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch($r){i($r)}}function s(e){try{l(r.throw(e))}catch($r){i($r)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function fr(e,t,n){var r=function(e,t,n){var r=e.doChange,o=e.xhrMap,i=0;function a(n){var a,s=Object.assign({},t,{status:"error",percentage:i});o.delete(t.id),s=sr((null===(a=e.onError)||void 0===a?void 0:a.call(e,{file:s,event:n}))||s),r(s,n)}return{handleXHRLoad:function(s){var l;if(e.isErrorState){if(e.isErrorState(n))return void a(s)}else if(n.status<200||n.status>=300)return void a(s);var u=Object.assign({},t,{status:"finished",percentage:i});o.delete(t.id),u=sr((null===(l=e.onFinish)||void 0===l?void 0:l.call(e,{file:u,event:s}))||u),r(u,s)},handleXHRError:a,handleXHRAbort:function(e){var n=Object.assign({},t,{status:"removed",file:null,percentage:i});o.delete(t.id),r(n,e)},handleXHRProgress:function(e){var n=Object.assign({},t,{status:"uploading"});if(e.lengthComputable){var o=Math.ceil(e.loaded/e.total*100);n.percentage=o,i=o}r(n,e)}}}(e,t,n);n.onabort=r.handleXHRAbort,n.onerror=r.handleXHRError,n.onload=r.handleXHRLoad,n.upload&&(n.upload.onprogress=r.handleXHRProgress)}function vr(e,t){return"function"==typeof e?e({file:t}):e||{}}function gr(e,t,n,r){var o=r.method,i=r.action,a=r.withCredentials,s=r.responseType,l=r.headers,u=r.data,c=new XMLHttpRequest;c.responseType=s,e.xhrMap.set(n.id,c),c.withCredentials=a;var d=new FormData;if(function(e,t,n){var r=vr(t,n);r&&Object.keys(r).forEach(function(t){e.append(t,r[t])})}(d,u,n),null!==n.file&&d.append(t,n.file),fr(e,n,c),void 0!==i){c.open(o.toUpperCase(),i),function(e,t,n){var r=vr(t,n);r&&Object.keys(r).forEach(function(t){e.setRequestHeader(t,r[t])})}(c,l,n),c.send(d);var h=Object.assign({},n,{status:"uploading"});e.doChange(h)}}var yr=Object.assign(Object.assign({},U.props),{name:{type:String,default:"file"},accept:String,action:String,customRequest:Function,directory:Boolean,directoryDnd:{type:Boolean,default:void 0},method:{type:String,default:"POST"},multiple:Boolean,showFileList:{type:Boolean,default:!0},data:[Object,Function],headers:[Object,Function],withCredentials:Boolean,responseType:{type:String,default:""},disabled:{type:Boolean,default:void 0},onChange:Function,onRemove:Function,onFinish:Function,onError:Function,onRetry:Function,onBeforeUpload:Function,isErrorState:Function,onDownload:Function,customDownload:Function,defaultUpload:{type:Boolean,default:!0},fileList:Array,"onUpdate:fileList":[Function,Array],onUpdateFileList:[Function,Array],fileListClass:String,fileListStyle:[String,Object],defaultFileList:{type:Array,default:function(){return[]}},showCancelButton:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showDownloadButton:Boolean,showRetryButton:{type:Boolean,default:!0},showPreviewButton:{type:Boolean,default:!0},listType:{type:String,default:"text"},onPreview:Function,shouldUseThumbnailUrl:{type:Function,default:function(e){return!!or&&rr(e)}},createThumbnailUrl:Function,abstract:Boolean,max:Number,showTrigger:{type:Boolean,default:!0},imageGroupProps:Object,inputProps:Object,triggerClass:String,triggerStyle:[String,Object],renderIcon:Function}),mr=i({name:"Upload",props:yr,setup:function(e){e.abstract&&"image-card"===e.listType&&Se("upload","when the list-type is image-card, abstract is not supported.");var t=N(e),n=t.mergedClsPrefixRef,r=t.inlineThemeDisabled,o=U("Upload","-upload",Yn,Ne,e,n),i=ue(e),a=q(e.defaultFileList),s=se(e,"fileList"),l=q(null),u={value:!1},c=q(!1),d=new Map,h=le(s,a),p=X(function(){return h.value.map(sr)}),f=X(function(){var t=e.max;return void 0!==t&&p.value.length>=t});function g(){var e;null===(e=l.value)||void 0===e||e.click()}var m=X(function(){return e.multiple||e.directory}),b=function(t,n){var r,o,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{append:!1,remove:!1},l=s.append,u=s.remove,c=Array.from(p.value),d=c.findIndex(function(e){return e.id===t.id});if(l||u||~d){l?c.push(t):u?c.splice(d,1):c.splice(d,1,t);var h=e.onChange;h&&h({file:t,fileList:c,event:n}),r=c,o=e["onUpdate:fileList"],i=e.onUpdateFileList,o&&ye(o,r),i&&ye(i,r),a.value=r}};function x(t,n){var r=this;if(t&&0!==t.length){var o=e.onBeforeUpload;t=m.value?t:[t[0]];var i=e.max,a=e.accept;t=t.filter(function(e){var t=e.file;return"dnd"!==e.source||!(null==a?void 0:a.trim())||function(e,t,n){return e=e.toLowerCase(),t=t.toLocaleLowerCase(),(n=n.toLocaleLowerCase()).split(",").map(function(e){return e.trim()}).filter(Boolean).some(function(n){if(n.startsWith(".")){if(e.endsWith(n))return!0}else{if(!n.includes("/"))return!0;var r=v(t.split("/"),2),o=r[0],i=r[1],a=v(n.split("/"),2),s=a[0],l=a[1];if(("*"===s||o&&s&&s===o)&&("*"===l||i&&l&&l===i))return!0}return!1})}(t.name,t.type,a)}),i&&(t=t.slice(0,i-p.value.length));var s=Pe();Promise.all(t.map(function(e){return pr(r,[e],void 0,function(e){var t=e.file,n=e.entry;return y().m(function e(){var r,i,a,l;return y().w(function(e){for(;;)switch(e.n){case 0:if(i={id:Pe(),batchId:s,name:t.name,status:"pending",percentage:0,file:t,url:null,type:t.type,thumbnailUrl:null,fullPath:null!==(r=null==n?void 0:n.fullPath)&&void 0!==r?r:"/".concat(t.webkitRelativePath||t.name)},a=!o){e.n=2;break}return e.n=1,o({file:i,fileList:p.value});case 1:l=e.v,a=!1!==l;case 2:if(!a){e.n=3;break}return e.a(2,i);case 3:return e.a(2,null)}},e)})()})})).then(function(e){return pr(r,void 0,void 0,y().m(function t(){var r;return y().w(function(t){for(;;)switch(t.n){case 0:return r=Promise.resolve(),e.forEach(function(e){r=r.then(ve).then(function(){e&&b(e,n,{append:!0})})}),t.n=1,r;case 1:return t.a(2)}},t)}))}).then(function(){e.defaultUpload&&w()})}}function w(t){var n=e.method,r=e.action,o=e.withCredentials,i=e.headers,a=e.data,s=e.name,l=void 0!==t?p.value.filter(function(e){return e.id===t}):p.value,u=void 0!==t;l.forEach(function(t){var l=t.status;("pending"===l||"error"===l&&u)&&(e.customRequest?function(e){var t=e.inst,n=e.file,r=e.data,o=e.headers,i=e.withCredentials,a=e.action,s=e.customRequest,l=e.inst.doChange,u=0;s({file:n,data:r,headers:o,withCredentials:i,action:a,onProgress:function(e){var t=Object.assign({},n,{status:"uploading"}),r=e.percent;t.percentage=r,u=r,l(t)},onFinish:function(){var e,r=Object.assign({},n,{status:"finished",percentage:u});r=sr((null===(e=t.onFinish)||void 0===e?void 0:e.call(t,{file:r}))||r),l(r)},onError:function(){var e,r=Object.assign({},n,{status:"error",percentage:u});r=sr((null===(e=t.onError)||void 0===e?void 0:e.call(t,{file:r}))||r),l(r)}})}({inst:{doChange:b,xhrMap:d,onFinish:e.onFinish,onError:e.onError},file:t,action:r,withCredentials:o,headers:i,data:a,customRequest:e.customRequest}):gr({doChange:b,xhrMap:d,onFinish:e.onFinish,onError:e.onError,isErrorState:e.isErrorState},s,t,{method:n,action:r,withCredentials:o,responseType:e.responseType,headers:i,data:a}))})}var k=X(function(){var e=o.value,t=e.common.cubicBezierEaseInOut,n=e.self,r=n.draggerColor,i=n.draggerBorder,a=n.draggerBorderHover,s=n.itemColorHover,l=n.itemColorHoverError,u=n.itemTextColorError,c=n.itemTextColorSuccess,d=n.itemTextColor,h=n.itemIconColor,p=n.itemDisabledOpacity,f=n.lineHeight;return{"--n-bezier":t,"--n-border-radius":n.borderRadius,"--n-dragger-border":i,"--n-dragger-border-hover":a,"--n-dragger-color":r,"--n-font-size":n.fontSize,"--n-item-color-hover":s,"--n-item-color-hover-error":l,"--n-item-disabled-opacity":p,"--n-item-icon-color":h,"--n-item-text-color":d,"--n-item-text-color-error":u,"--n-item-text-color-success":c,"--n-line-height":f,"--n-item-border-image-card-error":n.itemBorderImageCardError,"--n-item-border-image-card":n.itemBorderImageCard}}),C=r?K("upload",void 0,k,e):void 0;fe(Hn,{mergedClsPrefixRef:n,mergedThemeRef:o,showCancelButtonRef:se(e,"showCancelButton"),showDownloadButtonRef:se(e,"showDownloadButton"),showRemoveButtonRef:se(e,"showRemoveButton"),showRetryButtonRef:se(e,"showRetryButton"),onRemoveRef:se(e,"onRemove"),onDownloadRef:se(e,"onDownload"),customDownloadRef:se(e,"customDownload"),mergedFileListRef:p,triggerClassRef:se(e,"triggerClass"),triggerStyleRef:se(e,"triggerStyle"),shouldUseThumbnailUrlRef:se(e,"shouldUseThumbnailUrl"),renderIconRef:se(e,"renderIcon"),xhrMap:d,submit:w,doChange:b,showPreviewButtonRef:se(e,"showPreviewButton"),onPreviewRef:se(e,"onPreview"),getFileThumbnailUrlResolver:function(t){var n;if(t.thumbnailUrl)return t.thumbnailUrl;var r=e.createThumbnailUrl;return r?null!==(n=r(t.file,t))&&void 0!==n?n:t.url||"":t.url?t.url:t.file?function(e){return Qn(this,void 0,void 0,y().m(function t(){return y().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,new Promise(function(t){e.type&&er(e.type)?t(window.URL.createObjectURL(e)):t("")});case 1:return t.a(2,t.v)}},t)}))}(t.file):""},listTypeRef:se(e,"listType"),dragOverRef:c,openOpenFileDialog:g,draggerInsideRef:u,handleFileAddition:x,mergedDisabledRef:i.mergedDisabledRef,maxReachedRef:f,fileListClassRef:se(e,"fileListClass"),fileListStyleRef:se(e,"fileListStyle"),abstractRef:se(e,"abstract"),acceptRef:se(e,"accept"),cssVarsRef:r?void 0:k,themeClassRef:null==C?void 0:C.themeClass,onRender:null==C?void 0:C.onRender,showTriggerRef:se(e,"showTrigger"),imageGroupPropsRef:se(e,"imageGroupProps"),mergedDirectoryDndRef:X(function(){var t;return null!==(t=e.directoryDnd)&&void 0!==t?t:e.directory}),onRetryRef:se(e,"onRetry")});var P={clear:function(){a.value=[]},submit:w,openOpenFileDialog:g};return Object.assign({mergedClsPrefix:n,draggerInsideRef:u,inputElRef:l,mergedTheme:o,dragOver:c,mergedMultiple:m,cssVars:r?void 0:k,themeClass:null==C?void 0:C.themeClass,onRender:null==C?void 0:C.onRender,handleFileInputChange:function(e){var t=e.target;x(t.files?Array.from(t.files).map(function(e){return{file:e,entry:null,source:"input"}}):null,e),t.value=""}},P)},render:function(){var e,t,n=this.draggerInsideRef,r=this.mergedClsPrefix,o=this.$slots,i=this.directory,a=this.onRender;if(o.default&&!this.abstract){var s=o.default()[0];(null===(e=null==s?void 0:s.type)||void 0===e?void 0:e[Kn])&&(n.value=!0)}var l=P("input",Object.assign({},this.inputProps,{ref:"inputElRef",type:"file",class:"".concat(r,"-upload-file-input"),accept:this.accept,multiple:this.mergedMultiple,onChange:this.handleFileInputChange,webkitdirectory:i||void 0,directory:i||void 0}));return this.abstract?P(ne,null,null===(t=o.default)||void 0===t?void 0:t.call(o),P(We,{to:"body"},l)):(null==a||a(),P("div",{class:["".concat(r,"-upload"),n.value&&"".concat(r,"-upload--dragger-inside"),this.dragOver&&"".concat(r,"-upload--drag-over"),this.themeClass],style:this.cssVars},l,this.showTrigger&&"image-card"!==this.listType&&P(dr,null,o),this.showFileList&&P(hr,null,o)))}});function br(){var e=Q(Ve,null);return X(function(){if(null===e)return Ue;var t=e.mergedThemeRef.value,n=e.mergedThemeOverridesRef.value,r=(null==t?void 0:t.common)||Ue;return(null==n?void 0:n.common)?Object.assign({},r,n.common):r})}
/*!
      * @indoorequal/vue-maplibre-gl v8.4.0
      * (c) 2025 François de Metz <francois@2metz.fr>
      * @license MIT
      */var xr=Object.defineProperty,wr=function(e,t,n){return function(e,t,n){return t in e?xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=b(t)?t+"":t,n)},kr=Symbol("map"),Cr=Symbol("isLoaded"),Pr=Symbol("isInitialized"),Sr=Symbol("componentId"),Mr=Symbol("sourceId"),_r=Symbol("sourceLayerRegistry"),Ir=["error","load","idle","remove","render","resize","webglcontextlost","webglcontextrestored","dataloading","data","tiledataloading","sourcedataloading","styledataloading","sourcedata","styledata","styleimagemissing","dataabort","sourcedataabort","boxzoomcancel","boxzoomstart","boxzoomend","touchcancel","touchmove","touchend","touchstart","click","contextmenu","dblclick","mousemove","mouseup","mousedown","mouseout","mouseover","movestart","move","moveend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","dragstart","drag","dragend","pitchstart","pitch","pitchend","wheel","terrain","cooperativegestureprevented"];function Dr(e,t,n,r){return function(o){return n.emit(r,{type:o.type,map:t,component:e,event:o})}}var Br=function(e){return e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right",e}(Br||{}),Rr=Object.values(Br),Fr=new Map,Er=Symbol("default");var Or=i({name:"MglMap",props:{width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},attributionControl:{type:[Boolean,Object],default:void 0},bearing:{type:Number},bearingSnap:{type:Number},bounds:{type:[Array,Object]},boxZoom:{type:Boolean,default:void 0},center:{type:[Array,Object]},clickTolerance:{type:Number},collectResourceTiming:{type:Boolean,default:void 0},crossSourceCollisions:{type:Boolean,default:void 0},dragPan:{type:Boolean,default:void 0},dragRotate:{type:Boolean,default:void 0},doubleClickZoom:{type:Boolean,default:void 0},hash:{type:[Boolean,String],default:void 0},fadeDuration:{type:Number},fitBoundsOptions:{type:Object},interactive:{type:Boolean,default:void 0},keyboard:{type:Boolean,default:void 0},locale:{type:Object},localIdeographFontFamily:{type:String},logoPosition:{type:[String],validator:function(e){return e in Br}},maxBounds:{type:[Array,Object]},maxPitch:{type:Number},maxZoom:{type:Number},minPitch:{type:Number},minZoom:{type:Number},pitch:{type:Number},pitchWithRotate:{type:Boolean,default:void 0},canvasContextAttributes:{type:Object},refreshExpiredTiles:{type:Boolean,default:void 0},renderWorldCopies:{type:Boolean,default:void 0},scrollZoom:{type:Boolean,default:void 0},mapStyle:{type:[String,Object]},trackResize:{type:Boolean,default:void 0},transformRequest:{type:Function},transformCameraUpdate:{type:Function},touchZoomRotate:{type:Boolean,default:void 0},touchPitch:{type:Boolean,default:void 0},zoom:{type:Number},maxTileCacheSize:{type:Number},mapKey:{type:[String,Symbol]},pixelRatio:{type:Number},validateStyle:{type:Boolean,default:void 0},cooperativeGestures:{type:Object}},emits:["map:error","map:load","map:idle","map:remove","map:render","map:resize","map:webglcontextlost","map:webglcontextrestored","map:dataloading","map:data","map:tiledataloading","map:sourcedataloading","map:styledataloading","map:sourcedata","map:styledata","map:styleimagemissing","map:dataabort","map:sourcedataabort","map:boxzoomcancel","map:boxzoomstart","map:boxzoomend","map:touchcancel","map:touchmove","map:touchend","map:touchstart","map:click","map:contextmenu","map:dblclick","map:mousemove","map:mouseup","map:mousedown","map:mouseout","map:mouseover","map:movestart","map:move","map:moveend","map:zoomstart","map:zoom","map:zoomend","map:rotatestart","map:rotate","map:rotateend","map:dragstart","map:drag","map:dragend","map:pitchstart","map:pitch","map:pitchend","map:wheel","map:terrain","map:cooperativegestureprevented","map:projectiontransition","update:center","update:zoom","update:pitch","update:bearing"],slots:Object,setup:function(e,t){var n=Ge(he()),r=Xe(),o=Xe(),i=q(!1),a=q(!1),s=new Map,l=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Er,o=Fr.get(r);return o||(o=Ze({isLoaded:!1,isMounted:!1,language:null}),Fr.set(r,o)),o.isLoaded=(null==(n=t.value)?void 0:n.loaded())||!1,o.isMounted=!1,o.component=e,o.map=t.value,o}(n,o,e.mapKey);function u(){l.isMounted=!0;for(var u=f(f({},e),{},{style:e.mapStyle,container:r.value}),c=0,d=Object.keys(u);c<d.length;c++){var h=d[c];void 0===u[h]&&delete u[h]}if(o.value=Ge(new Ye.Map(u)),l.map=o.value,i.value=!0,s.set("__load",function(){return a.value=!0,l.isLoaded=!0}),o.value.on("load",s.get("__load")),s.set("__moveend",function(){return t.emit("update:center",o.value.getCenter())}),o.value.on("moveend",s.get("__moveend")),s.set("__zoomend",function(){return t.emit("update:zoom",o.value.getZoom())}),o.value.on("zoomend",s.get("__zoomend")),s.set("__pitchend",function(){return t.emit("update:pitch",o.value.getPitch())}),o.value.on("pitchend",s.get("__pitchend")),s.set("__rotateend",function(){return t.emit("update:bearing",o.value.getBearing())}),o.value.on("rotateend",s.get("__rotateend")),n.vnode.props){var v,g=k(Ir);try{for(g.s();!(v=g.n()).done;){var y=v.value;if(n.vnode.props["onMap:"+y]){var m="map:".concat(y),b=Dr(n,o.value,t,m);s.set(y,b),o.value.on(y,b)}}}catch(x){g.e(x)}finally{g.f()}}o.value.getCanvas().addEventListener("webglcontextlost",p)}function c(){return d.apply(this,arguments)}function d(){return d=h(y().m(function e(){return y().w(function(e){for(;;)switch(e.n){case 0:l.isMounted=!1,l.isLoaded=!1,a.value=!1,o.value&&(o.value.getCanvas().removeEventListener("webglcontextlost",p),i.value=!1,s.forEach(function(e,t){o.value.off(t.startsWith("__")?t.substring(2):t,e)}),o.value.remove());case 1:return e.a(2)}},e)})),d.apply(this,arguments)}function p(){c(),ve(u)}return fe(kr,o),fe(Cr,a),fe(Pr,i),fe(Sr,n.uid),fe(Mr,""),$(function(){return e.bearing},function(e){var t;e&&(null==(t=o.value)||t.setBearing(e))}),$(function(){return e.bounds},function(t){var n;t&&(null==(n=o.value)||n.fitBounds(t,e.fitBoundsOptions))}),$(function(){return e.center},function(e){var t,n,r=null==(t=o.value)?void 0:t.getCenter();e&&r&&!function(e,t){var n=Ye.LngLat.convert(e),r=Ye.LngLat.convert(t);return n.lng===r.lng&&n.lat===r.lat}(e,r)&&(null==(n=o.value)||n.setCenter(e))}),$(function(){return e.maxBounds},function(e){var t;e&&(null==(t=o.value)||t.setMaxBounds(e))}),$(function(){return e.maxPitch},function(e){var t;e&&(null==(t=o.value)||t.setMaxPitch(e))}),$(function(){return e.maxZoom},function(e){var t;e&&(null==(t=o.value)||t.setMaxZoom(e))}),$(function(){return e.minPitch},function(e){var t;e&&(null==(t=o.value)||t.setMinPitch(e))}),$(function(){return e.minZoom},function(e){var t;e&&(null==(t=o.value)||t.setMinZoom(e))}),$(function(){return e.pitch},function(e){var t;e&&(null==(t=o.value)||t.setPitch(e))}),$(function(){return e.renderWorldCopies},function(e){var t;e&&(null==(t=o.value)||t.setRenderWorldCopies(e))}),$(function(){return e.mapStyle},function(e){var t;e&&(null==(t=o.value)||t.setStyle(e))}),$(function(){return e.transformRequest},function(e){var t;e&&(null==(t=o.value)||t.setTransformRequest(e))}),$(function(){return e.zoom},function(e){var t;e&&(null==(t=o.value)||t.setZoom(e))}),$(function(){return e.zoom},function(e){var t;e&&(null==(t=o.value)||t.setZoom(e))}),de(u),He(c),t.expose({map:o}),function(){return[P("div",{ref:r,style:{height:e.height,width:e.width}}),i.value&&t.slots.default?t.slots.default({}):void 0]}},render:function(){return null}});function jr(e,t){var n=Q(kr),r=Q(Pr),o=Xe();return o.value=e(),function(e,t,n){$(e,function(e){var r,o;e&&-1===Rr.indexOf(e)||(null!=(r=t.value)&&r.hasControl(n)&&t.value.removeControl(n),null==(o=t.value)||o.addControl(n,e))},{immediate:!0})}(function(){return t.position},n,o.value),He(function(){var e;return r.value&&(null==(e=n.value)?void 0:e.removeControl(o.value))}),{control:o,map:n}}var zr=function(){return c(function e(t,n){l(this,e),wr(this,"container"),this.isAdded=t,this.container=document.createElement("div"),this.setClasses(n)},[{key:"getDefaultPosition",value:function(){return Br.TOP_LEFT}},{key:"onAdd",value:function(){var e=this;return ve(function(){return e.isAdded.value=!0}),this.container}},{key:"onRemove",value:function(){this.isAdded.value=!1,this.container.remove()}},{key:"setClasses",value:function(e){this.container.className=e}}])}(),Lr=i({name:"MglCustomControl",props:{position:{type:String,validator:function(e){return-1!==Rr.indexOf(e)}},class:{type:String,default:"maplibregl-ctrl maplibregl-ctrl-group"}},slots:Object,setup:function(e,t){var n=t.slots,r=q(!1),o=jr(function(){return new zr(r,e.class)},e).control;return $(function(){return e.class},function(){return o.value.setClasses(e.class)}),function(){var e;return r.value?P(We,{to:o.value.container},null==(e=n.default)?void 0:e.call(n,{})):Ke("custom-component")}},render:function(){return null}}),Tr=i({name:"MglFullscreenControl",props:{position:{type:String,validator:function(e){return-1!==Rr.indexOf(e)}},container:{type:Object,default:null}},setup:function(e){var t=jr(function(){return new Ye.FullscreenControl({container:e.container||void 0})},e),n=t.control,r=t.map;function o(){ve(function(){var e;return null==(e=r.value)?void 0:e.resize()})}n.value.on("fullscreenstart",o),n.value.on("fullscreenend",o),He(function(){n.value.off("fullscreenstart",o),n.value.off("fullscreenend",o)})},render:function(){return null}}),Ar=i({name:"MglGeolocateControl",props:{position:{type:String,default:Br.TOP_RIGHT,validator:function(e){return-1!==Rr.indexOf(e)}},positionOptions:{type:Object,default:function(){return{enableHighAccuracy:!1,timeout:6e3}}},fitBoundsOptions:{type:Object,default:function(){return{maxZoom:15}}},trackUserLocation:{type:Boolean,default:!1},showAccuracyCircle:{type:Boolean,default:!0},showUserLocation:{type:Boolean,default:!0}},emits:["trackuserlocationstart","trackuserlocationend","userlocationlostfocus","userlocationfocus","geolocate","error","outofmaxbounds"],setup:function(e,t){var n=jr(function(){return new Ye.GeolocateControl({positionOptions:e.positionOptions,fitBoundsOptions:e.fitBoundsOptions,trackUserLocation:e.trackUserLocation,showAccuracyCircle:e.showAccuracyCircle,showUserLocation:e.showUserLocation})},e).control;function r(e){var r=function(n){t.emit(e,n)};n.value.on(e,r),He(function(){n.value.off(e,r)})}r("trackuserlocationstart"),r("trackuserlocationend"),r("userlocationlostfocus"),r("userlocationfocus"),r("geolocate"),r("error"),r("outofmaxbounds")},render:function(){return null}}),Wr=i({name:"MglNavigationControl",props:{position:{type:String,validator:function(e){return-1!==Rr.indexOf(e)}},showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0},visualizePitch:Boolean},setup:function(e){jr(function(){return new Ye.NavigationControl({showCompass:e.showCompass,showZoom:e.showZoom,visualizePitch:e.visualizePitch})},e)},render:function(){return null}}),Nr=function(e){return e.IMPERIAL="imperial",e.METRIC="metric",e.NAUTICAL="nautical",e}(Nr||{}),Ur=Object.values(Nr),Vr=i({name:"MglScaleControl",props:{position:{type:String,validator:function(e){return-1!==Rr.indexOf(e)}},maxWidth:{type:Number,default:100},unit:{type:String,default:"metric",validator:function(e){return-1!==Ur.indexOf(e)}}},setup:function(e){jr(function(){return new Ye.ScaleControl({maxWidth:e.maxWidth,unit:e.unit})},e)},render:function(){return null}}),Gr=function(){return c(function e(){l(this,e),wr(this,"unmountHandlers",new Map)},[{key:"registerUnmountHandler",value:function(e,t){this.unmountHandlers.set(e,t)}},{key:"unregisterUnmountHandler",value:function(e){this.unmountHandlers.delete(e)}},{key:"unmount",value:function(){this.unmountHandlers.forEach(function(e){return e()})}}])}(),Xr=function(){function e(){l(this,e)}return c(e,null,[{key:"genSourceOpts",value:function(e){for(var t=f({},e),n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];(void 0===t[o]||"sourceId"===o)&&delete t[o]}return t}},{key:"getSourceRef",value:function(t,n){var r="string"==typeof n,o=String(t)+(r?n:""),i=e.REFS.get(o);return i||(i=q(r?null:void 0),e.REFS.set(o,i)),i}}])}();wr(Xr,"REFS",new Map);var Hr=Xr;var Yr=i({name:"MglGeoJsonSource",props:{sourceId:{type:String,required:!0},data:{type:[Object,String],required:!0},maxzoom:Number,attribution:String,buffer:Number,tolerance:Number,cluster:Boolean,clusterRadius:Number,clusterMaxZoom:Number,clusterMinPoints:Number,clusterProperties:Object,lineMetrics:Boolean,generateId:Boolean,promoteId:[Object,String],filter:[Array,String,Object]},slots:Object,setup:function(e,t){var n=t.slots,r=Q(Sr),o=Hr.getSourceRef(r,e.sourceId),i=new Gr,a=f(f({},e),{},{type:"geojson"});return fe(Mr,e.sourceId),fe(_r,i),function(e,t,n){var r=Q(kr),o=Q(Cr);function i(){o.value&&(r.value.addSource(t.sourceId,Hr.genSourceOpts(t)),e.value=r.value.getSource(t.sourceId))}$(o,i,{immediate:!0}),r.value.on("style.load",i),He(function(){o.value&&(n.unmount(),r.value.removeSource(t.sourceId)),r.value.off("style.load",i)})}(o,a,i),$([qe(e.data)?e.data:function(){return e.data},o],function(e){var t=v(e,2),n=t[0],r=t[1];null==r||r.setData(n||{type:"FeatureCollection",features:[]})},{immediate:!0}),function(){return[Ke("GeoJSON Source"),o.value&&n.default?n.default({}):void 0]}}}),Kr=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","touchstart","touchend","touchcancel"];function qr(){return{layerId:{type:String,required:!0},source:{type:String},metadata:{type:[Object,Array,String,Number]},sourceLayer:{type:String},minzoom:{type:Number},maxzoom:{type:Number},filter:{type:Object},before:{type:String},layout:{type:Object},paint:{type:Object}}}function Zr(e,t){var n=Q(kr),r=Q(Cr),o=Q(_r);function i(){r.value&&(t&&function(e,t,n){if(n.props){var r,o=k(Kr);try{for(o.s();!(r=o.n()).done;){var i=r.value,a="on"+i.charAt(0).toUpperCase()+i.substr(1);n.props[a]&&e.off(i,t,n.props[a])}}catch(s){o.e(s)}finally{o.f()}}}(n.value,e,t.vnode),n.value.getLayer(e)&&n.value.removeLayer(e))}o.registerUnmountHandler(e,i),He(function(){o.unregisterUnmountHandler(e),i()})}function Jr(e,t){var n=Q(Mr);if(n||t.source){var r=he(),o=Q(kr),i=Q(Cr),a=Q(Sr),s=Hr.getSourceRef(a,t.source||n);return Zr(t.layerId,r),$(function(){return t.minzoom},function(){return o.value.setLayerZoomRange(t.layerId,t.minzoom||0,t.maxzoom||24)}),$(function(){return t.maxzoom},function(){return o.value.setLayerZoomRange(t.layerId,t.minzoom||0,t.maxzoom||24)}),$(function(){return t.layout},function(e){if(e)for(var n=0,r=Object.entries(e);n<r.length;n++){var i=v(r[n],2),a=i[0],s=i[1];o.value.setLayoutProperty(t.layerId,a,s)}},{deep:!0}),$(function(){return t.paint},function(e){if(e)for(var n=0,r=Object.entries(e);n<r.length;n++){var i=v(r[n],2),a=i[0],s=i[1];o.value.setPaintProperty(t.layerId,a,s)}},{deep:!0}),$(function(){return t.filter},function(e){return o.value.setFilter(t.layerId,e)},{deep:!0}),$([i,s],function(i){var a=v(i,2),s=a[0],l=a[1];s&&(l||void 0===l)&&(o.value.addLayer(function(e,t,n,r){for(var o={id:e,type:t,source:n.source||r,metadata:n.metadata,minzoom:n.minzoom,maxzoom:n.maxzoom,"source-layer":n.sourceLayer,filter:n.filter,paint:n.paint,layout:n.layout},i=0,a=Object.keys(o);i<a.length;i++){var s=a[i];void 0===o[s]&&delete o[s]}return o}(t.layerId,e,t,n),t.before||void 0),function(e,t,n){if(n.props)for(var r=0,o=Kr;r<o.length;r++){var i=o[r],a="on"+i.charAt(0).toUpperCase()+i.substr(1);n.props[a]&&e.on(i,t,n.props[a])}}(o.value,t.layerId,r.vnode))},{immediate:!0}),function(){return Ke("".concat(e," Layer"))}}}i({name:"MglBackgroundLayer",props:{layerId:{type:String,required:!0},metadata:[Object,Array,String,Number],minzoom:Number,maxzoom:Number,before:String,layout:Object,paint:Object},emits:[].concat(Kr),setup:function(e){var t=Q(kr),n=Q(Cr);return Zr(e.layerId),$(function(){return e.layout},function(n){if(n)for(var r=0,o=Object.entries(n);r<o.length;r++){var i=v(o[r],2),a=i[0],s=i[1];t.value.setLayoutProperty(e.layerId,a,s)}}),$(function(){return e.paint},function(n){if(n)for(var r=0,o=Object.entries(n);r<o.length;r++){var i=v(o[r],2),a=i[0],s=i[1];t.value.setPaintProperty(e.layerId,a,s)}}),$(n,function(n){n&&t.value.addLayer({id:e.layerId,type:"background",metadata:e.metadata,minzoom:e.minzoom,maxzoom:e.maxzoom,layout:e.layout,paint:e.paint},e.before||void 0)},{immediate:!0}),function(){return Ke("Background Layer")}}}),i({name:"MglCircleLayer",props:qr(),emits:[].concat(Kr),setup:function(e){return Jr("circle",e)}}),i({name:"MglFillLayer",props:qr(),emits:[].concat(Kr),setup:function(e){return Jr("fill",e)}}),i({name:"MglFillExtrusionLayer",props:qr(),emits:[].concat(Kr),setup:function(e){return Jr("fill-extrusion",e)}}),i({name:"MglHeatmapLayer",props:qr(),emits:[].concat(Kr),setup:function(e){return Jr("heatmap",e)}}),i({name:"MglHillshadeLayer",props:qr(),emits:[].concat(Kr),setup:function(e){return Jr("hillshade",e)}});var $r,Qr=i({name:"MglLineLayer",props:qr(),emits:[].concat(Kr),setup:function(e){return Jr("line",e)}});function eo(){return eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eo.apply(null,arguments)}i({name:"MglRasterLayer",props:qr(),emits:[].concat(Kr),setup:function(e){return Jr("raster",e)}}),i({name:"MglSymbolLayer",props:qr(),emits:[].concat(Kr),setup:function(e){return Jr("symbol",e)}}),function(e){e.Commit="commit",e.Provisional="provisional",e.Finish="finish"}($r||($r={}));var to="selected",no="midPoint",ro="selectionPointFeatureId",oo="selectionPoint",io="currentlyDrawing",ao="edited",so="closingPoint",lo="coordinatePoint",uo="coordinatePointIds";function co(e){return Boolean(e&&"object"==b(e)&&null!==e&&!Array.isArray(e))}function ho(e){return Boolean(e&&"object"==b(e)&&"properties"in e&&"object"==b(e.properties)&&null!==e.properties&&"mode"in e.properties)}function po(e){return!!function(e){return"number"==typeof e&&!isNaN(new Date(e).valueOf())}(e)}var fo;!function(e){e.Drawing="drawing",e.Select="select",e.Static="static",e.Render="render"}(fo||(fo={}));var vo={rightClick:!0,contextMenu:!1,leftClick:!0,onDragStart:!0,onDrag:!0,onDragEnd:!0},go=function(){return c(function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l(this,e),this._state="unregistered",this._styles={},this.pointerEvents=vo,this.behaviors=[],this.validate=void 0,this.pointerDistance=40,this.coordinatePrecision=void 0,this.onStyleChange=void 0,this.store=void 0,this.projection="web-mercator",this.setDoubleClickToZoom=void 0,this.unproject=void 0,this.project=void 0,this.setCursor=void 0,this.type=fo.Drawing,this.mode="base",n||this.updateOptions(t)},[{key:"state",get:function(){return this._state},set:function(e){throw new Error("Please use the modes lifecycle methods")}},{key:"styles",get:function(){return this._styles},set:function(e){if("object"!=b(e))throw new Error("Styling must be an object");this.onStyleChange&&this.onStyleChange([],"styling"),this._styles=e}},{key:"registerBehaviors",value:function(e){}},{key:"updateOptions",value:function(e){null!=e&&e.styles&&(this.styles=eo({},this._styles,e.styles)),null!=e&&e.pointerDistance&&(this.pointerDistance=e.pointerDistance),null!=e&&e.validation&&(this.validate=e&&e.validation),null!=e&&e.projection&&(this.projection=e.projection),void 0!==(null==e?void 0:e.pointerEvents)&&(this.pointerEvents=e.pointerEvents)}},{key:"allowPointerEvent",value:function(e,t){return"boolean"==typeof e?e:"function"!=typeof e||e(t)}},{key:"setDrawing",value:function(){if("started"!==this._state)throw new Error("Mode must be unregistered or stopped to start");this._state="drawing"}},{key:"setStarted",value:function(){if("stopped"!==this._state&&"registered"!==this._state&&"drawing"!==this._state&&"selecting"!==this._state)throw new Error("Mode must be unregistered or stopped to start");this._state="started",this.setDoubleClickToZoom(!1)}},{key:"setStopped",value:function(){if("started"!==this._state)throw new Error("Mode must be started to be stopped");this._state="stopped",this.setDoubleClickToZoom(!0)}},{key:"register",value:function(e){if("unregistered"!==this._state)throw new Error("Can not register unless mode is unregistered");this._state="registered",this.store=e.store,this.store.registerOnChange(e.onChange),this.setDoubleClickToZoom=e.setDoubleClickToZoom,this.project=e.project,this.unproject=e.unproject,this.onSelect=e.onSelect,this.onDeselect=e.onDeselect,this.setCursor=e.setCursor,this.onStyleChange=e.onChange,this.onFinish=e.onFinish,this.coordinatePrecision=e.coordinatePrecision,this.registerBehaviors({mode:e.mode,store:this.store,project:this.project,unproject:this.unproject,pointerDistance:this.pointerDistance,coordinatePrecision:e.coordinatePrecision,projection:this.projection})}},{key:"validateFeature",value:function(e){return this.performFeatureValidation(e)}},{key:"afterFeatureAdded",value:function(e){}},{key:"performFeatureValidation",value:function(e){if("unregistered"===this._state)throw new Error("Mode must be registered");var t=function(e,t){var n;if(co(e))if(null==e.id)n="Feature has no id";else if("string"!=typeof e.id&&"number"!=typeof e.id)n="Feature must be string or number as per GeoJSON spec";else if(t(e.id))if(co(e.geometry))if(co(e.properties))if("string"==typeof e.geometry.type&&["Polygon","LineString","Point"].includes(e.geometry.type))if(Array.isArray(e.geometry.coordinates)){if(!e.properties.mode||"string"!=typeof e.properties.mode)return{valid:!1,reason:"Feature does not have a valid mode property"}}else n="Feature coordinates is not an array";else n="Feature is not Point, LineString or Polygon";else n="Feature has no properties";else n="Feature has no geometry";else n="Feature must match the id strategy (default is UUID4)";else n="Feature is not object";return n?{valid:!1,reason:n}:{valid:!0}}(e,this.store.idStrategy.isValidId);if(this.validate){var n=this.validate(e,{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:$r.Provisional});return{valid:t.valid&&n.valid,reason:n.reason}}return{valid:t.valid,reason:t.reason}}},{key:"validateModeFeature",value:function(e,t){var n=this.performFeatureValidation(e);return n.valid?e.properties.mode!==this.mode?{valid:!1,reason:"Feature mode property does not match the mode being added to"}:t(e):{valid:!1,reason:n.reason}}},{key:"onFinish",value:function(e,t){}},{key:"onDeselect",value:function(e){}},{key:"onSelect",value:function(e){}},{key:"onKeyDown",value:function(e){}},{key:"onKeyUp",value:function(e){}},{key:"onMouseMove",value:function(e){}},{key:"onClick",value:function(e){}},{key:"onDragStart",value:function(e,t){}},{key:"onDrag",value:function(e,t){}},{key:"onDragEnd",value:function(e,t){}},{key:"getHexColorStylingValue",value:function(e,t,n){return this.getStylingValue(e,t,n)}},{key:"getNumericStylingValue",value:function(e,t,n){return this.getStylingValue(e,t,n)}},{key:"getStylingValue",value:function(e,t,n){return void 0===e?t:"function"==typeof e?e(n):e}}])}(),yo=function(e){function t(){var e;l(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=r(this,t,[].concat(o))).type=fo.Select,e}return a(t,e),c(t)}(go);function mo(e,t){var n=function(e){return e*Math.PI/180},r=n(e[1]),o=n(e[0]),i=n(t[1]),a=i-r,s=n(t[0])-o,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(r)*Math.cos(i)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3/1e3}var bo=6371008.8;function xo(e){return e%360*Math.PI/180}function wo(e){return e%(2*Math.PI)*180/Math.PI}function ko(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,n=Math.pow(10,t);return Math.round(e*n)/n}var Co=57.29577951308232,Po=.017453292519943295,So=6378137,Mo=function(e,t){return{x:0===e?0:e*Po*So,y:0===t?0:Math.log(Math.tan(Math.PI/4+t*Po/2))*So}},_o=function(e,t){return{lng:0===e?0:Co*(e/So),lat:0===t?0:(2*Math.atan(Math.exp(t/So))-Math.PI/2)*Co}};function Io(e,t){return e[0]===t[0]&&e[1]===t[1]}function Do(e,t){return Ro(e[0])<=t&&Ro(e[1])<=t}function Bo(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&1/0!==e[0]&&1/0!==e[1]&&(n=e[0])>=-180&&n<=180&&(t=e[1])>=-90&&t<=90;var t,n}function Ro(e){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}var Fo=function(e,t){var n=e.x,r=e.y,o=t.x-n,i=t.y-r;return Math.sqrt(i*i+o*o)},Eo=c(function e(t){var n=t.store,r=t.mode,o=t.project,i=t.unproject,a=t.pointerDistance,s=t.coordinatePrecision,u=t.projection;l(this,e),this.store=void 0,this.mode=void 0,this.project=void 0,this.unproject=void 0,this.pointerDistance=void 0,this.coordinatePrecision=void 0,this.projection=void 0,this.store=n,this.mode=r,this.project=o,this.unproject=i,this.pointerDistance=a,this.coordinatePrecision=s,this.projection=u});function Oo(e){var t=e.unproject,n=e.point,r=e.pointerDistance/2,o=n.x,i=n.y;return{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[t(o-r,i-r),t(o+r,i-r),t(o+r,i+r),t(o-r,i+r),t(o-r,i-r)].map(function(e){return[e.lng,e.lat]})]}}}var jo=function(e){function t(e){return l(this,t),r(this,t,[e])}return a(t,e),c(t,[{key:"create",value:function(e){var t=e.containerX,n=e.containerY;return Oo({unproject:this.unproject,point:{x:t,y:n},pointerDistance:this.pointerDistance})}}])}(Eo),zo=function(e){function t(e){return l(this,t),r(this,t,[e])}return a(t,e),c(t,[{key:"measure",value:function(e,t){var n=this.project(t[0],t[1]),r=n.x,o=n.y;return Fo({x:r,y:o},{x:e.containerX,y:e.containerY})}}])}(Eo),Lo=function(e){function t(e,n,o){var i;return l(this,t),(i=r(this,t,[e])).config=void 0,i.pixelDistance=void 0,i.clickBoundingBox=void 0,i.getSnappableCoordinateFirstClick=function(e){return i.getSnappable(e,function(e){return Boolean(e.properties&&e.properties.mode===i.mode)}).coordinate},i.getSnappableCoordinate=function(e,t){return i.getSnappable(e,function(e){return Boolean(e.properties&&e.properties.mode===i.mode&&e.id!==t)}).coordinate},i.config=e,i.pixelDistance=n,i.clickBoundingBox=o,i}return a(t,e),c(t,[{key:"getSnappable",value:function(e,t){var n=this,r=this.clickBoundingBox.create(e),o=this.store.search(r,t),i={featureId:void 0,featureCoordinateIndex:void 0,coordinate:void 0,minDist:1/0};return o.forEach(function(t){var r;if("Polygon"===t.geometry.type)r=t.geometry.coordinates[0];else{if("LineString"!==t.geometry.type)return;r=t.geometry.coordinates}r.forEach(function(r,o){var a=n.pixelDistance.measure(e,r);a<i.minDist&&a<n.pointerDistance&&(i.coordinate=r,i.minDist=a,i.featureId=t.id,i.featureCoordinateIndex=o)})}),i}}])}(Eo);function To(e,t,n){var r=xo(e[0]),o=xo(e[1]),i=xo(n),a=function(e){return e/6371.0088}(t),s=Math.asin(Math.sin(o)*Math.cos(a)+Math.cos(o)*Math.sin(a)*Math.cos(i));return[wo(r+Math.atan2(Math.sin(i)*Math.sin(a)*Math.cos(o),Math.cos(a)-Math.sin(o)*Math.sin(s))),wo(s)]}function Ao(e,t){var n=xo(e[0]),r=xo(t[0]),o=xo(e[1]),i=xo(t[1]),a=Math.sin(r-n)*Math.cos(i),s=Math.cos(o)*Math.sin(i)-Math.sin(o)*Math.cos(i)*Math.cos(r-n);return wo(Math.atan2(a,s))}function Wo(e,t,n){for(var r,o,i,a=[],s=e.length,l=0,u=0;u<e.length&&!(t>=l&&u===e.length-1);u++){if(l>t&&0===a.length){if(!(r=t-l))return a.push(e[u]),a;o=Ao(e[u],e[u-1])-180,i=To(e[u],r,o),a.push(i)}if(l>=n)return(r=n-l)?(o=Ao(e[u],e[u-1])-180,i=To(e[u],r,o),a.push(i),a):(a.push(e[u]),a);if(l>=t&&a.push(e[u]),u===e.length-1)return a;l+=mo(e[u],e[u+1])}if(l<t&&e.length===s)throw new Error("Start position is beyond line");var c=e[e.length-1];return[c,c]}function No(e){return e*(Math.PI/180)}function Uo(e){return e*(180/Math.PI)}var Vo=function(e){function t(e){var n;return l(this,t),(n=r(this,t,[e])).config=void 0,n.config=e,n}return a(t,e),c(t,[{key:"generateInsertionCoordinates",value:function(e,t,n){for(var r=[e,t],o=0,i=0;i<r.length-1;i++)o+=mo(r[0],r[1]);if(o<=n)return r;var a=o/n-1;Number.isInteger(a)||(a=Math.floor(a)+1);for(var s=[],l=0;l<a;l++){var u=Wo(r,n*l,n*(l+1));s.push(u)}for(var c=[],d=0;d<s.length;d++)c.push(s[d][1]);return this.limitCoordinates(c)}},{key:"generateInsertionGeodesicCoordinates",value:function(e,t,n){var r=mo(e,t),o=function(e,t,n){var r=[],o=No(e[1]),i=No(e[0]),a=No(t[1]),s=No(t[0]);n+=1;var l=2*Math.asin(Math.sqrt(Math.pow(Math.sin((a-o)/2),2)+Math.cos(o)*Math.cos(a)*Math.pow(Math.sin((s-i)/2),2)));if(0===l||isNaN(l))return r;for(var u=0;u<=n;u++){var c=u/n,d=Math.sin((1-c)*l)/Math.sin(l),h=Math.sin(c*l)/Math.sin(l),p=d*Math.cos(o)*Math.cos(i)+h*Math.cos(a)*Math.cos(s),f=d*Math.cos(o)*Math.sin(i)+h*Math.cos(a)*Math.sin(s),v=d*Math.sin(o)+h*Math.sin(a);if(!(isNaN(p)||isNaN(f)||isNaN(v))){var g=Math.atan2(v,Math.sqrt(Math.pow(p,2)+Math.pow(f,2))),y=Math.atan2(f,p);isNaN(g)||isNaN(y)||r.push([Uo(y),Uo(g)])}}return r.slice(1,-1)}(e,t,Math.floor(r/n));return this.limitCoordinates(o)}},{key:"limitCoordinates",value:function(e){var t=this;return e.map(function(e){return[ko(e[0],t.config.coordinatePrecision),ko(e[1],t.config.coordinatePrecision)]})}}])}(Eo);function Go(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2))}function Xo(e,t){var n=function(e,t){var n=v(e,3),r=n[0],o=n[1],i=n[2],a=v(t,3);return r*a[0]+o*a[1]+i*a[2]}(e,t)/(Go(e)*Go(t));return Math.acos(Math.min(Math.max(n,-1),1))}function Ho(e){var t=xo(e[1]),n=xo(e[0]);return[Math.cos(t)*Math.cos(n),Math.cos(t)*Math.sin(n),Math.sin(t)]}function Yo(e){var t=v(e,3),n=t[0],r=t[1],o=t[2],i=wo(Math.asin(o));return[wo(Math.atan2(r,n)),i]}function Ko(e,t,n){var r,o=Ho(e),i=Ho(t),a=v(Ho(n),3),s=a[0],l=a[1],u=a[2],c=function(e,t){var n=v(e,3),r=n[0],o=n[1],i=n[2],a=v(t,3),s=a[0],l=a[1],u=a[2];return[o*u-i*l,i*s-r*u,r*l-o*s]}(o,i),d=v(c,3),h=d[0],p=d[1],f=d[2],g=p*u-f*l,y=f*s-h*u,m=h*l-p*s,b=m*p-y*f,x=g*f-m*h,w=y*h-g*p,k=1/Math.sqrt(Math.pow(b,2)+Math.pow(x,2)+Math.pow(w,2)),C=[b*k,x*k,w*k],P=[-1*b*k,-1*x*k,-1*w*k],S=Xo(o,i),M=Xo(o,C),_=Xo(i,C),I=Xo(o,P),D=Xo(i,P);return Xo(o,r=M<I&&M<D||_<I&&_<D?C:P)>S||Xo(i,r)>S?mo(Yo(r),Yo(o))<=mo(Yo(r),Yo(i))?[Yo(o),!0,!1]:[Yo(i),!1,!0]:[Yo(r),!1,!1]}function qo(e,t,n){var r=t.x-e.x,o=t.y-e.y,i=Math.max(0,Math.min(1,((n.x-e.x)*r+(n.y-e.y)*o)/(r*r+o*o)));return{x:e.x+i*r,y:e.y+i*o}}var Zo=function(e){function t(e,n,o){var i;return l(this,t),(i=r(this,t,[e])).config=void 0,i.pixelDistance=void 0,i.clickBoundingBox=void 0,i.getSnappableCoordinateFirstClick=function(e){var t=i.getSnappable(e,function(e){return Boolean(e.properties&&e.properties.mode===i.mode)});return t.coordinate?[ko(t.coordinate[0],i.config.coordinatePrecision),ko(t.coordinate[1],i.config.coordinatePrecision)]:void 0},i.getSnappableCoordinate=function(e,t){var n=i.getSnappable(e,function(e){return Boolean(e.properties&&e.properties.mode===i.mode&&e.id!==t)});return n.coordinate?[ko(n.coordinate[0],i.config.coordinatePrecision),ko(n.coordinate[1],i.config.coordinatePrecision)]:void 0},i.config=e,i.pixelDistance=n,i.clickBoundingBox=o,i}return a(t,e),c(t,[{key:"getSnappable",value:function(e,t){var n=this,r=this.clickBoundingBox.create(e),o=this.store.search(r,t),i={featureId:void 0,featureCoordinateIndex:void 0,coordinate:void 0,minDistance:1/0};return o.forEach(function(t){var r;if("Polygon"===t.geometry.type)r=t.geometry.coordinates[0];else{if("LineString"!==t.geometry.type)return;r=t.geometry.coordinates}for(var o,a=[],s=0;s<r.length-1;s++)a.push([r[s],r[s+1]]);var l=[e.lng,e.lat];if("web-mercator"===n.config.projection?o=function(e,t){var n,r=[1/0,1/0],o=1/0,i=0,a=k(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,l=s[0],u=s[1],c=void 0,d=1/0,h=Mo(l[0],l[1]),p=Mo(u[0],u[1]),f=Mo(e[0],e[1]);if(l[0]===e[0]&&l[1]===e[1])c=l;else if(u[0]===e[0]&&u[1]===e[1])c=u;else{var v=qo(h,p,f),g=v.x,y=v.y,m=_o(g,y);c=[m.lng,m.lat]}c&&((d=Fo(f,Mo(c[0],c[1])))<o&&(r=c,o=d,i=t.indexOf(s)))}}catch(b){a.e(b)}finally{a.f()}return 1/0===o?void 0:{coordinate:r,lineIndex:i,distance:o}}(l,a):"globe"===n.config.projection&&(o=function(e,t){var n,r=[1/0,1/0],o=1/0,i=0,a=k(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,l=s[0],u=s[1],c=void 0,d=1/0;l[0]===e[0]&&l[1]===e[1]?c=l:u[0]===e[0]&&u[1]===e[1]?c=u:c=v(Ko(l,u,e),1)[0],c&&((d=mo(e,c))<o&&(r=c,o=d,i=t.indexOf(s)))}}catch(h){a.e(h)}finally{a.f()}return 1/0===o?void 0:{coordinate:r,distance:o,lineIndex:i}}(l,a)),o){var u=n.pixelDistance.measure(e,o.coordinate);u<i.minDistance&&u<n.pointerDistance&&(i.featureId=t.id,i.coordinate=[ko(o.coordinate[0],n.config.coordinatePrecision),ko(o.coordinate[1],n.config.coordinatePrecision)],i.featureCoordinateIndex=o.lineIndex,i.minDistance=u)}}),i}}])}(Eo),Jo={cancel:"Escape",finish:"Enter"},$o={start:"crosshair",close:"pointer",dragStart:"grabbing",dragEnd:"crosshair"},Qo=function(n){function o(e){var t;return l(this,o),(t=r(this,o,[e,!0])).mode="linestring",t.currentCoordinate=0,t.currentId=void 0,t.closingPointId=void 0,t.keyEvents=Jo,t.snapping=void 0,t.cursors=$o,t.mouseMove=!1,t.insertCoordinates=void 0,t.lastCommitedCoordinates=void 0,t.snappedPointId=void 0,t.editable=!1,t.editedFeatureId=void 0,t.editedFeatureCoordinateIndex=void 0,t.editedSnapType=void 0,t.editedInsertIndex=void 0,t.editedPointId=void 0,t.coordinateSnapping=void 0,t.insertPoint=void 0,t.lineSnapping=void 0,t.pixelDistance=void 0,t.clickBoundingBox=void 0,t.updateOptions(e),t}return a(o,n),c(o,[{key:"updateOptions",value:function(e){t(o,"updateOptions",this,3)([e]),null!=e&&e.cursors&&(this.cursors=eo({},this.cursors,e.cursors)),null!=e&&e.snapping&&(this.snapping=e.snapping),null===(null==e?void 0:e.keyEvents)?this.keyEvents={cancel:null,finish:null}:null!=e&&e.keyEvents&&(this.keyEvents=eo({},this.keyEvents,e.keyEvents)),null!=e&&e.insertCoordinates&&(this.insertCoordinates=e.insertCoordinates),e&&e.editable&&(this.editable=e.editable)}},{key:"close",value:function(){if(void 0!==this.currentId){var t=this.store.getGeometryCopy(this.currentId);t.coordinates.pop(),this.updateGeometries(e(t.coordinates),void 0,$r.Commit),this.store.updateProperty([{id:this.currentId,property:io,value:void 0}]);var n=this.currentId;this.closingPointId&&this.store.delete([this.closingPointId]),this.snappedPointId&&this.store.delete([this.snappedPointId]),this.currentCoordinate=0,this.currentId=void 0,this.closingPointId=void 0,this.snappedPointId=void 0,this.lastCommitedCoordinates=void 0,"drawing"===this.state&&this.setStarted(),this.onFinish(n,{mode:this.mode,action:"draw"})}}},{key:"updateGeometries",value:function(e,t,n){if(this.currentId){var r={type:"LineString",coordinates:e};if(!this.validate||this.validate({type:"Feature",geometry:r},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:n}).valid){var o=[{id:this.currentId,geometry:r}];this.closingPointId&&t&&o.push({id:this.closingPointId,geometry:{type:"Point",coordinates:t}}),"commit"===n&&(this.lastCommitedCoordinates=r.coordinates),this.store.updateGeometry(o)}}}},{key:"generateInsertCoordinates",value:function(e,t){if(!this.insertCoordinates||!this.lastCommitedCoordinates)throw new Error("Not able to insert coordinates");if("amount"!==this.insertCoordinates.strategy)throw new Error("Strategy does not exist");var n=mo(e,t)/(this.insertCoordinates.value+1),r=[];return"globe"===this.projection?r=this.insertPoint.generateInsertionGeodesicCoordinates(e,t,n):"web-mercator"===this.projection&&(r=this.insertPoint.generateInsertionCoordinates(e,t,n)),r}},{key:"createLine",value:function(e){var t=v(this.store.create([{geometry:{type:"LineString",coordinates:[e,e]},properties:x({mode:this.mode},io,!0)}]),1)[0];this.lastCommitedCoordinates=[e,e],this.currentId=t,this.currentCoordinate++,this.setDrawing()}},{key:"firstUpdateToLine",value:function(t){if(this.currentId){var n=this.store.getGeometryCopy(this.currentId).coordinates,r=v(this.store.create([{geometry:{type:"Point",coordinates:e(t)},properties:{mode:this.mode}}]),1)[0];this.closingPointId=r,this.setCursor(this.cursors.close);var o=[].concat(e(n),[t]);this.updateGeometries(o,void 0,$r.Commit),this.currentCoordinate++}}},{key:"updateToLine",value:function(t,n){if(this.currentId){var r=this.store.getGeometryCopy(this.currentId).coordinates,o=v(this.lastCommitedCoordinates?this.lastCommitedCoordinates[this.lastCommitedCoordinates.length-1]:r[r.length-2],2),i=o[0],a=o[1],s=this.project(i,a),l=s.x,u=s.y;if(Fo({x:l,y:u},{x:n.x,y:n.y})<this.pointerDistance)this.close();else{this.setCursor(this.cursors.close);var c=[].concat(e(r),[t]);this.updateGeometries(c,r[r.length-1],$r.Commit),this.currentCoordinate++}}}},{key:"registerBehaviors",value:function(e){this.coordinateSnapping=new Lo(e,new zo(e),new jo(e)),this.insertPoint=new Vo(e),this.clickBoundingBox=new jo(e),this.pixelDistance=new zo(e),this.lineSnapping=new Zo(e,this.pixelDistance,this.clickBoundingBox),this.coordinateSnapping=new Lo(e,this.pixelDistance,this.clickBoundingBox)}},{key:"start",value:function(){this.setStarted(),this.setCursor(this.cursors.start)}},{key:"stop",value:function(){this.cleanUp(),this.setStopped(),this.setCursor("unset")}},{key:"onMouseMove",value:function(t){this.mouseMove=!0,this.setCursor(this.cursors.start);var n=this.snapCoordinate(t);if(n){if(this.snappedPointId)this.store.updateGeometry([{id:this.snappedPointId,geometry:{type:"Point",coordinates:n}}]);else{var r=v(this.store.create([{geometry:{type:"Point",coordinates:n},properties:x({mode:this.mode},"snappingPoint",!0)}]),1)[0];this.snappedPointId=r}t.lng=n[0],t.lat=n[1]}else this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0);var o=n||[t.lng,t.lat];if(void 0!==this.currentId&&0!==this.currentCoordinate){var i=this.store.getGeometryCopy(this.currentId).coordinates;if(i.pop(),this.closingPointId){var a=v(i[i.length-1],2),s=a[0],l=a[1],u=this.project(s,l),c=u.x,d=u.y;Fo({x:c,y:d},{x:t.containerX,y:t.containerY})<this.pointerDistance&&this.setCursor(this.cursors.close)}var h=[].concat(e(i),[o]);if(this.insertCoordinates&&this.currentId&&this.lastCommitedCoordinates){var p=this.lastCommitedCoordinates[this.lastCommitedCoordinates.length-1],f=o;if(!function(e,t){return e[0]===t[0]&&e[1]===t[1]}(p,f)){var g=this.generateInsertCoordinates(p,f);h=[].concat(e(this.lastCommitedCoordinates.slice(0,-1)),e(g),[o])}}this.updateGeometries(h,void 0,$r.Provisional)}}},{key:"onRightClick",value:function(e){var t=this;if(this.editable&&"started"===this.state){var n=this.coordinateSnapping.getSnappable(e,function(e){return t.lineStringFilter(e)}),r=n.featureId,o=n.featureCoordinateIndex;if(r&&void 0!==o){var i,a=this.store.getGeometryCopy(r);if("LineString"===a.type&&!((i=a.coordinates).length<=2)){if(i.splice(o,1),this.validate&&!this.validate({id:r,type:"Feature",geometry:a,properties:{}},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:$r.Commit}).valid)return;this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0),this.store.updateGeometry([{id:r,geometry:a}]),this.onFinish(r,{mode:this.mode,action:"edit"})}}}}},{key:"onLeftClick",value:function(e){this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0);var t=this.snapCoordinate(e)||[e.lng,e.lat];0===this.currentCoordinate?this.createLine(t):1===this.currentCoordinate&&this.currentId?this.firstUpdateToLine(t):this.currentId&&this.updateToLine(t,{x:e.containerX,y:e.containerY})}},{key:"onClick",value:function(e){("right"===e.button&&this.allowPointerEvent(this.pointerEvents.rightClick,e)||"left"===e.button&&this.allowPointerEvent(this.pointerEvents.leftClick,e)||e.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,e))&&(this.currentCoordinate>0&&!this.mouseMove&&this.onMouseMove(e),this.mouseMove=!1,"right"===e.button?this.onRightClick(e):"left"===e.button&&this.onLeftClick(e))}},{key:"onKeyDown",value:function(){}},{key:"onKeyUp",value:function(e){e.key===this.keyEvents.cancel&&this.cleanUp(),e.key===this.keyEvents.finish&&this.close()}},{key:"onDragStart",value:function(e,t){var n=this;if(this.allowPointerEvent(this.pointerEvents.onDragStart,e)&&this.editable){var r;if("started"===this.state){var o=this.lineSnapping.getSnappable(e,function(e){return n.lineStringFilter(e)});o.coordinate&&(this.editedSnapType="line",this.editedFeatureCoordinateIndex=o.featureCoordinateIndex,this.editedFeatureId=o.featureId,r=o.coordinate);var i=this.coordinateSnapping.getSnappable(e,function(e){return n.lineStringFilter(e)});i.coordinate&&(this.editedSnapType="coordinate",this.editedFeatureCoordinateIndex=i.featureCoordinateIndex,this.editedFeatureId=i.featureId,r=i.coordinate)}if(this.editedFeatureId&&r){if(!this.editedPointId){var a=v(this.store.create([{geometry:{type:"Point",coordinates:r},properties:x({mode:this.mode},ao,!0)}]),1)[0];this.editedPointId=a}this.setCursor(this.cursors.dragStart),t(!1)}}}},{key:"onDrag",value:function(e,t){if(this.allowPointerEvent(this.pointerEvents.onDrag,e)&&void 0!==this.editedFeatureId&&void 0!==this.editedFeatureCoordinateIndex){var n=this.store.getGeometryCopy(this.editedFeatureId);"coordinate"===this.editedSnapType||"line"===this.editedSnapType&&void 0!==this.editedInsertIndex?n.coordinates[this.editedFeatureCoordinateIndex]=[e.lng,e.lat]:"line"===this.editedSnapType&&void 0===this.editedInsertIndex&&(this.editedInsertIndex=this.editedFeatureCoordinateIndex+1,n.coordinates.splice(this.editedInsertIndex,0,[e.lng,e.lat]),this.editedFeatureCoordinateIndex++);var r={type:"LineString",coordinates:n.coordinates};this.validate&&!this.validate({type:"Feature",geometry:r,properties:this.store.getPropertiesCopy(this.editedFeatureId)},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:$r.Provisional}).valid||(this.snapping&&this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0),this.store.updateGeometry([{id:this.editedFeatureId,geometry:r}]),this.editedPointId&&this.store.updateGeometry([{id:this.editedPointId,geometry:{type:"Point",coordinates:[e.lng,e.lat]}}]),this.store.updateProperty([{id:this.editedFeatureId,property:ao,value:!0}]))}}},{key:"onDragEnd",value:function(e,t){this.allowPointerEvent(this.pointerEvents.onDragEnd,e)&&void 0!==this.editedFeatureId&&(this.setCursor(this.cursors.dragEnd),this.editedPointId&&(this.store.delete([this.editedPointId]),this.editedPointId=void 0),this.store.updateProperty([{id:this.editedFeatureId,property:ao,value:!1}]),this.onFinish(this.editedFeatureId,{mode:this.mode,action:"edit"}),this.editedFeatureId=void 0,this.editedFeatureCoordinateIndex=void 0,this.editedInsertIndex=void 0,this.editedSnapType=void 0,t(!0))}},{key:"cleanUp",value:function(){var e=this.currentId,t=this.closingPointId,n=this.snappedPointId;this.closingPointId=void 0,this.snappedPointId=void 0,this.currentId=void 0,this.currentCoordinate=0,"drawing"===this.state&&this.setStarted();try{void 0!==e&&this.store.delete([e]),void 0!==n&&this.store.delete([n]),void 0!==t&&this.store.delete([t])}catch(e){}}},{key:"styleFeature",value:function(e){var t=eo({},{polygonFillColor:"#3f97e0",polygonOutlineColor:"#3f97e0",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:"#3f97e0",pointOutlineColor:"#ffffff",pointOutlineWidth:0,pointWidth:6,lineStringColor:"#3f97e0",lineStringWidth:4,zIndex:0});if("Feature"===e.type&&"LineString"===e.geometry.type&&e.properties.mode===this.mode)return t.lineStringColor=this.getHexColorStylingValue(this.styles.lineStringColor,t.lineStringColor,e),t.lineStringWidth=this.getNumericStylingValue(this.styles.lineStringWidth,t.lineStringWidth,e),t.zIndex=10,t;if("Feature"===e.type&&"Point"===e.geometry.type&&e.properties.mode===this.mode){var n=e.properties[so];return t.pointColor=this.getHexColorStylingValue(n?this.styles.closingPointColor:this.styles.snappingPointColor,t.pointColor,e),t.pointWidth=this.getNumericStylingValue(n?this.styles.closingPointWidth:this.styles.snappingPointWidth,t.pointWidth,e),t.pointOutlineColor=this.getHexColorStylingValue(n?this.styles.closingPointOutlineColor:this.styles.snappingPointOutlineColor,"#ffffff",e),t.pointOutlineWidth=this.getNumericStylingValue(n?this.styles.closingPointOutlineWidth:this.styles.snappingPointOutlineWidth,2,e),t.zIndex=50,t}return t}},{key:"validateFeature",value:function(e){var t=this;return this.validateModeFeature(e,function(e){return function(e,t){if("LineString"!==e.geometry.type)return{valid:!1,reason:"Feature is not a LineString"};if(e.geometry.coordinates.length<2)return{valid:!1,reason:"Feature has less than 2 coordinates"};for(var n=0;n<e.geometry.coordinates.length;n++){if(!Bo(e.geometry.coordinates[n]))return{valid:!1,reason:"Feature has invalid coordinates"};if(!Do(e.geometry.coordinates[n],t))return{valid:!1,reason:"Feature has coordinates with excessive precision"}}return{valid:!0}}(e,t.coordinatePrecision)})}},{key:"lineStringFilter",value:function(e){return Boolean("LineString"===e.geometry.type&&e.properties&&e.properties.mode===this.mode)}},{key:"snapCoordinate",value:function(e){var t,n,r,o,i,a=this;null!=(t=this.snapping)&&t.toLine&&((i=this.currentId?this.lineSnapping.getSnappableCoordinate(e,this.currentId):this.lineSnapping.getSnappableCoordinateFirstClick(e))&&(o=i));return null!=(n=this.snapping)&&n.toCoordinate&&(o=this.currentId?this.coordinateSnapping.getSnappableCoordinate(e,this.currentId):this.coordinateSnapping.getSnappableCoordinateFirstClick(e)),null!=(r=this.snapping)&&r.toCustom&&(o=this.snapping.toCustom(e,{currentCoordinate:this.currentCoordinate,currentId:this.currentId,getCurrentGeometrySnapshot:this.currentId?function(){return a.store.getGeometryCopy(a.currentId)}:function(){return null},project:this.project,unproject:this.unproject})),o}}])}(go);var ei={create:"crosshair",dragStart:"grabbing",dragEnd:"crosshair"},ti=function(e){function n(e){var t;return l(this,n),(t=r(this,n,[e,!0])).mode="point",t.cursors=ei,t.editable=!1,t.editedFeatureId=void 0,t.pixelDistance=void 0,t.clickBoundingBox=void 0,t.updateOptions(e),t}return a(n,e),c(n,[{key:"updateOptions",value:function(e){t(n,"updateOptions",this,3)([e]),null!=e&&e.cursors&&(this.cursors=eo({},this.cursors,e.cursors)),null!=e&&e.editable&&(this.editable=e.editable)}},{key:"start",value:function(){this.setStarted(),this.setCursor(this.cursors.create)}},{key:"stop",value:function(){this.cleanUp(),this.setStopped(),this.setCursor("unset")}},{key:"onClick",value:function(e){"right"===e.button&&this.allowPointerEvent(this.pointerEvents.rightClick,e)||e.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,e)?this.onRightClick(e):"left"===e.button&&this.allowPointerEvent(this.pointerEvents.leftClick,e)&&this.onLeftClick(e)}},{key:"onMouseMove",value:function(){}},{key:"onKeyDown",value:function(){}},{key:"onKeyUp",value:function(){}},{key:"cleanUp",value:function(){this.editedFeatureId=void 0}},{key:"onDragStart",value:function(e,t){if(this.allowPointerEvent(this.pointerEvents.onDragStart,e)){if(this.editable){var n=this.getNearestPointFeature(e);this.editedFeatureId=null==n?void 0:n.id}this.editedFeatureId&&(this.setCursor(this.cursors.dragStart),t(!1))}}},{key:"onDrag",value:function(e,t){this.allowPointerEvent(this.pointerEvents.onDrag,e)&&void 0!==this.editedFeatureId&&(this.validate&&!this.validate({type:"Feature",geometry:{type:"Point",coordinates:[e.lng,e.lat]},properties:this.store.getPropertiesCopy(this.editedFeatureId)},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:$r.Finish}).valid||(this.store.updateGeometry([{id:this.editedFeatureId,geometry:{type:"Point",coordinates:[e.lng,e.lat]}}]),this.store.updateProperty([{id:this.editedFeatureId,property:ao,value:!0}])))}},{key:"onDragEnd",value:function(e,t){this.allowPointerEvent(this.pointerEvents.onDragEnd,e)&&void 0!==this.editedFeatureId&&(this.onFinish(this.editedFeatureId,{mode:this.mode,action:"edit"}),this.setCursor(this.cursors.dragEnd),this.store.updateProperty([{id:this.editedFeatureId,property:ao,value:!1}]),this.editedFeatureId=void 0,t(!0))}},{key:"registerBehaviors",value:function(e){this.pixelDistance=new zo(e),this.clickBoundingBox=new jo(e)}},{key:"styleFeature",value:function(e){var t=eo({},{polygonFillColor:"#3f97e0",polygonOutlineColor:"#3f97e0",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:"#3f97e0",pointOutlineColor:"#ffffff",pointOutlineWidth:0,pointWidth:6,lineStringColor:"#3f97e0",lineStringWidth:4,zIndex:0});if("Feature"===e.type&&"Point"===e.geometry.type&&e.properties.mode===this.mode){var n=Boolean(e.id&&this.editedFeatureId===e.id);t.pointWidth=this.getNumericStylingValue(n?this.styles.editedPointWidth:this.styles.pointWidth,t.pointWidth,e),t.pointColor=this.getHexColorStylingValue(n?this.styles.editedPointColor:this.styles.pointColor,t.pointColor,e),t.pointOutlineColor=this.getHexColorStylingValue(n?this.styles.editedPointOutlineColor:this.styles.pointOutlineColor,t.pointOutlineColor,e),t.pointOutlineWidth=this.getNumericStylingValue(n?this.styles.editedPointOutlineWidth:this.styles.pointOutlineWidth,2,e),t.zIndex=30}return t}},{key:"validateFeature",value:function(e){var t=this;return this.validateModeFeature(e,function(e){return function(e,t){return"Point"!==e.geometry.type?{valid:!1,reason:"Feature is not a Point"}:Bo(e.geometry.coordinates)?Do(e.geometry.coordinates,t)?{valid:!0}:{valid:!1,reason:"Feature has coordinates with excessive precision"}:{valid:!1,reason:"Feature has invalid coordinates"}}(e,t.coordinatePrecision)})}},{key:"onLeftClick",value:function(e){var t={type:"Point",coordinates:[e.lng,e.lat]},n={mode:this.mode};if(!this.validate||this.validate({type:"Feature",geometry:t,properties:n},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:$r.Finish}).valid){var r=v(this.store.create([{geometry:t,properties:n}]),1)[0];this.onFinish(r,{mode:this.mode,action:"draw"})}}},{key:"onRightClick",value:function(e){if(this.editable){var t=this.getNearestPointFeature(e);t&&this.store.delete([t.id])}}},{key:"getNearestPointFeature",value:function(e){for(var t,n=this.clickBoundingBox.create(e),r=this.store.search(n),o=1/0,i=0;i<r.length;i++){var a=r[i];if("Point"===a.geometry.type&&a.properties.mode===this.mode){var s=this.pixelDistance.measure(e,a.geometry.coordinates);s>o||s>this.pointerDistance||(o=s,t=a)}}return t}}])}(go),ni=function(e){function t(e){return l(this,t),r(this,t,[e])}return a(t,e),c(t,[{key:"createOrUpdate",value:function(e){var t,n=this,r=this.store.getGeometryCopy(e),o=this.store.getPropertiesCopy(e);if("Polygon"===r.type)t=r.coordinates[0].slice(0,-1);else{if("LineString"!==r.type)return;t=r.coordinates}var i=this.store.getPropertiesCopy(e),a=i.coordinatePointIds;if(a)if(a&&a.every(function(e){return n.store.has(e)})){var s=i.coordinatePointIds,l=s.map(function(e){return n.store.getGeometryCopy(e).coordinates});if(s.length!==t.length){this.deleteCoordinatePoints(s);var u=this.createPoints(t,o.mode,e);this.setFeatureCoordinatePoints(e,u)}else t.forEach(function(e,t){e[0]===l[t][0]&&e[1]===l[t][1]||n.store.updateGeometry([{id:s[t],geometry:{type:"Point",coordinates:e}}])})}else{var c=a.filter(function(e){return n.store.has(e)});c.length&&this.deleteCoordinatePoints(c);var d=this.createPoints(t,o.mode,e);this.setFeatureCoordinatePoints(e,d)}else{var h=this.createPoints(t,o.mode,e);this.setFeatureCoordinatePoints(e,h)}}},{key:"deletePointsByFeatureIds",value:function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.deleteIfPresent(r)}}catch(o){n.e(o)}finally{n.f()}}},{key:"getUpdated",value:function(e,t){var n=this,r=this.store.getPropertiesCopy(e);if(r.coordinatePointIds)return r.coordinatePointIds.map(function(e,r){return{id:e,geometry:eo({},n.store.getGeometryCopy(e),{coordinates:t[r]})}})}},{key:"createPoints",value:function(e,t,n){return this.store.create(e.map(function(e,r){return{geometry:{type:"Point",coordinates:e},properties:x(x(x({mode:t},lo,!0),"coordinatePointFeatureId",n),"index",r)}}))}},{key:"setFeatureCoordinatePoints",value:function(e,t){this.store.updateProperty([{id:e,property:uo,value:t}])}},{key:"deleteCoordinatePoints",value:function(e){var t=this,n=e.filter(function(e){return t.store.has(e)});this.store.delete(n)}},{key:"deleteIfPresent",value:function(e){var t=this.store.getPropertiesCopy(e).coordinatePointIds;t&&(this.deleteCoordinatePoints(t),this.setFeatureCoordinatePoints(e,null))}}])}(Eo);function ri(e,t){var n=e,r=t,o=xo(n[1]),i=xo(r[1]),a=xo(r[0]-n[0]);a>Math.PI&&(a-=2*Math.PI),a<-Math.PI&&(a+=2*Math.PI);var s=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),l=(wo(Math.atan2(a,s))+360)%360;return l>180?-(360-l):l}function oi(e,t,n){var r=t;t<0&&(r=-Math.abs(r));var o=r/bo,i=e[0]*Math.PI/180,a=xo(e[1]),s=xo(n),l=o*Math.cos(s),u=a+l;Math.abs(u)>Math.PI/2&&(u=u>0?Math.PI-u:-Math.PI-u);var c=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),d=Math.abs(c)>1e-11?l/c:Math.cos(a),h=[(180*(i+o*Math.sin(s)/d)/Math.PI+540)%360-180,180*u/Math.PI];return h[0]+=h[0]-e[0]>180?-360:e[0]-h[0]>180?360:0,h}function ii(e,t,n,r,o){var i=r(e[0],e[1]),a=r(t[0],t[1]),s=o((i.x+a.x)/2,(i.y+a.y)/2),l=s.lng,u=s.lat;return[ko(l,n),ko(u,n)]}function ai(e,t,n){var r=oi(e,1e3*mo(e,t)/2,ri(e,t));return[ko(r[0],n),ko(r[1],n)]}function si(e){for(var t=e.featureCoords,n=e.precision,r=e.unproject,o=e.project,i=e.projection,a=[],s=0;s<t.length-1;s++){var l=void 0;if("web-mercator"===i)l=ii(t[s],t[s+1],n,o,r);else{if("globe"!==i)throw new Error("Invalid projection");l=ai(t[s],t[s+1],n)}a.push(l)}return a}var li=function(t){function n(e,t,o){var i;return l(this,n),(i=r(this,n,[e])).config=void 0,i.selectionPointBehavior=void 0,i.coordinatePointBehavior=void 0,i._midPoints=[],i.config=e,i.selectionPointBehavior=t,i.coordinatePointBehavior=o,i}return a(n,t),c(n,[{key:"ids",get:function(){return this._midPoints.concat()},set:function(e){}},{key:"insert",value:function(t,n,r){var o=this.store.getGeometryCopy(n),i=this.store.getPropertiesCopy(n),a=i.midPointFeatureId,s=i.midPointSegment,l=this.store.getGeometryCopy(a),u="Polygon"===l.type?l.coordinates[0]:l.coordinates;u.splice(s+1,0,o.coordinates),l.coordinates="Polygon"===l.type?[u]:u,this.store.updateGeometry([{id:a,geometry:l}]),this.store.getPropertiesCopy(t)[uo]&&this.coordinatePointBehavior.createOrUpdate(t),this.store.delete([].concat(e(this._midPoints),e(this.selectionPointBehavior.ids))),this.create(u,a,r),this.selectionPointBehavior.create(u,l.type,a)}},{key:"create",value:function(e,t,n){var r=this;if(!this.store.has(t))throw new Error("Store does not have feature with this id");this._midPoints=this.store.create(function(e,t,n,r,o,i){return si({featureCoords:e,precision:n,project:r,unproject:o,projection:i}).map(function(e,n){return{geometry:{type:"Point",coordinates:e},properties:t(n)}})}(e,function(e){return x(x(x({mode:r.mode},no,!0),"midPointSegment",e),"midPointFeatureId",t)},n,this.config.project,this.config.unproject,this.projection))}},{key:"delete",value:function(){this._midPoints.length&&(this.store.delete(this._midPoints),this._midPoints=[])}},{key:"getUpdated",value:function(e){var t=this;if(0!==this._midPoints.length)return si({featureCoords:e,precision:this.coordinatePrecision,project:this.config.project,unproject:this.config.unproject,projection:this.config.projection}).map(function(e,n){return{id:t._midPoints[n],geometry:{type:"Point",coordinates:e}}})}}])}(Eo),ui=function(e){function t(e){var n;return l(this,t),(n=r(this,t,[e]))._selectionPoints=[],n}return a(t,e),c(t,[{key:"ids",get:function(){return this._selectionPoints.concat()},set:function(e){}},{key:"create",value:function(e,t,n){var r=this;this._selectionPoints=this.store.create(function(e,t,n){for(var r=[],o="Polygon"===t?e.length-1:e.length,i=0;i<o;i++)r.push({geometry:{type:"Point",coordinates:e[i]},properties:n(i)});return r}(e,t,function(e){return x(x({mode:r.mode,index:e},oo,!0),ro,n)}))}},{key:"delete",value:function(){this.ids.length&&(this.store.delete(this.ids),this._selectionPoints=[])}},{key:"getUpdated",value:function(e){if(0!==this._selectionPoints.length)return this._selectionPoints.map(function(t,n){return{id:t,geometry:{type:"Point",coordinates:e[n]}}})}},{key:"getOneUpdated",value:function(e,t){if(void 0!==this._selectionPoints[e])return{id:this._selectionPoints[e],geometry:{type:"Point",coordinates:t}}}}])}(Eo);function ci(e,t){for(var n,r,o,i=!1,a=0,s=t.length;a<s;a++)for(var l=t[a],u=0,c=l.length,d=c-1;u<c;d=u++)(r=l[u])[1]>(n=e)[1]!=(o=l[d])[1]>n[1]&&n[0]<(o[0]-r[0])*(n[1]-r[1])/(o[1]-r[1])+r[0]&&(i=!i);return i}var di=function(e,t,n){var r=function(e){return e*e},o=function(e,t){return r(e.x-t.x)+r(e.y-t.y)};return Math.sqrt(function(e,t,n){var r=o(t,n);if(0===r)return o(e,t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return i=Math.max(0,Math.min(1,i)),o(e,{x:t.x+i*(n.x-t.x),y:t.y+i*(n.y-t.y)})}(e,t,n))},hi=function(e){function t(e,n,o){var i;return l(this,t),(i=r(this,t,[e])).config=void 0,i.createClickBoundingBox=void 0,i.pixelDistance=void 0,i.config=e,i.createClickBoundingBox=n,i.pixelDistance=o,i}return a(t,e),c(t,[{key:"find",value:function(e,t){for(var n,r,o,i,a=1/0,s=1/0,l=1/0,u=this.createClickBoundingBox.create(e),c=this.store.search(u),d=0;d<c.length;d++){var h=c[d],p=h.geometry;if("Point"===p.type){if(h.properties.selectionPoint||h.properties.coordinatePoint||!t&&h.properties[no])continue;var f=this.pixelDistance.measure(e,p.coordinates);h.properties[no]&&f<this.pointerDistance&&f<l?(l=f,o=h):!h.properties[no]&&f<this.pointerDistance&&f<a&&(a=f,n=h)}else if("LineString"===p.type){if(n)continue;for(var v=0;v<p.coordinates.length-1;v++){var g=p.coordinates[v],y=p.coordinates[v+1],m=di({x:e.containerX,y:e.containerY},this.project(g[0],g[1]),this.project(y[0],y[1]));m<this.pointerDistance&&m<s&&(s=m,r=h)}}else if("Polygon"===p.type){if(n||r)continue;ci([e.lng,e.lat],p.coordinates)&&(i=h)}}return{clickedFeature:n||r||i,clickedMidPoint:o}}}])}(Eo),pi=function(t){function n(e,t,o,i,a){var s;return l(this,n),(s=r(this,n,[e])).config=void 0,s.featuresAtCursorEvent=void 0,s.selectionPoints=void 0,s.midPoints=void 0,s.coordinatePoints=void 0,s.draggedFeatureId=null,s.dragPosition=void 0,s.config=e,s.featuresAtCursorEvent=t,s.selectionPoints=o,s.midPoints=i,s.coordinatePoints=a,s}return a(n,t),c(n,[{key:"startDragging",value:function(e,t){this.draggedFeatureId=t,this.dragPosition=[e.lng,e.lat]}},{key:"stopDragging",value:function(){this.draggedFeatureId=null,this.dragPosition=void 0}},{key:"isDragging",value:function(){return null!==this.draggedFeatureId}},{key:"canDrag",value:function(e,t){var n=this.featuresAtCursorEvent.find(e,!0).clickedFeature;return!(!n||n.id!==t)}},{key:"drag",value:function(t,n){if(this.draggedFeatureId){var r=this.store.getGeometryCopy(this.draggedFeatureId),o=[t.lng,t.lat];if("Polygon"===r.type||"LineString"===r.type){var i,a;if("Polygon"===r.type?a=(i=r.coordinates[0]).length-1:a=(i=r.coordinates).length,!this.dragPosition)return!1;for(var s=0;s<a;s++){var l=i[s],u=void 0,c=void 0;if("web-mercator"===this.config.projection){var d=Mo(this.dragPosition[0],this.dragPosition[1]),h=Mo(o[0],o[1]),p=Mo(l[0],l[1]),f={x:d.x-h.x,y:d.y-h.y},v=p.x-f.x,g=p.y-f.y,y=_o(v,g);u=y.lng,c=y.lat}else{var m=[this.dragPosition[0]-o[0],this.dragPosition[1]-o[1]];u=l[0]-m[0],c=l[1]-m[1]}if(u=ko(u,this.config.coordinatePrecision),c=ko(c,this.config.coordinatePrecision),u>180||u<-180||c>90||c<-90)return!1;i[s]=[u,c]}"Polygon"===r.type&&(i[i.length-1]=[i[0][0],i[0][1]]);var b=this.selectionPoints.getUpdated(i)||[],x=this.midPoints.getUpdated(i)||[],w=this.coordinatePoints.getUpdated(this.draggedFeatureId,i)||[];if(n&&!n({type:"Feature",id:this.draggedFeatureId,geometry:r,properties:{}},{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:$r.Provisional}).valid)return!1;this.store.updateGeometry([{id:this.draggedFeatureId,geometry:r}].concat(e(b),e(x),e(w))),this.dragPosition=[t.lng,t.lat]}else"Point"===r.type&&(this.store.updateGeometry([{id:this.draggedFeatureId,geometry:{type:"Point",coordinates:o}}]),this.dragPosition=[t.lng,t.lat])}}}])}(Eo),fi=function(t){function n(e,t,o,i,a,s,u){var c;return l(this,n),(c=r(this,n,[e])).config=void 0,c.pixelDistance=void 0,c.selectionPoints=void 0,c.midPoints=void 0,c.coordinatePoints=void 0,c.coordinateSnapping=void 0,c.lineSnapping=void 0,c.draggedCoordinate={id:null,index:-1},c.config=e,c.pixelDistance=t,c.selectionPoints=o,c.midPoints=i,c.coordinatePoints=a,c.coordinateSnapping=s,c.lineSnapping=u,c}return a(n,t),c(n,[{key:"getClosestCoordinate",value:function(e,t){var n,r={dist:1/0,index:-1,isFirstOrLastPolygonCoord:!1};if("LineString"===t.type)n=t.coordinates;else{if("Polygon"!==t.type)return r;n=t.coordinates[0]}for(var o=0;o<n.length;o++){var i=this.pixelDistance.measure(e,n[o]);if(i<this.pointerDistance&&i<r.dist){var a="Polygon"===t.type&&(o===n.length-1||0===o);r.dist=i,r.index=a?0:o,r.isFirstOrLastPolygonCoord=a}}return r}},{key:"getDraggableIndex",value:function(e,t){var n=this.store.getGeometryCopy(t),r=this.getClosestCoordinate(e,n);return-1===r.index?-1:r.index}},{key:"snapCoordinate",value:function(e,t,n){var r,o,i,a=this,s=[e.lng,e.lat],l=function(e){return Boolean(e.properties&&e.properties.mode===n.properties.mode&&e.id!==a.draggedCoordinate.id)};null!=t&&t.toLine&&((r=this.lineSnapping.getSnappable(e,l).coordinate)&&(s=r));t.toCoordinate&&((o=this.coordinateSnapping.getSnappable(e,l).coordinate)&&(s=o));null!=t&&t.toCustom&&((i=t.toCustom(e,{currentCoordinate:this.draggedCoordinate.index,currentId:n.id,getCurrentGeometrySnapshot:n.id?function(){return a.store.getGeometryCopy(n.id)}:function(){return null},project:this.project,unproject:this.unproject}))&&(s=i));return s}},{key:"drag",value:function(t,n,r,o){var i=this.draggedCoordinate.id;if(null===i)return!1;var a=this.draggedCoordinate.index,s=this.store.getGeometryCopy(i),l=this.store.getPropertiesCopy(i),u="LineString"===s.type?s.coordinates:s.coordinates[0],c="Polygon"===s.type&&(a===u.length-1||0===a),d={type:"Feature",id:i,geometry:s,properties:l},h=this.snapCoordinate(t,o,d);if(t.lng>180||t.lng<-180||t.lat>90||t.lat<-90)return!1;if(c){var p=u.length-1;u[0]=h,u[p]=h}else u[a]=h;var f=this.selectionPoints.getOneUpdated(a,h),v=f?[f]:[],g=this.midPoints.getUpdated(u)||[],y=this.coordinatePoints.getUpdated(i,u)||[];return!("Point"!==s.type&&!n&&function(e){var t;if("Polygon"===e.geometry.type)t=e.geometry.coordinates;else{if("LineString"!==e.geometry.type)throw new Error("Self intersects only accepts Polygons and LineStrings");t=[e.geometry.coordinates]}for(var n=[],r=0;r<t.length;r++)for(var o=0;o<t[r].length-1;o++)for(var i=0;i<t.length;i++)for(var a=0;a<t[i].length-1;a++)l(r,o,i,a);return n.length>0;function s(e){return e<0||e>1}function l(e,r,o,i){var a,l,u=t[e][r],c=t[e][r+1],d=t[o][i],h=t[o][i+1],p=function(e,t,n,r){if(Io(e,n)||Io(e,r)||Io(t,n)||Io(r,n))return null;var o=e[0],i=e[1],a=t[0],s=t[1],l=n[0],u=n[1],c=r[0],d=r[1],h=(o-a)*(u-d)-(i-s)*(l-c);return 0===h?null:[((o*s-i*a)*(l-c)-(o-a)*(l*d-u*c))/h,((o*s-i*a)*(u-d)-(i-s)*(l*d-u*c))/h]}(u,c,d,h);null!==p&&(a=c[0]!==u[0]?(p[0]-u[0])/(c[0]-u[0]):(p[1]-u[1])/(c[1]-u[1]),l=h[0]!==d[0]?(p[0]-d[0])/(h[0]-d[0]):(p[1]-d[1])/(h[1]-d[1]),s(a)||s(l)||(p.toString(),n.push(p)))}}({geometry:s})||r&&!r(d,{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:$r.Provisional}).valid||(this.store.updateGeometry([{id:i,geometry:s}].concat(v,e(g),e(y))),0))}},{key:"isDragging",value:function(){return null!==this.draggedCoordinate.id}},{key:"startDragging",value:function(e,t){this.draggedCoordinate={id:e,index:t}}},{key:"stopDragging",value:function(){this.draggedCoordinate={id:null,index:-1}}}])}(Eo);function vi(e){var t=0,n=0,r=0;return("Polygon"===e.geometry.type?e.geometry.coordinates[0].slice(0,-1):e.geometry.coordinates).forEach(function(e){t+=e[0],n+=e[1],r++},!0),[t/r,n/r]}function gi(e){var t=("Polygon"===e.geometry.type?e.geometry.coordinates[0]:e.geometry.coordinates).map(function(e){var t=Mo(e[0],e[1]);return[t.x,t.y]});return"Polygon"===e.geometry.type?function(e){for(var t=0,n=0,r=0,o=e.length,i=0;i<o-1;i++){var a=v(e[i],2),s=a[0],l=a[1],u=v(e[i+1],2),c=u[0],d=u[1],h=s*d-c*l;t+=h,n+=(s+c)*h,r+=(l+d)*h}return{x:n/=6*(t/=2),y:r/=6*t}}(t):function(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++){var i=v(e[o],2);n+=i[0],r+=i[1]}return{x:n/t,y:r/t}}(t)}var yi=function(t){function n(e,t,o,i){var a;return l(this,n),(a=r(this,n,[e])).config=void 0,a.selectionPoints=void 0,a.midPoints=void 0,a.coordinatePoints=void 0,a.lastBearing=void 0,a.selectedGeometry=void 0,a.selectedGeometryCentroid=void 0,a.selectedGeometryWebMercatorCentroid=void 0,a.config=e,a.selectionPoints=t,a.midPoints=o,a.coordinatePoints=i,a}return a(n,t),c(n,[{key:"reset",value:function(){this.lastBearing=void 0,this.selectedGeometry=void 0,this.selectedGeometryWebMercatorCentroid=void 0,this.selectedGeometryCentroid=void 0}},{key:"rotate",value:function(t,n,r){var o=this;this.selectedGeometry||(this.selectedGeometry=this.store.getGeometryCopy(n));var i=this.selectedGeometry;if("Polygon"===i.type||"LineString"===i.type){var a,s=[t.lng,t.lat],l={type:"Feature",geometry:i,properties:{}};if("web-mercator"===this.config.projection){this.selectedGeometryWebMercatorCentroid||(this.selectedGeometryWebMercatorCentroid=gi(l));var u=Mo(t.lng,t.lat);if(a=function(e,t){var n=e.x,r=e.y,o=t.x-n,i=t.y-r;if(0===o&&0===i)return 0;var a=Math.atan2(i,o);return(a*=180/Math.PI)>180?a-=360:a<-180&&(a+=360),a}(this.selectedGeometryWebMercatorCentroid,u),0===a)return;if(!this.lastBearing)return void(this.lastBearing=a);!function(e,t){if(0===t||360===t||-360===t)return e;var n=.017453292519943295*t,r=("Polygon"===e.geometry.type?e.geometry.coordinates[0]:e.geometry.coordinates).map(function(e){var t=v(e,2),n=t[0],r=t[1];return Mo(n,r)}),o=r.reduce(function(e,t){return{x:e.x+t.x,y:e.y+t.y}},{x:0,y:0});o.x/=r.length,o.y/=r.length;var i=r.map(function(e){return{x:o.x+(e.x-o.x)*Math.cos(n)-(e.y-o.y)*Math.sin(n),y:o.y+(e.x-o.x)*Math.sin(n)+(e.y-o.y)*Math.cos(n)}}).map(function(e){var t=e.x,n=e.y;return[_o(t,n).lng,_o(t,n).lat]});"Polygon"===e.geometry.type?e.geometry.coordinates[0]=i:e.geometry.coordinates=i}(l,-(this.lastBearing-a))}else{if("globe"!==this.config.projection)throw new Error("Unsupported projection");if(this.selectedGeometryCentroid||(this.selectedGeometryCentroid=vi({geometry:i})),a=ri(this.selectedGeometryCentroid,s),!this.lastBearing)return void(this.lastBearing=a+180);!function(e,t){if(0===t||360===t||-360===t)return e;var n=vi(e);("Polygon"===e.geometry.type?e.geometry.coordinates[0]:e.geometry.coordinates).forEach(function(e){var r=ri(n,e)+t,o=function(e,t){e[0]+=e[0]-t[0]>180?-360:t[0]-e[0]>180?360:0;var n=bo,r=t[1]*Math.PI/180,o=e[1]*Math.PI/180,i=o-r,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var s=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),l=Math.abs(s)>1e-11?i/s:Math.cos(r);return Math.sqrt(i*i+l*l*a*a)*n}(n,e),i=oi(n,o,r);e[0]=i[0],e[1]=i[1]})}(l,-(this.lastBearing-(a+180)))}var c="Polygon"===i.type?i.coordinates[0]:i.coordinates;c.forEach(function(e){e[0]=ko(e[0],o.coordinatePrecision),e[1]=ko(e[1],o.coordinatePrecision)});var d=this.midPoints.getUpdated(c)||[],h=this.selectionPoints.getUpdated(c)||[],p=this.coordinatePoints.getUpdated(n,c)||[];if(r&&!r({id:n,type:"Feature",geometry:i,properties:{}},{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:$r.Provisional}))return!1;this.store.updateGeometry([{id:n,geometry:i}].concat(e(h),e(d),e(p))),"web-mercator"===this.projection?this.lastBearing=a:"globe"===this.projection&&(this.lastBearing=a+180)}}}])}(Eo),mi=function(e){function t(e,n){var o;return l(this,t),(o=r(this,t,[e])).config=void 0,o.dragCoordinateResizeBehavior=void 0,o.config=e,o.dragCoordinateResizeBehavior=n,o}return a(t,e),c(t,[{key:"scale",value:function(e,t,n){if(!this.dragCoordinateResizeBehavior.isDragging()){var r=this.dragCoordinateResizeBehavior.getDraggableIndex(e,t);this.dragCoordinateResizeBehavior.startDragging(t,r)}this.dragCoordinateResizeBehavior.drag(e,"center-fixed",n)}},{key:"reset",value:function(){this.dragCoordinateResizeBehavior.stopDragging()}}])}(Eo),bi=function(t){function n(e,t,o,i,a){var s;return l(this,n),(s=r(this,n,[e])).config=void 0,s.pixelDistance=void 0,s.selectionPoints=void 0,s.midPoints=void 0,s.coordinatePoints=void 0,s.minimumScale=1e-4,s.draggedCoordinate={id:null,index:-1},s.boundingBoxMaps={opposite:{0:4,1:5,2:6,3:7,4:0,5:1,6:2,7:3}},s.config=e,s.pixelDistance=t,s.selectionPoints=o,s.midPoints=i,s.coordinatePoints=a,s}return a(n,t),c(n,[{key:"getClosestCoordinate",value:function(e,t){var n,r={dist:1/0,index:-1,isFirstOrLastPolygonCoord:!1};if("LineString"===t.type)n=t.coordinates;else{if("Polygon"!==t.type)return r;n=t.coordinates[0]}for(var o=0;o<n.length;o++){var i=this.pixelDistance.measure(e,n[o]);if(i<this.pointerDistance&&i<r.dist){var a="Polygon"===t.type&&(o===n.length-1||0===o);r.dist=i,r.index=a?0:o,r.isFirstOrLastPolygonCoord=a}}return r}},{key:"isValidDragWebMercator",value:function(e,t,n){switch(e){case 0:if(t<=0||n>=0)return!1;break;case 1:if(n>=0)return!1;break;case 2:if(t>=0||n>=0)return!1;break;case 3:if(t>=0)return!1;break;case 4:if(t>=0||n<=0)return!1;break;case 5:if(n<=0)return!1;break;case 6:if(t<=0||n<=0)return!1;break;case 7:if(t<=0)return!1}return!0}},{key:"getSelectedFeatureDataWebMercator",value:function(){if(!this.draggedCoordinate.id||-1===this.draggedCoordinate.index)return null;var e=this.getFeature(this.draggedCoordinate.id);if(!e)return null;var t=this.getNormalisedCoordinates(e.geometry);return{boundingBox:this.getBBoxWebMercator(t),feature:e,updatedCoords:t,selectedCoordinate:t[this.draggedCoordinate.index]}}},{key:"centerWebMercatorDrag",value:function(e){var t=this.getSelectedFeatureDataWebMercator();if(!t)return null;var n=t.feature,r=t.boundingBox,o=t.updatedCoords,i=t.selectedCoordinate,a=gi(n);if(!a)return null;var s=Mo(i[0],i[1]),l=this.getIndexesWebMercator(r,s).closestBBoxIndex,u=Mo(e.lng,e.lat);return this.scaleWebMercator({closestBBoxIndex:l,updatedCoords:o,webMercatorCursor:u,webMercatorSelected:s,webMercatorOrigin:a}),o}},{key:"centerFixedWebMercatorDrag",value:function(e){var t=this.getSelectedFeatureDataWebMercator();if(!t)return null;var n=t.feature,r=t.boundingBox,o=t.updatedCoords,i=t.selectedCoordinate,a=gi(n);if(!a)return null;var s=Mo(i[0],i[1]),l=this.getIndexesWebMercator(r,s).closestBBoxIndex,u=Mo(e.lng,e.lat);return this.scaleFixedWebMercator({closestBBoxIndex:l,updatedCoords:o,webMercatorCursor:u,webMercatorSelected:s,webMercatorOrigin:a}),o}},{key:"scaleFixedWebMercator",value:function(e){var t=e.closestBBoxIndex,n=e.webMercatorOrigin,r=e.webMercatorSelected,o=e.webMercatorCursor,i=e.updatedCoords;if(!this.isValidDragWebMercator(t,n.x-o.x,n.y-o.y))return null;var a=Fo(n,o)/Fo(n,r);return a<0&&(a=this.minimumScale),this.performWebMercatorScale(i,n.x,n.y,a,a),i}},{key:"oppositeFixedWebMercatorDrag",value:function(e){var t=this.getSelectedFeatureDataWebMercator();if(!t)return null;var n=t.boundingBox,r=t.updatedCoords,o=t.selectedCoordinate,i=Mo(o[0],o[1]),a=this.getIndexesWebMercator(n,i),s=a.oppositeBboxIndex,l=a.closestBBoxIndex,u={x:n[s][0],y:n[s][1]},c=Mo(e.lng,e.lat);return this.scaleFixedWebMercator({closestBBoxIndex:l,updatedCoords:r,webMercatorCursor:c,webMercatorSelected:i,webMercatorOrigin:u}),r}},{key:"oppositeWebMercatorDrag",value:function(e){var t=this.getSelectedFeatureDataWebMercator();if(!t)return null;var n=t.boundingBox,r=t.updatedCoords,o=t.selectedCoordinate,i=Mo(o[0],o[1]),a=this.getIndexesWebMercator(n,i),s=a.oppositeBboxIndex,l=a.closestBBoxIndex,u={x:n[s][0],y:n[s][1]},c=Mo(e.lng,e.lat);return this.scaleWebMercator({closestBBoxIndex:l,updatedCoords:r,webMercatorCursor:c,webMercatorSelected:i,webMercatorOrigin:u}),r}},{key:"scaleWebMercator",value:function(e){var t=e.closestBBoxIndex,n=e.webMercatorOrigin,r=e.webMercatorSelected,o=e.webMercatorCursor,i=e.updatedCoords,a=n.x-o.x,s=n.y-o.y;if(!this.isValidDragWebMercator(t,a,s))return null;var l=1;0!==a&&1!==t&&5!==t&&(l=1-(n.x-r.x-a)/a);var u=1;return 0!==s&&3!==t&&7!==t&&(u=1-(n.y-r.y-s)/s),this.validateScale(l,u)?(l<0&&(l=this.minimumScale),u<0&&(u=this.minimumScale),this.performWebMercatorScale(i,n.x,n.y,l,u),i):null}},{key:"getFeature",value:function(e){if(null===this.draggedCoordinate.id)return null;var t=this.store.getGeometryCopy(e);return"Polygon"!==t.type&&"LineString"!==t.type?null:{id:e,type:"Feature",geometry:t,properties:{}}}},{key:"getNormalisedCoordinates",value:function(e){return"Polygon"===e.type?e.coordinates[0]:e.coordinates}},{key:"validateScale",value:function(e,t){var n=!isNaN(e)&&t<Number.MAX_SAFE_INTEGER,r=!isNaN(t)&&t<Number.MAX_SAFE_INTEGER;return n&&r}},{key:"performWebMercatorScale",value:function(e,t,n,r,o){e.forEach(function(e){var i=Mo(e[0],e[1]),a=i.x,s=i.y,l=_o(t+(a-t)*r,n+(s-n)*o),u=l.lng,c=l.lat;e[0]=u,e[1]=c})}},{key:"getBBoxWebMercator",value:function(e){var t=[1/0,1/0,-1/0,-1/0];(e=e.map(function(e){var t=Mo(e[0],e[1]);return[t.x,t.y]})).forEach(function(e){var n=v(e,2),r=n[0],o=n[1];r<t[0]&&(t[0]=r),o<t[1]&&(t[1]=o),r>t[2]&&(t[2]=r),o>t[3]&&(t[3]=o)});var n=t[0],r=t[1],o=t[2],i=t[3];return[[n,i],[(n+o)/2,i],[o,i],[o,i+(r-i)/2],[o,r],[(n+o)/2,r],[n,r],[n,i+(r-i)/2]]}},{key:"getIndexesWebMercator",value:function(e,t){for(var n,r=1/0,o=0;o<e.length;o++){var i=Fo({x:t.x,y:t.y},{x:e[o][0],y:e[o][1]});i<r&&(n=o,r=i)}if(void 0===n)throw new Error("No closest coordinate found");return{oppositeBboxIndex:this.boundingBoxMaps.opposite[n],closestBBoxIndex:n}}},{key:"isDragging",value:function(){return null!==this.draggedCoordinate.id}},{key:"startDragging",value:function(e,t){this.draggedCoordinate={id:e,index:t}}},{key:"stopDragging",value:function(){this.draggedCoordinate={id:null,index:-1}}},{key:"getDraggableIndex",value:function(e,t){var n=this.store.getGeometryCopy(t),r=this.getClosestCoordinate(e,n);return-1===r.index?-1:r.index}},{key:"drag",value:function(t,n,r){if(!this.draggedCoordinate.id)return!1;var o=this.getFeature(this.draggedCoordinate.id);if(!o)return!1;var i=null;if("center"===n?i=this.centerWebMercatorDrag(t):"opposite"===n?i=this.oppositeWebMercatorDrag(t):"center-fixed"===n?i=this.centerFixedWebMercatorDrag(t):"opposite-fixed"===n&&(i=this.oppositeFixedWebMercatorDrag(t)),!i)return!1;for(var a=0;a<i.length;a++){var s=i[a];if(s[0]=ko(s[0],this.coordinatePrecision),s[1]=ko(s[1],this.coordinatePrecision),!Do(s,this.coordinatePrecision))return!1}var l=this.midPoints.getUpdated(i)||[],u=this.selectionPoints.getUpdated(i)||[],c=this.coordinatePoints.getUpdated(o.id,i)||[],d={type:o.geometry.type,coordinates:"Polygon"===o.geometry.type?[i]:i};return!(r&&!r({id:this.draggedCoordinate.id,type:"Feature",geometry:d,properties:{}},{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:$r.Provisional}).valid||(this.store.updateGeometry([{id:this.draggedCoordinate.id,geometry:d}].concat(e(u),e(l),e(c))),0))}}])}(Eo),xi={deselect:"Escape",delete:"Delete",rotate:["Control","r"],scale:["Control","s"]},wi={pointerOver:"move",dragStart:"move",dragEnd:"move",insertMidpoint:"crosshair"},ki=function(n){function o(e){var t;return l(this,o),(t=r(this,o,[e,!0])).mode="select",t.allowManualDeselection=!0,t.dragEventThrottle=5,t.dragEventCount=0,t.selected=[],t.flags={},t.keyEvents=xi,t.cursors=wi,t.validations={},t.selectionPoints=void 0,t.midPoints=void 0,t.coordinateSnap=void 0,t.featuresAtMouseEvent=void 0,t.pixelDistance=void 0,t.clickBoundingBox=void 0,t.dragFeature=void 0,t.dragCoordinate=void 0,t.rotateFeature=void 0,t.scaleFeature=void 0,t.dragCoordinateResizeFeature=void 0,t.coordinatePoints=void 0,t.lineSnap=void 0,t.updateOptions(e),t}return a(o,n),c(o,[{key:"updateOptions",value:function(e){if(t(o,"updateOptions",this,3)([e]),this.cursors=e&&e.cursors?eo({},this.cursors,e.cursors):wi,null===(null==e?void 0:e.keyEvents)?this.keyEvents={deselect:null,delete:null,rotate:null,scale:null}:null!=e&&e.keyEvents&&(this.keyEvents=eo({},this.keyEvents,e.keyEvents)),void 0!==(null==e?void 0:e.dragEventThrottle)&&(this.dragEventThrottle=e.dragEventThrottle),void 0!==(null==e?void 0:e.allowManualDeselection)&&(this.allowManualDeselection=e.allowManualDeselection),null!=e&&e.flags)for(var n in this.flags=eo({},this.flags,e.flags),this.validations={},this.flags){var r=this.flags[n].feature;r&&r.validation&&(this.validations[n]=r.validation)}}},{key:"selectFeature",value:function(e){this.select(e,!1)}},{key:"setSelecting",value:function(){if("started"!==this._state)throw new Error("Mode must be started to move to selecting state");this._state="selecting"}},{key:"registerBehaviors",value:function(e){this.pixelDistance=new zo(e),this.clickBoundingBox=new jo(e),this.featuresAtMouseEvent=new hi(e,this.clickBoundingBox,this.pixelDistance),this.selectionPoints=new ui(e),this.coordinatePoints=new ni(e),this.midPoints=new li(e,this.selectionPoints,this.coordinatePoints),this.coordinateSnap=new Lo(e,this.pixelDistance,this.clickBoundingBox),this.lineSnap=new Zo(e,this.pixelDistance,this.clickBoundingBox),this.rotateFeature=new yi(e,this.selectionPoints,this.midPoints,this.coordinatePoints),this.dragFeature=new pi(e,this.featuresAtMouseEvent,this.selectionPoints,this.midPoints,this.coordinatePoints),this.dragCoordinate=new fi(e,this.pixelDistance,this.selectionPoints,this.midPoints,this.coordinatePoints,this.coordinateSnap,this.lineSnap),this.dragCoordinateResizeFeature=new bi(e,this.pixelDistance,this.selectionPoints,this.midPoints,this.coordinatePoints),this.scaleFeature=new mi(e,this.dragCoordinateResizeFeature)}},{key:"deselectFeature",value:function(){this.deselect()}},{key:"deselect",value:function(){var e=this,t=this.selected.filter(function(t){return e.store.has(t)}).map(function(e){return{id:e,property:to,value:!1}});this.store.updateProperty(t),this.onDeselect(this.selected[0]),this.selected=[],this.selectionPoints.delete(),this.midPoints.delete()}},{key:"deleteSelected",value:function(){this.store.delete(this.selected),this.selected=[]}},{key:"onRightClick",value:function(t){var n=this;if(this.selectionPoints.ids.length){var r,o=1/0;if(this.selectionPoints.ids.forEach(function(e){var i=n.store.getGeometryCopy(e),a=n.pixelDistance.measure(t,i.coordinates);a<n.pointerDistance&&a<o&&(o=a,r=n.store.getPropertiesCopy(e))}),r){var i=r.selectionPointFeatureId,a=r.index,s=this.store.getPropertiesCopy(i),l=this.flags[s.mode],u=this.validations[s.mode];if(l&&l.feature&&l.feature.coordinates&&l.feature.coordinates.deletable){var c,d=this.store.getGeometryCopy(i);if("Polygon"===d.type){if((c=d.coordinates[0]).length<=4)return}else if("LineString"===d.type&&(c=d.coordinates).length<=2)return;if(c&&("Polygon"!==d.type||0!==a&&a!==c.length-1?c.splice(a,1):(c.shift(),c.pop(),c.push([c[0][0],c[0][1]])),!u||u({id:i,type:"Feature",geometry:d,properties:s},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:$r.Commit}).valid)){var h=[].concat(e(this.midPoints.ids),e(this.selectionPoints.ids));this.store.delete(h),this.store.updateGeometry([{id:i,geometry:d}]),s.coordinatePointIds&&this.coordinatePoints.createOrUpdate(i),this.selectionPoints.create(c,d.type,i),l&&l.feature&&l.feature.coordinates&&l.feature.coordinates.midpoints&&this.midPoints.create(c,i,this.coordinatePrecision)}}}}}},{key:"select",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.selected[0]!==e){var n=this.store.getPropertiesCopy(e).mode,r=this.flags[n];if(r&&r.feature){var o=this.selected[0];if(o){if(o===e)return;this.deselect()}t&&this.setCursor(this.cursors.pointerOver),this.selected=[e],this.store.updateProperty([{id:e,property:to,value:!0}]),this.onSelect(e);var i=this.store.getGeometryCopy(e),a=i.type,s=i.coordinates;if("LineString"===a||"Polygon"===a){var l="LineString"===a?s:s[0];l&&r&&r.feature.coordinates&&(this.selectionPoints.create(l,a,e),r.feature.coordinates.midpoints&&this.midPoints.create(l,e,this.coordinatePrecision))}}}}},{key:"onLeftClick",value:function(e){var t=this.featuresAtMouseEvent.find(e,this.selected.length>0),n=t.clickedFeature,r=t.clickedMidPoint;if(this.selected.length&&r)this.midPoints.insert(this.selected[0],r.id,this.coordinatePrecision);else if(n&&n.id)this.select(n.id,!0);else if(this.selected.length&&this.allowManualDeselection)return void this.deselect()}},{key:"start",value:function(){this.setStarted(),this.setSelecting()}},{key:"stop",value:function(){this.cleanUp(),this.setStarted(),this.setStopped()}},{key:"onClick",value:function(e){"right"===e.button&&this.allowPointerEvent(this.pointerEvents.rightClick,e)||e.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,e)?this.onRightClick(e):"left"===e.button&&this.allowPointerEvent(this.pointerEvents.leftClick,e)&&this.onLeftClick(e)}},{key:"canScale",value:function(e){return this.keyEvents.scale&&this.keyEvents.scale.every(function(t){return e.heldKeys.includes(t)})}},{key:"canRotate",value:function(e){return this.keyEvents.rotate&&this.keyEvents.rotate.every(function(t){return e.heldKeys.includes(t)})}},{key:"preventDefaultKeyEvent",value:function(e){var t=this.canRotate(e),n=this.canScale(e);(t||n)&&e.preventDefault()}},{key:"onKeyDown",value:function(e){this.preventDefaultKeyEvent(e)}},{key:"onKeyUp",value:function(e){if(this.preventDefaultKeyEvent(e),this.keyEvents.delete&&e.key===this.keyEvents.delete){if(!this.selected.length)return;var t=this.selected[0];this.onDeselect(this.selected[0]),this.coordinatePoints.deletePointsByFeatureIds([t]),this.deleteSelected(),this.selectionPoints.delete(),this.midPoints.delete()}else this.keyEvents.deselect&&e.key===this.keyEvents.deselect&&this.cleanUp()}},{key:"cleanUp",value:function(){this.selected.length&&this.deselect()}},{key:"onDragStart",value:function(e,t){if(this.allowPointerEvent(this.pointerEvents.onDragStart,e)&&this.selected.length){var n=this.store.getPropertiesCopy(this.selected[0]),r=this.flags[n.mode];if(r&&r.feature&&(r.feature.draggable||r.feature.coordinates&&r.feature.coordinates.draggable||r.feature.coordinates&&r.feature.coordinates.resizable||r.feature.coordinates&&"object"==b(r.feature.coordinates.midpoints)&&r.feature.coordinates.midpoints.draggable)){this.dragEventCount=0;var o=this.selected[0],i=this.dragCoordinate.getDraggableIndex(e,o);if(r&&r.feature&&r.feature.coordinates&&(r.feature.coordinates.draggable||r.feature.coordinates.resizable)&&-1!==i)return this.setCursor(this.cursors.dragStart),r.feature.coordinates.resizable?this.dragCoordinateResizeFeature.startDragging(o,i):this.dragCoordinate.startDragging(o,i),void t(!1);if(r&&r.feature&&r.feature.coordinates&&"object"==b(r.feature.coordinates.midpoints)&&r.feature.coordinates.midpoints.draggable){var a=this.featuresAtMouseEvent.find(e,this.selected.length>0).clickedMidPoint;if(this.selected.length&&a){this.midPoints.insert(o,a.id,this.coordinatePrecision);var s=this.dragCoordinate.getDraggableIndex(e,o);return this.dragCoordinate.startDragging(o,s),void t(!1)}}return r&&r.feature&&r.feature.draggable&&this.dragFeature.canDrag(e,o)?(this.setCursor(this.cursors.dragStart),this.dragFeature.startDragging(e,o),void t(!1)):void 0}}}},{key:"onDrag",value:function(e,t){if(this.allowPointerEvent(this.pointerEvents.onDrag,e)){var n=this.selected[0];if(n){var r=this.store.getPropertiesCopy(n),o=this.flags[r.mode],i=!0===(o&&o.feature&&o.feature.selfIntersectable);if(this.dragEventCount++,this.dragEventCount%this.dragEventThrottle!=0){var a=this.validations[r.mode];if(o&&o.feature&&o.feature.rotateable&&this.canRotate(e))return t(!1),void this.rotateFeature.rotate(e,n,a);if(o&&o.feature&&o.feature.scaleable&&this.canScale(e))return t(!1),void this.scaleFeature.scale(e,n,a);if(this.dragCoordinateResizeFeature.isDragging()&&o.feature&&o.feature.coordinates&&o.feature.coordinates.resizable){if("globe"===this.projection)throw new Error("Globe is currently unsupported projection for resizable");return t(!1),void this.dragCoordinateResizeFeature.drag(e,o.feature.coordinates.resizable,a)}if(this.dragCoordinate.isDragging()){var s,l=null==(s=o.feature)||null==(s=s.coordinates)?void 0:s.snappable,u={toCoordinate:!1};return!0===l?u={toCoordinate:!0}:"object"==b(l)&&(u=l),void this.dragCoordinate.drag(e,i,a,u)}this.dragFeature.isDragging()?this.dragFeature.drag(e,a):t(!0)}}}}},{key:"onDragEnd",value:function(e,t){this.allowPointerEvent(this.pointerEvents.onDragEnd,e)&&(this.setCursor(this.cursors.dragEnd),this.dragCoordinate.isDragging()?this.onFinish(this.selected[0],{mode:this.mode,action:"dragCoordinate"}):this.dragFeature.isDragging()?this.onFinish(this.selected[0],{mode:this.mode,action:"dragFeature"}):this.dragCoordinateResizeFeature.isDragging()&&this.onFinish(this.selected[0],{mode:this.mode,action:"dragCoordinateResize"}),this.dragCoordinate.stopDragging(),this.dragFeature.stopDragging(),this.dragCoordinateResizeFeature.stopDragging(),this.rotateFeature.reset(),this.scaleFeature.reset(),t(!0))}},{key:"onMouseMove",value:function(e){var t=this;if(this.selected.length){if(!this.dragFeature.isDragging()){var n=!1;this.midPoints.ids.forEach(function(r){if(!n){var o=t.store.getGeometryCopy(r);t.pixelDistance.measure(e,o.coordinates)<t.pointerDistance&&(n=!0)}});var r=!1;if(this.selectionPoints.ids.forEach(function(o){var i=t.store.getGeometryCopy(o);t.pixelDistance.measure(e,i.coordinates)<t.pointerDistance&&(n=!1,r=!0)}),n)this.setCursor(this.cursors.insertMidpoint);else{var o=this.featuresAtMouseEvent.find(e,!0).clickedFeature;this.setCursor(this.selected.length>0&&(o&&o.id===this.selected[0]||r)?this.cursors.pointerOver:"unset")}}}else this.setCursor("unset")}},{key:"styleFeature",value:function(e){var t=eo({},{polygonFillColor:"#3f97e0",polygonOutlineColor:"#3f97e0",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:"#3f97e0",pointOutlineColor:"#ffffff",pointOutlineWidth:0,pointWidth:6,lineStringColor:"#3f97e0",lineStringWidth:4,zIndex:0});if(e.properties.mode===this.mode&&"Point"===e.geometry.type){if(e.properties.selectionPoint)return t.pointColor=this.getHexColorStylingValue(this.styles.selectionPointColor,t.pointColor,e),t.pointOutlineColor=this.getHexColorStylingValue(this.styles.selectionPointOutlineColor,t.pointOutlineColor,e),t.pointWidth=this.getNumericStylingValue(this.styles.selectionPointWidth,t.pointWidth,e),t.pointOutlineWidth=this.getNumericStylingValue(this.styles.selectionPointOutlineWidth,2,e),t.zIndex=30,t;if(e.properties.midPoint)return t.pointColor=this.getHexColorStylingValue(this.styles.midPointColor,t.pointColor,e),t.pointOutlineColor=this.getHexColorStylingValue(this.styles.midPointOutlineColor,t.pointOutlineColor,e),t.pointWidth=this.getNumericStylingValue(this.styles.midPointWidth,4,e),t.pointOutlineWidth=this.getNumericStylingValue(this.styles.midPointOutlineWidth,2,e),t.zIndex=50,t}else if(e.properties[to]){if("Polygon"===e.geometry.type)return t.polygonFillColor=this.getHexColorStylingValue(this.styles.selectedPolygonColor,t.polygonFillColor,e),t.polygonOutlineWidth=this.getNumericStylingValue(this.styles.selectedPolygonOutlineWidth,t.polygonOutlineWidth,e),t.polygonOutlineColor=this.getHexColorStylingValue(this.styles.selectedPolygonOutlineColor,t.polygonOutlineColor,e),t.polygonFillOpacity=this.getNumericStylingValue(this.styles.selectedPolygonFillOpacity,t.polygonFillOpacity,e),t.zIndex=10,t;if("LineString"===e.geometry.type)return t.lineStringColor=this.getHexColorStylingValue(this.styles.selectedLineStringColor,t.lineStringColor,e),t.lineStringWidth=this.getNumericStylingValue(this.styles.selectedLineStringWidth,t.lineStringWidth,e),t.zIndex=10,t;if("Point"===e.geometry.type)return t.pointWidth=this.getNumericStylingValue(this.styles.selectedPointWidth,t.pointWidth,e),t.pointColor=this.getHexColorStylingValue(this.styles.selectedPointColor,t.pointColor,e),t.pointOutlineColor=this.getHexColorStylingValue(this.styles.selectedPointOutlineColor,t.pointOutlineColor,e),t.pointOutlineWidth=this.getNumericStylingValue(this.styles.selectedPointOutlineWidth,t.pointOutlineWidth,e),t.zIndex=10,t}return t}}])}(yo),Ci=function(e){function t(){var e;l(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=r(this,t,[].concat(o))).type=fo.Static,e.mode="static",e}return a(t,e),c(t,[{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"onKeyUp",value:function(){}},{key:"onKeyDown",value:function(){}},{key:"onClick",value:function(){}},{key:"onDragStart",value:function(){}},{key:"onDrag",value:function(){}},{key:"onDragEnd",value:function(){}},{key:"onMouseMove",value:function(){}},{key:"cleanUp",value:function(){}},{key:"styleFeature",value:function(){return eo({},{polygonFillColor:"#3f97e0",polygonOutlineColor:"#3f97e0",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:"#3f97e0",pointOutlineColor:"#ffffff",pointOutlineWidth:0,pointWidth:6,lineStringColor:"#3f97e0",lineStringWidth:4,zIndex:0})}}])}(go);function Pi(e,t,n,r,o){for(;r>n;){if(r-n>600){var i=r-n+1,a=t-n+1,s=Math.log(i),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(i-l)/i)*(a-i/2<0?-1:1);Pi(e,t,Math.max(n,Math.floor(t-a*l/i+u)),Math.min(r,Math.floor(t+(i-a)*l/i+u)),o)}var c=e[t],d=n,h=r;for(Si(e,n,t),o(e[r],c)>0&&Si(e,n,r);d<h;){for(Si(e,d,h),d++,h--;o(e[d],c)<0;)d++;for(;o(e[h],c)>0;)h--}0===o(e[n],c)?Si(e,n,h):Si(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function Si(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Mi(e,t){_i(e,0,e.children.length,t,e)}function _i(e,t,n,r,o){o||(o=zi([])),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i=t;i<n;i++){var a=e.children[i];Ii(o,e.leaf?r(a):a)}return o}function Ii(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Di(e,t){return e.minX-t.minX}function Bi(e,t){return e.minY-t.minY}function Ri(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Fi(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Ei(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),o=Math.min(e.maxX,t.maxX),i=Math.min(e.maxY,t.maxY);return Math.max(0,o-n)*Math.max(0,i-r)}function Oi(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function ji(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function zi(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Li(e,t,n,r,o){for(var i=[t,n];i.length;)if(!((n=i.pop())-(t=i.pop())<=r)){var a=t+Math.ceil((n-t)/r/2)*r;Pi(e,a,t,n,o),i.push(t,a,a,n)}}for(var Ti,Ai=function(){return c(function e(t){l(this,e),this._maxEntries=void 0,this._minEntries=void 0,this.data=void 0,this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()},[{key:"search",value:function(e){var t=this.data,n=[];if(!ji(e,t))return n;for(var r=this.toBBox,o=[];t;){for(var i=0;i<t.children.length;i++){var a=t.children[i],s=t.leaf?r(a):a;ji(e,s)&&(t.leaf?n.push(a):Oi(e,s)?this._all(a,n):o.push(a))}t=o.pop()}return n}},{key:"collides",value:function(e){var t=this.data;if(ji(e,t))for(var n=[];t;){for(var r=0;r<t.children.length;r++){var o=t.children[r],i=t.leaf?this.toBBox(o):o;if(ji(e,i)){if(t.leaf||Oi(e,i))return!0;n.push(o)}}t=n.pop()}return!1}},{key:"load",value:function(e){if(e.length<this._minEntries)for(var t=0;t<e.length;t++)this.insert(e[t]);else{var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n}}},{key:"insert",value:function(e){this._insert(e,this.data.height-1)}},{key:"clear",value:function(){this.data=zi([])}},{key:"remove",value:function(e){for(var t,n,r=this.data,o=this.toBBox(e),i=[],a=[],s=!1;r||i.length;){if(r||(r=i.pop(),n=i[i.length-1],t=a.pop(),s=!0),r.leaf){var l=r.children.indexOf(e);-1!==l&&(r.children.splice(l,1),i.push(r),this._condense(i))}s||r.leaf||!Oi(r,o)?n?(t++,r=n.children[t],s=!1):r=null:(i.push(r),a.push(t),t=0,n=r,r=r.children[0])}}},{key:"toBBox",value:function(e){return e}},{key:"compareMinX",value:function(e,t){return e.minX-t.minX}},{key:"compareMinY",value:function(e,t){return e.minY-t.minY}},{key:"_all",value:function(t,n){for(var r=[];t;)t.leaf?n.push.apply(n,e(t.children)):r.push.apply(r,e(t.children)),t=r.pop();return n}},{key:"_build",value:function(e,t,n,r){var o,i=n-t+1,a=this._maxEntries;if(i<=a)return Mi(o=zi(e.slice(t,n+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/Math.pow(a,r-1))),(o=zi([])).leaf=!1,o.height=r;var s=Math.ceil(i/a),l=s*Math.ceil(Math.sqrt(a));Li(e,t,n,l,this.compareMinX);for(var u=t;u<=n;u+=l){var c=Math.min(u+l-1,n);Li(e,u,c,s,this.compareMinY);for(var d=u;d<=c;d+=s){var h=Math.min(d+s-1,c);o.children.push(this._build(e,d,h,r-1))}}return Mi(o,this.toBBox),o}},{key:"_chooseSubtree",value:function(e,t,n,r){for(;r.push(t),!t.leaf&&r.length-1!==n;){for(var o=void 0,i=1/0,a=1/0,s=0;s<t.children.length;s++){var l=t.children[s],u=Ri(l),c=(d=e,h=l,(Math.max(h.maxX,d.maxX)-Math.min(h.minX,d.minX))*(Math.max(h.maxY,d.maxY)-Math.min(h.minY,d.minY))-u);c<a?(a=c,i=u<i?u:i,o=l):c===a&&u<i&&(i=u,o=l)}t=o||t.children[0]}var d,h;return t}},{key:"_insert",value:function(e,t,n){var r=n?e:this.toBBox(e),o=[],i=this._chooseSubtree(r,this.data,t,o);for(i.children.push(e),Ii(i,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)}},{key:"_split",value:function(e,t){var n=e[t],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var i=this._chooseSplitIndex(n,o,r),a=zi(n.children.splice(i,n.children.length-i));a.height=n.height,a.leaf=n.leaf,Mi(n,this.toBBox),Mi(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}},{key:"_splitRoot",value:function(e,t){this.data=zi([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Mi(this.data,this.toBBox)}},{key:"_chooseSplitIndex",value:function(e,t,n){for(var r,o=1/0,i=1/0,a=t;a<=n-t;a++){var s=_i(e,0,a,this.toBBox),l=_i(e,a,n,this.toBBox),u=Ei(s,l),c=Ri(s)+Ri(l);u<o?(o=u,r=a,i=c<i?c:i):u===o&&c<i&&(i=c,r=a)}return r||n-t}},{key:"_chooseSplitAxis",value:function(e,t,n){var r=e.leaf?this.compareMinX:Di,o=e.leaf?this.compareMinY:Bi;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,o)&&e.children.sort(r)}},{key:"_allDistMargin",value:function(e,t,n,r){e.children.sort(r);for(var o=this.toBBox,i=_i(e,0,t,o),a=_i(e,n-t,n,o),s=Fi(i)+Fi(a),l=t;l<n-t;l++){var u=e.children[l];Ii(i,e.leaf?o(u):u),s+=Fi(i)}for(var c=n-t-1;c>=t;c--){var d=e.children[c];Ii(a,e.leaf?o(d):d),s+=Fi(a)}return s}},{key:"_adjustParentBBoxes",value:function(e,t,n){for(var r=n;r>=0;r--)Ii(t[r],e)}},{key:"_condense",value:function(e){for(var t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():Mi(e[n],this.toBBox)}}])}(),Wi=function(){return c(function e(t){l(this,e),this.tree=void 0,this.idToNode=void 0,this.nodeToId=void 0,this.tree=new Ai(t&&t.maxEntries?t.maxEntries:9),this.idToNode=new Map,this.nodeToId=new Map},[{key:"setMaps",value:function(e,t){this.idToNode.set(e.id,t),this.nodeToId.set(t,e.id)}},{key:"toBBox",value:function(e){var t,n=[],r=[];if("Polygon"===e.geometry.type)t=e.geometry.coordinates[0];else if("LineString"===e.geometry.type)t=e.geometry.coordinates;else{if("Point"!==e.geometry.type)throw new Error("Not a valid feature to turn into a bounding box");t=[e.geometry.coordinates]}for(var o=0;o<t.length;o++)r.push(t[o][1]),n.push(t[o][0]);var i=Math.min.apply(Math,r),a=Math.max.apply(Math,r);return{minX:Math.min.apply(Math,n),minY:i,maxX:Math.max.apply(Math,n),maxY:a}}},{key:"insert",value:function(e){if(this.idToNode.get(String(e.id)))throw new Error("Feature already exists");var t=this.toBBox(e);this.setMaps(e,t),this.tree.insert(t)}},{key:"load",value:function(e){var t=this,n=[],r=new Set;e.forEach(function(e){var o=t.toBBox(e);if(t.setMaps(e,o),r.has(String(e.id)))throw new Error("Duplicate feature ID found ".concat(e.id));r.add(String(e.id)),n.push(o)}),this.tree.load(n)}},{key:"update",value:function(e){this.remove(e.id);var t=this.toBBox(e);this.setMaps(e,t),this.tree.insert(t)}},{key:"remove",value:function(e){var t=this.idToNode.get(e);if(!t)throw new Error("".concat(e," not inserted into the spatial index"));this.tree.remove(t)}},{key:"clear",value:function(){this.tree.clear()}},{key:"search",value:function(e){var t=this;return this.tree.search(this.toBBox(e)).map(function(e){return t.nodeToId.get(e)})}},{key:"collides",value:function(e){return this.tree.collides(this.toBBox(e))}}])}(),Ni={getId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},isValidId:function(e){return"string"==typeof e&&36===e.length}},Ui=function(){return c(function e(t){l(this,e),this.idStrategy=void 0,this.tracked=void 0,this.spatialIndex=void 0,this.store=void 0,this._onChange=function(){},this.store={},this.spatialIndex=new Wi,this.tracked=!t||!1!==t.tracked,this.idStrategy=t&&t.idStrategy?t.idStrategy:Ni},[{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"getId",value:function(){return this.idStrategy.getId()}},{key:"has",value:function(e){return Boolean(this.store[e])}},{key:"load",value:function(e,t,n,r){var o=this;if(0===e.length)return[];var i=this.clone(e),a=[],s=[];return i=i.filter(function(e){null==e.id&&(e.id=o.idStrategy.getId());var r=e.id;if(t){var i=t(e);if(!i.valid)return s.push({id:r,valid:!1,reason:i.reason}),!1}if(o.tracked){if(e.properties.createdAt){if(!po(e.properties.createdAt))return s.push({id:e.id,valid:!1,reason:"createdAt is not a valid numeric timestamp"}),!1}else e.properties.createdAt=+new Date;if(e.properties.updatedAt){if(!po(e.properties.updatedAt))return s.push({id:e.id,valid:!1,reason:"updatedAt is not a valid numeric timestamp"}),!1}else e.properties.updatedAt=+new Date}return o.has(r)?(s.push({id:r,valid:!1,reason:"Feature already exists with this id: ".concat(r)}),!1):(o.store[r]=e,a.push(r),n&&n(e),s.push({id:r,valid:!0}),!0)}),this.spatialIndex.load(i),a.length>0&&this._onChange(a,"create",r),s}},{key:"search",value:function(e,t){var n=this,r=this.spatialIndex.search(e).map(function(e){return n.store[e]});return this.clone(t?r.filter(t):r)}},{key:"registerOnChange",value:function(e){this._onChange=function(t,n,r){e(t,n,r)}}},{key:"getGeometryCopy",value:function(e){var t=this.store[e];if(!t)throw new Error("No feature with this id (".concat(e,"), can not get geometry copy"));return this.clone(t.geometry)}},{key:"getPropertiesCopy",value:function(e){var t=this.store[e];if(!t)throw new Error("No feature with this id (".concat(e,"), can not get properties copy"));return this.clone(t.properties)}},{key:"updateProperty",value:function(e,t){var n=this,r=[];e.forEach(function(e){var t=e.id,o=e.property,i=e.value,a=n.store[t];if(!a)throw new Error("No feature with this (".concat(t,"), can not update geometry"));r.push(t),void 0===i?delete a.properties[o]:a.properties[o]=i,n.tracked&&(a.properties.updatedAt=+new Date)}),this._onChange&&this._onChange(r,"update",t)}},{key:"updateGeometry",value:function(e,t){var n=this,r=[];e.forEach(function(e){var t=e.id,o=e.geometry;r.push(t);var i=n.store[t];if(!i)throw new Error("No feature with this (".concat(t,"), can not update geometry"));i.geometry=n.clone(o),n.spatialIndex.update(i),n.tracked&&(i.properties.updatedAt=+new Date)}),this._onChange&&this._onChange(r,"update",t)}},{key:"create",value:function(e,t){var n=this,r=[];return e.forEach(function(e){var t,o=e.geometry,i=e.properties,a=eo({},i);n.tracked&&(t=+new Date,i?(a.createdAt="number"==typeof i.createdAt?i.createdAt:t,a.updatedAt="number"==typeof i.updatedAt?i.updatedAt:t):a={createdAt:t,updatedAt:t});var s=n.getId(),l={id:s,type:"Feature",geometry:o,properties:a};n.store[s]=l,n.spatialIndex.insert(l),r.push(s)}),this._onChange&&this._onChange([].concat(r),"create",t),r}},{key:"delete",value:function(t,n){var r=this;t.forEach(function(e){if(!r.store[e])throw new Error("No feature with id ".concat(e,", can not delete"));delete r.store[e],r.spatialIndex.remove(e)}),this._onChange&&this._onChange(e(t),"delete",n)}},{key:"copy",value:function(e){return this.clone(this.store[e])}},{key:"copyAll",value:function(){var e=this;return this.clone(Object.keys(this.store).map(function(t){return e.store[t]}))}},{key:"copyAllWhere",value:function(e){var t=this;return this.clone(Object.keys(this.store).map(function(e){return t.store[e]}).filter(function(t){return t.properties&&e(t.properties)}))}},{key:"clear",value:function(){this.store={},this.spatialIndex.clear()}},{key:"size",value:function(){return Object.keys(this.store).length}}])}(),Vi=c(function e(t){var n=this,r=t.name,o=t.callback,i=t.unregister,a=t.register;l(this,e),this.name=void 0,this.callback=void 0,this.registered=!1,this.register=void 0,this.unregister=void 0,this.name=r,this.register=function(){n.registered||(n.registered=!0,a(o))},this.unregister=function(){n.register&&(n.registered=!1,i(o))},this.callback=o}),Gi={__proto__:null,TerraDrawBaseAdapter:function(){return c(function e(t){l(this,e),this._nextKeyUpIsContextMenu=!1,this._minPixelDragDistance=void 0,this._minPixelDragDistanceDrawing=void 0,this._minPixelDragDistanceSelecting=void 0,this._lastDrawEvent=void 0,this._coordinatePrecision=void 0,this._heldKeys=new Set,this._listeners=[],this._dragState="not-dragging",this._currentModeCallbacks=void 0,this._minPixelDragDistance="number"==typeof t.minPixelDragDistance?t.minPixelDragDistance:1,this._minPixelDragDistanceSelecting="number"==typeof t.minPixelDragDistanceSelecting?t.minPixelDragDistanceSelecting:1,this._minPixelDragDistanceDrawing="number"==typeof t.minPixelDragDistanceDrawing?t.minPixelDragDistanceDrawing:8,this._coordinatePrecision="number"==typeof t.coordinatePrecision?t.coordinatePrecision:9},[{key:"getButton",value:function(e){return-1===e.button?"neither":0===e.button?"left":1===e.button?"middle":2===e.button?"right":"neither"}},{key:"getMapElementXYPosition",value:function(e){var t=this.getMapEventElement().getBoundingClientRect(),n=t.left,r=t.top;return{containerX:e.clientX-n,containerY:e.clientY-r}}},{key:"getDrawEventFromEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getLngLatFromEvent(e);if(!n)return null;var r=n.lng,o=n.lat,i=this.getMapElementXYPosition(e),a=i.containerX,s=i.containerY,l=this.getButton(e),u=Array.from(this._heldKeys);return{lng:ko(r,this._coordinatePrecision),lat:ko(o,this._coordinatePrecision),containerX:a,containerY:s,button:l,heldKeys:u,isContextMenu:t}}},{key:"register",value:function(e){this._currentModeCallbacks=e,this._listeners=this.getAdapterListeners(),this._listeners.forEach(function(e){e.register()})}},{key:"getCoordinatePrecision",value:function(){return this._coordinatePrecision}},{key:"getAdapterListeners",value:function(){var e=this;return[new Vi({name:"pointerdown",callback:function(t){if(e._currentModeCallbacks&&t.isPrimary){var n=e.getDrawEventFromEvent(t);n&&(e._dragState="pre-dragging",e._lastDrawEvent=n)}},register:function(t){e.getMapEventElement().addEventListener("pointerdown",t)},unregister:function(t){e.getMapEventElement().removeEventListener("pointerdown",t)}}),new Vi({name:"pointermove",callback:function(t){if(e._currentModeCallbacks&&t.isPrimary){t.preventDefault();var n=e.getDrawEventFromEvent(t);if(n)if("not-dragging"===e._dragState)e._currentModeCallbacks.onMouseMove(n),e._lastDrawEvent=n;else if("pre-dragging"===e._dragState){if(!e._lastDrawEvent)return;var r={x:e._lastDrawEvent.containerX,y:e._lastDrawEvent.containerY},o={x:n.containerX,y:n.containerY},i=e._currentModeCallbacks.getState(),a=Fo(r,o);if("drawing"===i?a<e._minPixelDragDistanceDrawing:"selecting"===i?a<e._minPixelDragDistanceSelecting:a<e._minPixelDragDistance)return;e._nextKeyUpIsContextMenu=!1,e._dragState="dragging",e._currentModeCallbacks.onDragStart(n,function(t){e.setDraggability.bind(e)(t)})}else"dragging"===e._dragState&&e._currentModeCallbacks.onDrag(n,function(t){e.setDraggability.bind(e)(t)})}},register:function(t){e.getMapEventElement().addEventListener("pointermove",t)},unregister:function(t){e.getMapEventElement().removeEventListener("pointermove",t)}}),new Vi({name:"contextmenu",callback:function(t){e._currentModeCallbacks&&(t.preventDefault(),e._nextKeyUpIsContextMenu=!0)},register:function(t){e.getMapEventElement().addEventListener("contextmenu",t)},unregister:function(t){e.getMapEventElement().removeEventListener("contextmenu",t)}}),new Vi({name:"pointerup",callback:function(t){if(e._currentModeCallbacks&&t.target===e.getMapEventElement()&&t.isPrimary){var n=e.getDrawEventFromEvent(t);n&&("dragging"===e._dragState?e._currentModeCallbacks.onDragEnd(n,function(t){e.setDraggability.bind(e)(t)}):"not-dragging"!==e._dragState&&"pre-dragging"!==e._dragState||(e._nextKeyUpIsContextMenu&&(n.isContextMenu=!0,e._nextKeyUpIsContextMenu=!1),e._currentModeCallbacks.onClick(n)),e._dragState="not-dragging",e.setDraggability(!0))}},register:function(t){e.getMapEventElement().addEventListener("pointerup",t)},unregister:function(t){e.getMapEventElement().removeEventListener("pointerup",t)}}),new Vi({name:"keyup",callback:function(t){e._currentModeCallbacks&&(e._heldKeys.delete(t.key),e._currentModeCallbacks.onKeyUp({key:t.key,heldKeys:Array.from(e._heldKeys),preventDefault:function(){return t.preventDefault()}}))},register:function(t){e.getMapEventElement().addEventListener("keyup",t)},unregister:function(t){e.getMapEventElement().removeEventListener("keyup",t)}}),new Vi({name:"keydown",callback:function(t){e._currentModeCallbacks&&(e._heldKeys.add(t.key),e._currentModeCallbacks.onKeyDown({key:t.key,heldKeys:Array.from(e._heldKeys),preventDefault:function(){return t.preventDefault()}}))},register:function(t){e.getMapEventElement().addEventListener("keydown",t)},unregister:function(t){e.getMapEventElement().removeEventListener("keydown",t)}})]}},{key:"unregister",value:function(){this._listeners.forEach(function(e){e.unregister()}),this.clear(),this._currentModeCallbacks=void 0}}])}()},Xi=function(){return c(function e(t){var n=this;l(this,e),this._modes=void 0,this._mode=void 0,this._adapter=void 0,this._enabled=!1,this._store=void 0,this._eventListeners=void 0,this._instanceSelectMode=void 0,this._adapter=t.adapter,this._mode=new Ci;var r=new Set,o=t.modes.reduce(function(e,t){if(r.has(t.mode))throw new Error("There is already a ".concat(t.mode," mode provided"));return r.add(t.mode),e[t.mode]=t,e},{}),i=Object.keys(o);if(0===i.length)throw new Error("No modes provided");i.forEach(function(e){if(o[e].type===fo.Select){if(n._instanceSelectMode)throw new Error("only one type of select mode can be provided");n._instanceSelectMode=e}}),this._modes=eo({},o,{static:this._mode}),this._eventListeners={change:[],select:[],deselect:[],finish:[],ready:[]},this._store=new Ui({tracked:!!t.tracked,idStrategy:t.idStrategy?t.idStrategy:void 0});var a=function(e){var t=[],r=n._store.copyAll().filter(function(n){return!e.includes(n.id)||(t.push(n),!1)});return{changed:t,unchanged:r}},s=function(e,t){n._enabled&&n._eventListeners.finish.forEach(function(n){n(e,t)})},u=function(e,t,r){if(n._enabled){n._eventListeners.change.forEach(function(n){n(e,t,r)});var o=a(e),i=o.changed,s=o.unchanged;"create"===t?n._adapter.render({created:i,deletedIds:[],unchanged:s,updated:[]},n.getModeStyles()):"update"===t?n._adapter.render({created:[],deletedIds:[],unchanged:s,updated:i},n.getModeStyles()):"delete"===t?n._adapter.render({created:[],deletedIds:e,unchanged:s,updated:[]},n.getModeStyles()):"styling"===t&&n._adapter.render({created:[],deletedIds:[],unchanged:s,updated:[]},n.getModeStyles())}},c=function(e){if(n._enabled){n._eventListeners.select.forEach(function(t){t(e)});var t=a([e]),r=t.changed,o=t.unchanged;n._adapter.render({created:[],deletedIds:[],unchanged:o,updated:r},n.getModeStyles())}},d=function(e){if(n._enabled){n._eventListeners.deselect.forEach(function(e){e()});var t=a([e]),r=t.changed,o=t.unchanged;r&&n._adapter.render({created:[],deletedIds:[],unchanged:o,updated:r},n.getModeStyles())}};Object.keys(this._modes).forEach(function(e){n._modes[e].register({mode:e,store:n._store,setCursor:n._adapter.setCursor.bind(n._adapter),project:n._adapter.project.bind(n._adapter),unproject:n._adapter.unproject.bind(n._adapter),setDoubleClickToZoom:n._adapter.setDoubleClickToZoom.bind(n._adapter),onChange:u,onSelect:c,onDeselect:d,onFinish:s,coordinatePrecision:n._adapter.getCoordinatePrecision()})})},[{key:"checkEnabled",value:function(){if(!this._enabled)throw new Error("Terra Draw is not enabled")}},{key:"getModeStyles",value:function(){var e=this,t={};return Object.keys(this._modes).forEach(function(n){t[n]=function(t){return e._instanceSelectMode&&t.properties[to]?e._modes[e._instanceSelectMode].styleFeature.bind(e._modes[e._instanceSelectMode])(t):e._modes[n].styleFeature.bind(e._modes[n])(t)}}),t}},{key:"featuresAtLocation",value:function(e,t){var n=e.lng,r=e.lat,o=t&&void 0!==t.pointerDistance?t.pointerDistance:30,i=!t||void 0===t.ignoreSelectFeatures||t.ignoreSelectFeatures,a=!(!t||void 0===t.ignoreCoordinatePoints)&&t.ignoreCoordinatePoints,s=!(!t||void 0===t.ignoreCurrentlyDrawing)&&t.ignoreCurrentlyDrawing,l=!(!t||void 0===t.ignoreClosingPoints)&&t.ignoreClosingPoints,u=this._adapter.unproject.bind(this._adapter),c=this._adapter.project.bind(this._adapter),d=c(n,r),h=Oo({unproject:u,point:d,pointerDistance:o});return this._store.search(h).filter(function(e){if(i&&(e.properties[no]||e.properties[oo]))return!1;if(a&&e.properties[lo])return!1;if(l&&e.properties[so])return!1;if(s&&e.properties[io])return!1;if("Point"===e.geometry.type){var u=e.geometry.coordinates,h=c(u[0],u[1]);return Fo(d,h)<o}if("LineString"===e.geometry.type){for(var p=e.geometry.coordinates,f=0;f<p.length-1;f++){var v=p[f],g=p[f+1];if(di(d,c(v[0],v[1]),c(g[0],g[1]))<o)return!0}return!1}if(ci([n,r],e.geometry.coordinates))return!0;if(null!=t&&t.includePolygonsWithinPointerDistance){var y,m=k(e.geometry.coordinates);try{for(m.s();!(y=m.n()).done;)for(var b=y.value,x=0;x<b.length-1;x++){var w=b[x],C=b[x+1],P=c(w[0],w[1]),S=c(C[0],C[1]);if(di(d,P,S)<o)return!0}}catch(M){m.e(M)}finally{m.f()}}return!1})}},{key:"getSelectMode",value:function(){if(this.checkEnabled(),!this._instanceSelectMode)throw new Error("No select mode defined in instance");return this.getMode()!==this._instanceSelectMode&&this.setMode(this._instanceSelectMode),this._modes[this._instanceSelectMode]}},{key:"setModeStyles",value:function(e,t){if(this.checkEnabled(),!this._modes[e])throw new Error("No mode with this name present");this._modes[e].styles=t}},{key:"updateModeOptions",value:function(e,t){if(this.checkEnabled(),!this._modes[e])throw new Error("No mode with this name present");this._modes[e].updateOptions(t)}},{key:"getSnapshot",value:function(){return this._store.copyAll()}},{key:"getSnapshotFeature",value:function(e){if(this._store.has(e))return this._store.copy(e)}},{key:"clear",value:function(){this.checkEnabled(),this._adapter.clear()}},{key:"enabled",get:function(){return this._enabled},set:function(e){throw new Error("Enabled is read only")}},{key:"getMode",value:function(){return this._mode.mode}},{key:"getModeState",value:function(){return this._mode.state}},{key:"setMode",value:function(e){if(this.checkEnabled(),!this._modes[e])throw new Error("No mode with this name present");this._mode.stop(),this._mode=this._modes[e],this._mode.start()}},{key:"removeFeatures",value:function(t){var n=this;this.checkEnabled();var r=[];t.forEach(function(t){if(!n._store.has(t))throw new Error("No feature with id ".concat(t,", can not delete"));var o=n._store.copy(t);o.properties[to]&&n.deselectFeature(t),o.properties[uo]&&r.push.apply(r,e(o.properties[uo]))}),this._store.delete([].concat(e(t),r),{origin:"api"})}},{key:"selectFeature",value:function(e){this.getSelectMode().selectFeature(e)}},{key:"deselectFeature",value:function(e){this.getSelectMode().deselectFeature(e)}},{key:"getFeatureId",value:function(){return this._store.getId()}},{key:"hasFeature",value:function(e){return this._store.has(e)}},{key:"addFeatures",value:function(e){var t=this;return this.checkEnabled(),0===e.length?[]:this._store.load(e,function(e){if(ho(e)){var n=e.properties.mode,r=t._modes[n];if(!r)return{id:e.id,valid:!1,reason:"".concat(n," mode is not in the list of instantiated modes")};var o=r.validateFeature.bind(r)(e);return{id:e.id,valid:o.valid,reason:o.reason?o.reason:o.valid?void 0:"Feature is invalid"}}return{id:e.id,valid:!1,reason:"Mode property does not exist"}},function(e){if(ho(e)){var n=t._modes[e.properties.mode];n&&n.afterFeatureAdded&&n.afterFeatureAdded(e)}},{origin:"api"})}},{key:"start",value:function(){var e=this;this._enabled||(this._enabled=!0,this._adapter.register({onReady:function(){e._eventListeners.ready.forEach(function(e){e()})},getState:function(){return e._mode.state},onClick:function(t){e._mode.onClick(t)},onMouseMove:function(t){e._mode.onMouseMove(t)},onKeyDown:function(t){e._mode.onKeyDown(t)},onKeyUp:function(t){e._mode.onKeyUp(t)},onDragStart:function(t,n){e._mode.onDragStart(t,n)},onDrag:function(t,n){e._mode.onDrag(t,n)},onDragEnd:function(t,n){e._mode.onDragEnd(t,n)},onClear:function(){e._mode.cleanUp(),e._store.clear()}}))}},{key:"getFeaturesAtLngLat",value:function(e,t){var n=e.lng,r=e.lat;return this.featuresAtLocation({lng:n,lat:r},t)}},{key:"getFeaturesAtPointerEvent",value:function(e,t){var n=this._adapter.getLngLatFromEvent.bind(this._adapter)(e);return null===n?[]:this.featuresAtLocation(n,t)}},{key:"stop",value:function(){this._enabled&&(this._enabled=!1,this._adapter.unregister())}},{key:"on",value:function(e,t){var n=this._eventListeners[e];n.includes(t)||n.push(t)}},{key:"off",value:function(e,t){var n=this._eventListeners[e];n.includes(t)&&n.splice(n.indexOf(t),1)}}])}(),Hi=function(n){function o(e){var t;return l(this,o),(t=r(this,o,[e]))._renderBeforeLayerId=void 0,t._initialDragPan=void 0,t._initialDragRotate=void 0,t._nextRender=void 0,t._map=void 0,t._container=void 0,t.changedIds={deletion:!1,points:!1,linestrings:!1,polygons:!1,styling:!1},t._map=e.map,t._container=t._map.getContainer(),t._initialDragRotate=t._map.dragRotate.isEnabled(),t._initialDragPan=t._map.dragPan.isEnabled(),t._renderBeforeLayerId=e.renderBelowLayerId,t}return a(o,n),c(o,[{key:"_addGeoJSONSource",value:function(e,t){this._map.addSource(e,{type:"geojson",data:{type:"FeatureCollection",features:t},tolerance:0})}},{key:"_addFillLayer",value:function(e){return this._map.addLayer({id:e,source:e,type:"fill",layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":["get","polygonFillColor"],"fill-opacity":["get","polygonFillOpacity"]}})}},{key:"_addFillOutlineLayer",value:function(e){return this._map.addLayer({id:e+"-outline",source:e,type:"line",layout:{"line-sort-key":["get","zIndex"]},paint:{"line-width":["get","polygonOutlineWidth"],"line-color":["get","polygonOutlineColor"]}})}},{key:"_addLineLayer",value:function(e){return this._map.addLayer({id:e,source:e,type:"line",layout:{"line-sort-key":["get","zIndex"]},paint:{"line-width":["get","lineStringWidth"],"line-color":["get","lineStringColor"]}})}},{key:"_addPointLayer",value:function(e){return this._map.addLayer({id:e,source:e,type:"circle",layout:{"circle-sort-key":["get","zIndex"]},paint:{"circle-stroke-color":["get","pointOutlineColor"],"circle-stroke-width":["get","pointOutlineWidth"],"circle-radius":["get","pointWidth"],"circle-color":["get","pointColor"]}})}},{key:"_addLayer",value:function(e,t){"Point"===t&&this._addPointLayer(e),"LineString"===t&&this._addLineLayer(e),"Polygon"===t&&(this._addFillLayer(e),this._addFillOutlineLayer(e))}},{key:"_addGeoJSONLayer",value:function(e,t){var n="td-".concat(e.toLowerCase());return this._addGeoJSONSource(n,t),this._addLayer(n,e),n}},{key:"_setGeoJSONLayerData",value:function(e,t){var n="td-".concat(e.toLowerCase());return this._map.getSource(n).setData({type:"FeatureCollection",features:t}),n}},{key:"updateChangedIds",value:function(t){var n=this;[].concat(e(t.updated),e(t.created)).forEach(function(e){"Point"===e.geometry.type?n.changedIds.points=!0:"LineString"===e.geometry.type?n.changedIds.linestrings=!0:"Polygon"===e.geometry.type&&(n.changedIds.polygons=!0)}),t.deletedIds.length>0&&(this.changedIds.deletion=!0),0===t.created.length&&0===t.updated.length&&0===t.deletedIds.length&&(this.changedIds.styling=!0)}},{key:"getLngLatFromEvent",value:function(e){var t=this._container.getBoundingClientRect(),n=t.left,r=t.top;return this.unproject(e.clientX-n,e.clientY-r)}},{key:"getMapEventElement",value:function(){return this._map.getCanvas()}},{key:"setDraggability",value:function(e){e?(this._initialDragRotate&&this._map.dragRotate.enable(),this._initialDragPan&&this._map.dragPan.enable()):(this._initialDragRotate&&this._map.dragRotate.disable(),this._initialDragPan&&this._map.dragPan.disable())}},{key:"project",value:function(e,t){var n=this._map.project({lng:e,lat:t});return{x:n.x,y:n.y}}},{key:"unproject",value:function(e,t){var n=this._map.unproject({x:e,y:t});return{lng:n.lng,lat:n.lat}}},{key:"setCursor",value:function(e){var t=this._map.getCanvas();"unset"===e?t.style.removeProperty("cursor"):t.style.cursor=e}},{key:"setDoubleClickToZoom",value:function(e){e?this._map.doubleClickZoom.enable():this._map.doubleClickZoom.disable()}},{key:"render",value:function(t,n){var r=this;this.updateChangedIds(t),this._nextRender&&cancelAnimationFrame(this._nextRender),this._nextRender=requestAnimationFrame(function(){if(r._currentModeCallbacks){for(var o=[].concat(e(t.created),e(t.updated),e(t.unchanged)),i=[],a=[],s=[],l=0;l<o.length;l++){var u=o[l],c=u.properties,d=n[c.mode](u);"Point"===u.geometry.type?(c.pointColor=d.pointColor,c.pointOutlineColor=d.pointOutlineColor,c.pointOutlineWidth=d.pointOutlineWidth,c.pointWidth=d.pointWidth,c.zIndex=d.zIndex,i.push(u)):"LineString"===u.geometry.type?(c.lineStringColor=d.lineStringColor,c.lineStringWidth=d.lineStringWidth,a.push(u)):"Polygon"===u.geometry.type&&(c.polygonFillColor=d.polygonFillColor,c.polygonFillOpacity=d.polygonFillOpacity,c.polygonOutlineColor=d.polygonOutlineColor,c.polygonOutlineWidth=d.polygonOutlineWidth,s.push(u))}var h=r.changedIds.deletion||r.changedIds.styling,p=h||r.changedIds.linestrings,f=h||r.changedIds.polygons;(h||r.changedIds.points)&&r._setGeoJSONLayerData("Point",i),p&&r._setGeoJSONLayerData("LineString",a),f&&r._setGeoJSONLayerData("Polygon",s),r.changedIds={points:!1,linestrings:!1,polygons:!1,deletion:!1,styling:!1}}})}},{key:"clear",value:function(){this._currentModeCallbacks&&(this._currentModeCallbacks.onClear(),this._nextRender&&(cancelAnimationFrame(this._nextRender),this._nextRender=void 0),this._setGeoJSONLayerData("Point",[]),this._setGeoJSONLayerData("LineString",[]),this._setGeoJSONLayerData("Polygon",[]))}},{key:"getCoordinatePrecision",value:function(){return t(o,"getCoordinatePrecision",this,3)([])}},{key:"unregister",value:function(){t(o,"unregister",this,3)([]),this.changedIds={points:!1,linestrings:!1,polygons:!1,deletion:!1,styling:!1},this._map.removeLayer("td-point"),this._map.removeSource("td-point"),this._map.removeLayer("td-linestring"),this._map.removeSource("td-linestring"),this._map.removeLayer("td-polygon"),this._map.removeLayer("td-polygon-outline"),this._map.removeSource("td-polygon")}},{key:"register",value:function(e){var n;t(o,"register",this,3)([e]);var r=this._addGeoJSONLayer("Polygon",[]),i=this._addGeoJSONLayer("LineString",[]),a=this._addGeoJSONLayer("Point",[]);this._renderBeforeLayerId&&(this._map.moveLayer(a,this._renderBeforeLayerId),this._map.moveLayer(i,a),this._map.moveLayer(r+"-outline",i),this._map.moveLayer(r,i)),null!=(n=this._currentModeCallbacks)&&n.onReady&&this._currentModeCallbacks.onReady()}}])}(Gi.TerraDrawBaseAdapter),Yi={size:[String,Number],color:String,tag:String},Ki=Symbol("IconConfigInjection"),qi=i({name:"Icon",props:Yi,setup:function(e,t){var n=t.slots,r=Q(Ki,null),o=X(function(){var t,n=null!==(t=e.size)&&void 0!==t?t:null==r?void 0:r.size;if(void 0!==n)return"number"==typeof n||/^\d+$/.test(n)?"".concat(n,"px"):n}),i=X(function(){var t=e.color;return void 0===t?r?r.color:void 0:t}),a=X(function(){var t,n=e.tag;return void 0===n?null!==(t=null==r?void 0:r.tag)&&void 0!==t?t:"span":n});return Je(function(){$e()}),function(){return P(a.value,{class:"xicon",style:{color:i.value,fontSize:o.value}},[Qe(n,"default")])}}}),Zi=[],Ji=0;Ji<256;++Ji)Zi.push((Ji+256).toString(16).slice(1));var $i=new Uint8Array(16);var Qi={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function ea(e,t,n){var r,o,i,a;if(Qi.randomUUID&&!e)return Qi.randomUUID();var s=null!==(r=null!==(o=(e=e||{}).random)&&void 0!==o?o:null===(i=(a=e).rng)||void 0===i?void 0:i.call(a))&&void 0!==r?r:function(){if(!Ti){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ti=crypto.getRandomValues.bind(crypto)}return Ti($i)}();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=15&s[6]|64,s[8]=63&s[8]|128,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(Zi[e[t+0]]+Zi[e[t+1]]+Zi[e[t+2]]+Zi[e[t+3]]+"-"+Zi[e[t+4]]+Zi[e[t+5]]+"-"+Zi[e[t+6]]+Zi[e[t+7]]+"-"+Zi[e[t+8]]+Zi[e[t+9]]+"-"+Zi[e[t+10]]+Zi[e[t+11]]+Zi[e[t+12]]+Zi[e[t+13]]+Zi[e[t+14]]+Zi[e[t+15]]).toLowerCase()}(s)}var ta=et("routes",function(){var e=q([]),t=q(null);function n(){return(n=h(y().m(function t(){var n;return y().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,tt("routes");case 1:(n=t.v)&&(e.value=un(n)?JSON.parse(n):n);case 2:return t.a(2)}},t)}))).apply(this,arguments)}function r(){return(r=h(y().m(function t(n){var r;return y().w(function(t){for(;;)switch(t.n){case 0:return r=f(f({},n),{},{id:ea()}),e.value.push(r),t.n=1,nt("routes",rt(e.value));case 1:return t.n=2,ot();case 2:return t.a(2,r)}},t)}))).apply(this,arguments)}function o(){return o=h(y().m(function n(r){return y().w(function(n){for(;;)switch(n.n){case 0:return e.value=e.value.filter(function(e){return e.id!==r}),t.value===r&&(t.value=null),n.n=1,nt("routes",rt(e.value));case 1:return n.n=2,ot();case 2:return n.a(2)}},n)})),o.apply(this,arguments)}function i(){return i=h(y().m(function t(n,r){var o;return y().w(function(t){for(;;)switch(t.n){case 0:if(o=e.value.find(function(e){return e.id===n}),o){t.n=1;break}return t.a(2);case 1:if(!(o.points.length>0&&it(o.points[o.points.length-1],r))){t.n=2;break}return t.a(2);case 2:return o.points.push(r),t.n=3,nt("routes",rt(e.value));case 3:return t.n=4,ot();case 4:return t.a(2)}},t)})),i.apply(this,arguments)}function a(){return a=h(y().m(function t(n,r){var o;return y().w(function(t){for(;;)switch(t.n){case 0:if(o=e.value.find(function(e){return e.id===n}),!o){t.n=2;break}return Object.assign(o,r),t.n=1,nt("routes",rt(e.value));case 1:return t.n=2,ot();case 2:return t.a(2)}},t)})),a.apply(this,arguments)}return{routes:e,currentRouteId:t,init:function(){return n.apply(this,arguments)},addRoute:function(e){return r.apply(this,arguments)},deleteRoute:function(e){return o.apply(this,arguments)},addPointToRoute:function(e,t){return i.apply(this,arguments)},updateRoute:function(e,t){return a.apply(this,arguments)}}});function na(e,t,n){var r=new Blob([e],{type:t}),o=document.createElement("a");o.download=n,o.href=URL.createObjectURL(r),o.dataset.downloadurl=[t,o.download,o.href].join(":"),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(function(){URL.revokeObjectURL(o.href)},1500)}var ra={class:"flex-col justify-center items-center gap-4 w-full"},oa={class:"flex justify-end gap-4"},ia=i({__name:"TextFileUploaderDialog",props:at({multiple:{type:Boolean},icon:{},prompt:{},types:{}},{show:{default:!1,type:Boolean},showModifiers:{}}),emits:at(["update:value","confirm"],["update:show"]),setup:function(e,t){var n=t.emit,r=Fn(),o=e,i=n,a=st(e,"show"),s=[],l=function(){i("confirm",s),a.value=!1},c=function(e){var t,n,i,a;return!!o.types.includes(null!==(t=null===(n=e.file.file)||void 0===n?void 0:n.type)&&void 0!==t?t:"")||(r.error("Unsupported file type ".concat(null!==(i=null===(a=e.file.file)||void 0===a?void 0:a.type)&&void 0!==i?i:"unknown",". Supported types: ['").concat(o.types.join("', '"),"']")),!1)};return function(e,t){return u(),lt(ct(dt),{show:a.value,"onUpdate:show":t[2]||(t[2]=function(e){return a.value=e}),preset:"dialog",title:"Dialog"},{header:ut(function(){return t[3]||(t[3]=[pt(" File Upload ")])}),default:ut(function(){var e;return[d("div",ra,[ht(ct(mr),{multiple:null!==(e=o.multiple)&&void 0!==e&&e,onChange:t[0]||(t[0]=function(e){return function(e){s=[];var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,l=a.file;if(l)if(o.types.includes(l.type)){var u=new FileReader;u.onload=function(t){var n;null!==(n=t.target)&&void 0!==n&&n.result&&s.push(t.target.result),s.length===e.length&&i("update:value",s)},u.readAsText(l)}else r.warning("Skipped file ".concat(a.name," due to unsupported type ").concat(l.type))}}catch(c){n.e(c)}finally{n.f()}}(e.fileList)}),onBeforeUpload:c},{default:ut(function(){return[ht(ct(qn),null,{default:ut(function(){var e;return[ht(ct(qi),{size:36,name:"upload",class:"opacity-50"},{default:ut(function(){var e;return[(u(),lt(ft(null!==(e=o.icon)&&void 0!==e?e:ct(sn))))]}),_:1}),d("div",null,vt(null!==(e=o.prompt)&&void 0!==e?e:"Drag and drop a file here or click to upload"),1)]}),_:1})]}),_:1},8,["multiple"])])]}),action:ut(function(){return[d("div",oa,[ht(ct(Te),{onClick:t[1]||(t[1]=function(e){return a.value=!1})},{default:ut(function(){return t[4]||(t[4]=[pt("Cancel")])}),_:1,__:[4]}),ht(ct(Te),{type:"primary",onClick:l},{default:ut(function(){return t[5]||(t[5]=[pt("Upload")])}),_:1,__:[5]})])]}),_:1},8,["show"])}}}),aa=i({__name:"MglDrawer",props:{show:{type:Boolean,default:!1},showModifiers:{}},emits:at(["update:width","click","contextmenu"],["update:show"]),setup:function(e,t){var n=t.emit;bt(function(e){return{"35e21170":l.value,"3d7df430":ct(o).modalColor,"06469490":ct(o).borderRadius,"160a12b3":s.value}});var r=n,o=br(),i=gt("route-drawer"),a=X(function(){var e,t,n,r;return Math.min(ln(Math.round(.4*(null!==(e=null===(t=i.value)||void 0===t||null===(t=t.parentElement)||void 0===t?void 0:t.clientWidth)&&void 0!==e?e:2e3)),320,640),(null!==(n=null===(r=i.value)||void 0===r||null===(r=r.parentElement)||void 0===r?void 0:r.clientWidth)&&void 0!==n?n:1/0)-48)}),s=X(function(){return"".concat(-16-a.value,"px")}),l=X(function(){return"".concat(a.value,"px")}),c=st(e,"show");return $(a,function(){return r("update:width",a.value)}),function(e,t){return u(),lt(Fe,{name:"slide"},{default:ut(function(){return[yt(d("div",{class:"route-drawer",ref:"route-drawer",onClick:t[0]||(t[0]=function(e){return r("click",e)}),onContextmenu:t[1]||(t[1]=function(e){return r("contextmenu",e)})},[Qe(e.$slots,"default",{},void 0,!0)],544),[[mt,c.value]])]}),_:3})}}}),sa=xt(aa,[["__scopeId","data-v-802be7eb"]]),la={class:"menu-list"},ua=["onClick","onContextmenu","onTouchstart"],ca={class:"swipe-container"},da={style:{height:"fit-content",padding:"8px 12px"}},ha=["onClick"],pa={style:{padding:"16px"}},fa=i({__name:"SelectableSwipeableMenuList",props:at({items:{},menuOptions:{},swipeActions:{}},{selection:{type:String,default:null},selectionModifiers:{},multipleSelection:{type:Array,default:function(){return[]}},multipleSelectionModifiers:{}}),emits:at(["contextmenu"],["update:selection","update:multipleSelection"]),setup:function(t,n){var r=n.emit;bt(function(e){return{"02e6e1c6":ct(c).hoverColor,"0b0dd600":ct(c).primaryColor,"76bd1e7c":ct(c).bodyColor,f41feeae:h.value}});var o=t,i=st(t,"selection"),a=st(t,"multipleSelection"),l=r,c=br(),h=q("0s"),p=q({startX:0,delta:0,currentX:0,containerWidth:0,activeId:null,leftMax:0,rightMax:0}),f=q(!1),v=q(0),g=q(0),y=q(null);function m(e){p.value.activeId&&(p.value.currentX=e.touches[0].clientX,p.value.delta+=p.value.currentX-p.value.startX,p.value.delta=ln(p.value.delta,-p.value.leftMax,p.value.rightMax),p.value.startX=e.touches[0].clientX)}function b(){if(p.value.activeId){h.value="".concat(Math.abs(p.value.delta)/p.value.containerWidth*.3,"s"),setTimeout(function(){h.value="0s"},300);var e=p.value.delta<0?p.value.leftMax:p.value.rightMax;p.value.delta=Math.abs(p.value.delta)>.4*e?Math.sign(p.value.delta)*e:0,0===p.value.delta&&Math.abs(p.value.delta)}}function x(){p.value.delta>0||(p.value={startX:0,delta:0,currentX:0,containerWidth:0,activeId:null,leftMax:0,rightMax:0})}return function(t,n){return u(),s(ne,null,[d("div",la,[(u(!0),s(ne,null,wt(o.items,function(n){return u(),s("div",{key:n.id,onClick:function(e){return function(e,t){e.stopPropagation(),p.value.delta>5||(x(),i.value!==t.id&&(i.value=t.id),console.log(i.value))}(e,n)},onContextmenu:St(function(e){return function(e,t){e.stopPropagation(),e.preventDefault(),f.value?f.value=!1:(y.value=t,v.value=e.clientX,g.value=e.clientY,f.value=!0,l("contextmenu",e,t))}(e,n)},["prevent"]),onTouchstart:function(e){return function(e,t){var n;p.value.activeId!==t&&x();var r=e.touches[0];p.value={startX:r.clientX,delta:null!==(n=p.value.delta)&&void 0!==n?n:0,currentX:r.clientX,containerWidth:e.currentTarget.offsetWidth,activeId:t,leftMax:120,rightMax:40}}(e,n.id)},onTouchmove:m,onTouchend:b,class:Pt(["menu-list-item"].concat(e(n.id===i.value?["active"]:[]))),style:Ct({"touch-action":p.value.activeId===n.id?"pan-y":"auto"})},[d("div",ca,[d("div",{class:"content-col",style:Ct({transform:"translateX(".concat(p.value.activeId===n.id||p.value.delta>0?p.value.delta:0,"px)"),willChange:p.value.activeId===n.id?"transform":"auto",flexDirection:p.value.delta>=0||p.value.activeId!==n.id?"row":"row-reverse"})},[Qe(t.$slots,"item",{item:n},function(){var e;return[d("div",da,[d("div",null,vt(null!==(e=n.name)&&void 0!==e?e:"Untitled"),1)])]},!0)],4),d("div",{class:"actions-col",style:Ct({width:"".concat(p.value.activeId===n.id&&p.value.delta<0?-p.value.delta:0,"px"),visibility:p.value.activeId===n.id&&p.value.delta<0?"visible":"hidden",willChange:p.value.activeId===n.id?"width":"auto"})},[(u(!0),s(ne,null,wt(o.swipeActions,function(e){return u(),s("button",{key:e.name,class:"menu-action",onClick:function(){e.action(n.id),p.value.activeId=null},style:Ct({background:e.color||ct(c).primaryColorSuppl})},vt(e.label),13,ha)}),128))],4),d("div",{class:"select-col",style:Ct({width:"".concat(p.value.delta>0?p.value.delta:0,"px"),backgroundColor:i.value===n.id?ct(c).primaryColor:"transparent",visibility:p.value.delta>0?"visible":"hidden"})},[d("div",pa,[ht(ct(Rn),{checked:a.value.includes(n.id),"onUpdate:checked":function(){return function(t){var n=e(a.value);if(n.includes(t)){var r=n.indexOf(t);n.splice(r,1)}else n.push(t);a.value=n}(n.id)},style:Ct({border:i.value===n.id?"1px solid ".concat(ct(c).bodyColor):"none",BorderRadius:i.value===n.id?ct(c).borderRadiusSmall:"none"})},null,8,["checked","onUpdate:checked","style"])])],4)])],46,ua)}),128))]),ht(ct(kt),{show:f.value,x:v.value,y:g.value,options:o.menuOptions,onClickoutside:n[0]||(n[0]=function(e){return f.value=!1}),placement:"bottom-start",trigger:"manual"},null,8,["show","x","y","options"])],64)}}}),va=xt(fa,[["__scopeId","data-v-5279dfbe"]]),ga={class:"p-4",style:{height:"100%"}},ya={style:{width:"100%",display:"flex","justify-content":"space-between"}},ma={class:"text-lg font-bold mb-4"},ba={style:{height:"fit-content",padding:"8px 12px","text-align":"left"}},xa=i({__name:"TrackerViewRouteDrawer",props:{show:{type:Boolean,default:!1},showModifiers:{}},emits:at(["update:width"],["update:show"]),setup:function(e,t){var n=t.emit;bt(function(e){return{"6e756f52":ct(l).borderRadius,d070c80a:ct(l).hoverColor,ca4aff26:ct(l).primaryColorPressed,"4bd7d416":ct(l).primaryColor,"66561bed":ct(l).bodyColor}});var r=Mt().t,o=function(){var e=Q(Me,null);return null===e&&Se("use-dialog","No outer <n-dialog-provider /> founded."),e}(),i=n,a=ta(),l=br(),c=st(e,"show"),p=q(!1),v=q(0),g=q(0),m=q(null),b=q(!1),x=q(""),w=q(null),k=[{label:X(function(){return r("components.trackerViewRouteDrawer.contextMenu.new")}),key:"new",props:{onClick:function(){p.value=!1,a.addRoute({name:r("components.trackerViewRouteDrawer.nameNewRoute"),points:[]})}}}],C=[{label:X(function(){return r("components.trackerViewRouteDrawer.contextMenu.rename")}),key:"rename",props:{onClick:function(){var e;null!==(e=m.value)&&void 0!==e&&e.id&&(x.value=m.value.name||"",b.value=!0)}}},{label:X(function(){return r("components.trackerViewRouteDrawer.contextMenu.delete")}),key:"delete",props:{onClick:function(){m.value&&a.deleteRoute(m.value.id)}}},{key:"divider-1",type:"divider"}].concat(k),P=[{label:X(function(){return r("components.trackerViewRouteDrawer.contextMenu.rename")}),name:"rename",action:function(e){var t=a.routes.find(function(t){return t.id===e});w.value=e,x.value=(null==t?void 0:t.name)||"",b.value=!0}},{label:X(function(){return r("components.trackerViewRouteDrawer.contextMenu.delete")}),name:"delete",action:function(e){return a.deleteRoute(e)},color:l.value.errorColorSuppl}];function S(e){return M.apply(this,arguments)}function M(){return(M=h(y().m(function e(t){return y().w(function(e){for(;;)switch(e.n){case 0:if(!x.value.trim()){e.n=2;break}return e.n=1,a.updateRoute(t,{name:x.value.trim()});case 1:b.value=!1;case 2:return e.a(2)}},e)}))).apply(this,arguments)}var _=q([]);function I(){o.warning({title:r("components.trackerViewRouteDrawer.deleteConfirmation.title"),content:r("components.trackerViewRouteDrawer.deleteConfirmation.prompt"),positiveText:r("components.trackerViewRouteDrawer.deleteConfirmation.yes"),negativeText:r("components.trackerViewRouteDrawer.deleteConfirmation.no"),onPositiveClick:function(){_.value.forEach(function(e){a.deleteRoute(e),_.value=_.value.filter(function(t){return t!==e})})}})}return function(e,t){return u(),s(ne,null,[ht(sa,{show:c.value,"onUpdate:show":t[3]||(t[3]=function(e){return c.value=e}),onClick:t[4]||(t[4]=function(){return ct(a).currentRouteId=null}),"onUpdate:width":t[5]||(t[5]=function(e){return i("update:width",e)}),onContextmenu:t[6]||(t[6]=function(e){return function(e){e.stopPropagation(),e.preventDefault(),w.value=a.currentRouteId,p.value?p.value=!1:(v.value=e.clientX,g.value=e.clientY,p.value=!0)}(e)})},{default:ut(function(){return[d("div",ga,[d("div",ya,[d("p",ma,vt(ct(r)("components.trackerViewRouteDrawer.routes")),1),_.value.length>0?(u(),lt(ct(Te),{key:0,strong:"",secondary:"",circle:"",type:"error",onClick:I},{icon:ut(function(){return[ht(ct(_t),{component:ct(on)},null,8,["component"])]}),_:1})):Ke("",!0)]),ht(va,{items:ct(a).routes,selection:ct(a).currentRouteId,"onUpdate:selection":t[0]||(t[0]=function(e){return ct(a).currentRouteId=e}),"multiple-selection":_.value,"onUpdate:multipleSelection":t[1]||(t[1]=function(e){return _.value=e}),"menu-options":C,"swipe-actions":P,onContextmenu:t[2]||(t[2]=function(e,t){var n;w.value=null!==(n=null==t?void 0:t.id)&&void 0!==n?n:null,m.value=null!=t?t:null})},{item:ut(function(e){var t,n=e.item;return[d("div",ba,[d("div",null,vt(null!==(t=n.name)&&void 0!==t?t:ct(r)("components.trackerViewRouteDrawer.nameNewRoute")),1),d("div",null,vt(ct(r)("components.trackerViewRouteDrawer.points",{num:n.points.length})),1)])]}),_:1},8,["items","selection","multiple-selection"])])]}),_:1},8,["show"]),ht(ct(kt),{show:p.value,x:v.value,y:g.value,options:k.map(function(e){return f(f({},e),{},{label:e.label.value})}),onClickoutside:t[7]||(t[7]=function(e){return p.value=!1}),placement:"bottom-start",trigger:"manual"},null,8,["show","x","y","options"]),ht(ct(dt),{preset:"dialog",show:b.value,"onUpdate:show":t[10]||(t[10]=function(e){return b.value=e}),title:"Rename Route","positive-text":"Save","negative-text":"Cancel",onPositiveClick:t[11]||(t[11]=function(){w.value&&S(w.value)})},{default:ut(function(){return[ht(ct(_n),{value:x.value,"onUpdate:value":t[8]||(t[8]=function(e){return x.value=e}),placeholder:"Enter new route name",onKeyup:t[9]||(t[9]=It(function(){w.value&&S(w.value)},["enter"]))},null,8,["value"])]}),_:1},8,["show"])],64)}}}),wa=xt(xa,[["__scopeId","data-v-10239541"]]),ka={style:{width:"100%",height:"100%",position:"relative",overflow:"hidden"}},Ca={key:0,style:{width:"100%",height:"100%"}},Pa=["title","onClick"],Sa=["title"],Ma={key:1,style:{width:"100%",height:"100%",display:"grid","place-content":"center"}},_a=i({__name:"TrackerView",setup:function(e){var t=Dt(),n=Fn(),r=Q("geolocation"),o=Mt().t,i=Mt(),a=q(7),l="https://api.maptiler.com/maps/basic-v2/style.json?key=".concat("dCeXFrS9lgSF8hm5C6nm"),c=q({latitude:0,longitude:0}),p=Xe(null),f=Xe(null),v=q("select"),g=q(!1),m=ta(),b=X(function(){if(!m.currentRouteId)return[];var e=m.routes.find(function(e){return e.id===m.currentRouteId});return(null==e?void 0:e.points)||[]}),x=q(!1),w=new Ye.Marker,k=X(function(){if(b.value.length>1||0===b.value.length)return w.remove(),{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:b.value.map(function(e){return[e.longitude,e.latitude]})}}]};if(1===b.value.length){w.setLngLat([b.value[0].longitude,b.value[0].latitude]);var e=p.value;e&&w.addTo(e)}return{type:"FeatureCollection",features:[]}}),C=[{mode:new ti,name:o("trackerView.terraDrawTools.point"),icon:Zt},{mode:new Qo,name:o("trackerView.terraDrawTools.line"),icon:Kt},{mode:new ki({allowManualDeselection:!0,flags:{point:{feature:{draggable:!0}},polygon:{feature:{draggable:!0,coordinates:{midpoints:!0,draggable:!0,deletable:!0}}},linestring:{feature:{draggable:!0,coordinates:{midpoints:!0,draggable:!0,deletable:!0}}},freehand:{feature:{draggable:!0,coordinates:{midpoints:!0,draggable:!0,deletable:!0}}},circle:{feature:{draggable:!0,coordinates:{midpoints:!0,draggable:!0,deletable:!0}}},rectangle:{feature:{draggable:!0,coordinates:{midpoints:!0,draggable:!0,deletable:!0}}}}}),name:o("trackerView.terraDrawTools.select"),icon:Ht}];$([function(){return t.settings.mapLanguage},function(){return i.locale.value}],function(e){e&&p.value&&P(p.value,"interface"===e[0]?e[1]:e[0])});var P=function(e,t){for(var n="zh-CN"===t?"zh":"en",r=0,o=["City labels","Road labels","Station labels","Airport labels","Continent labels","Country labels"];r<o.length;r++){var i=o[r];e.setLayoutProperty(i,"text-field",["get","name:".concat(n)])}};function S(e){var t;p.value=e.map,p.value&&P(p.value,i.locale.value),null===(t=p.value)||void 0===t||t.on("click",function(){O.value=!1}),f.value=new Xi({adapter:new Hi({map:p.value}),modes:C.map(function(e){return e.mode})}),f.value.start()}var M=-1;function _(){return I.apply(this,arguments)}function I(){return(I=h(y().m(function e(){var t,n;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,g.value=!g.value,!g.value){e.n=4;break}if(m.currentRouteId){e.n=2;break}return e.n=1,m.addRoute({points:[r.presentLocation],name:o("trackerView.nameNewRoute")});case 1:t=e.v,L(),m.currentRouteId=t.id,e.n=3;break;case 2:return e.n=3,m.addPointToRoute(m.currentRouteId,r.presentLocation);case 3:M=r.addListener(function(e){m.addPointToRoute(m.currentRouteId,e)}),e.n=5;break;case 4:-1!==M&&(r.removeListener(M),g.value=!1,M=-1);case 5:e.n=7;break;case 6:e.p=6,n=e.v,console.error(n);case 7:return e.a(2)}},e,null,[[0,6]])}))).apply(this,arguments)}function D(){return B.apply(this,arguments)}function B(){return(B=h(y().m(function e(){return y().w(function(e){for(;;)switch(e.n){case 0:na(JSON.stringify(k.value),"application/json","tracked-path-export");case 1:return e.a(2)}},e)}))).apply(this,arguments)}var R=q(function(){var e=h(y().m(function e(t){return y().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}));return function(t){return e.apply(this,arguments)}}());function F(){new Promise(function(){var e=h(y().m(function e(t,n){return y().w(function(e){for(;;)switch(e.n){case 0:R.value=function(){var e=h(y().m(function e(r){return y().w(function(e){for(;;)switch(e.n){case 0:0===r.length?n(new Error("No file selected")):t(r);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),x.value=!0;case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()).then(function(e){var t=JSON.parse(e[0]).features[0].geometry.coordinates.map(function(e){return{latitude:e[1],longitude:e[0]}});m.addRoute({points:t,name:o("trackerView.nameNewlyImportedRoute")}).then(L)}).catch(function(e){n.error(e)})}var E=q(0),O=q(!1);$(O,function(e){var t;return null===(t=p.value)||void 0===t?void 0:t.easeTo({padding:{left:e?E.value:0},duration:500})});var j=function(){return O.value=!O.value},z=q(!1),L=function(){z.value||(z.value=!0,setTimeout(function(){z.value=!1},3e3))},T=q(""),A=q(!1);return de(h(y().m(function e(){var t,i,a;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r.refresh();case 1:c.value=e.v,r.usingGPS||n.warning(o("trackerView.gpsWarning"),{duration:5e3}),e.n=3;break;case 2:e.p=2,a=e.v,T.value=null!==(i=a.message)&&void 0!==i?i:String(a);case 3:return A.value=!0,e.n=4,Bt();case 4:return e.n=5,m.init();case 5:null===(t=f.value)||void 0===t||t.start();case 6:return e.a(2)}},e,null,[[0,2]])}))),function(e,t){return u(),s("div",ka,[ht(ct(Rt),{class:"map-layout","content-style":"padding: 0;",hoverable:""},{default:ut(function(){return[ht(Fe,{name:"map-load"},{default:ut(function(){return[A.value&&!T.value?(u(),s("div",Ca,[ht(ct(Or),{"map-style":l,center:[c.value.longitude,c.value.latitude],zoom:a.value,height:"100%","onMap:load":S},{default:ut(function(){return[ht(ct(Wr),{position:"top-left"}),ct(r).usingGPS?(u(),lt(ct(Ar),{key:0,position:"top-left","track-user-location":!0})):Ke("",!0),ht(ct(Tr),{position:"top-left"}),ht(ct(Vr),{position:"bottom-left"}),ht(ct(Lr),{position:"top-right"},{default:ut(function(){return[(u(),s(ne,null,wt(C,function(e){return d("button",{key:e.name,class:Pt(["!flex justify-center items-center",e.mode.mode===v.value?"!bg-blue-200 rounded-sm transition-colors":""]),title:e.name,onClick:function(){var t,n,r;(console.log("activeDrawMethod",v.value),v.value===e.mode.mode)?(null===(t=f.value)||void 0===t||t.setMode("select"),v.value="select"):(v.value=e.mode.mode,null===(n=f.value)||void 0===n||n.start(),null===(r=f.value)||void 0===r||r.setMode(e.mode.mode))}},[ht(ct(qi),{size:20},{default:ut(function(){return[(u(),lt(ft(e.icon),{class:"stroke-stone-800 text-stone-800"}))]}),_:2},1024)],10,Pa)}),64))]}),_:1}),ht(ct(Lr),{position:"bottom-left"},{default:ut(function(){return[ht(ct(Ft),{trigger:"manual",show:z.value},{trigger:ut(function(){return[d("button",{class:Pt("!flex justify-center items-center transition-all hover:rounded-sm stroke-sky-800 fill-sky-700 text-sky-800"),onClick:j},[ht(ct(qi),{size:24},{default:ut(function(){return[ht(ct(en))]}),_:1})])]}),default:ut(function(){return[d("span",null,vt(ct(o)("trackerView.uiRouteCheckoutTip")),1)]}),_:1},8,["show"])]}),_:1}),ht(ct(Lr),{position:"top-right"},{default:ut(function(){return[d("button",{class:Pt(["!flex justify-center items-center transition-all hover:rounded-sm",g.value?"hover:!bg-red-700 hover:stroke-white hover:text-white stroke-red-700 fill-red-600 text-red-700":"stroke-sky-800 fill-sky-700 text-sky-800"]),title:g.value?ct(o)("trackerView.uiRecordingStatus.on"):ct(o)("trackerView.uiRecordingStatus.off"),onClick:_},[ht(ct(qi),{size:20},{default:ut(function(){return[(u(),lt(ft(g.value?ct(nn):ct($t)),{size:g.value?16:20,class:"stroke-inherit text-inherit"},null,8,["size"]))]}),_:1})],10,Sa),b.value.length>0&&!g.value?(u(),s("button",{key:0,class:"stroke-red-700 text-red-700 hover:!bg-red-700 hover:stroke-white hover:text-white hover:rounded-sm transition-all !flex justify-center items-center",onClick:t[0]||(t[0]=function(e){return ct(m).currentRouteId&&ct(m).updateRoute(ct(m).currentRouteId,{points:[]})})},[ht(ct(qi),{size:20},{default:ut(function(){return[ht(ct(Ut),{class:"stroke-inherit text-inherit",style:{transform:"translateX(-1.3px)"},size:"20"})]}),_:1})])):Ke("",!0),b.value.length>0&&!g.value?(u(),s("button",{key:1,class:"!flex justify-center items-center",onClick:D},[ht(ct(qi),{size:20},{default:ut(function(){return[ht(ct(Gt),{class:"stroke-stone-800 text-stone-800",size:"20"})]}),_:1})])):Ke("",!0),0!==b.value.length||g.value?Ke("",!0):(u(),s("button",{key:2,class:"!flex justify-center items-center",onClick:F},[ht(ct(qi),{size:20},{default:ut(function(){return[ht(ct(sn),{class:"stroke-stone-800 text-stone-800",size:"20"})]}),_:1})]))]}),_:1}),ht(ct(Yr),{"source-id":"geojson",data:k.value},{default:ut(function(){return[ht(ct(Qr),{"layer-id":"geojson",layout:{"line-join":"round","line-cap":"round"},paint:{"line-width":5,"line-color":"#008800","line-opacity":.8}})]}),_:1},8,["data"])]}),_:1},8,["center","zoom"])])):(u(),s("div",Ma,[T.value?(u(),lt(ct(bn),{key:1,title:ct(o)("app.error"),type:"error"},{default:ut(function(){return[d("div",null,[t[4]||(t[4]=d("br",null,null,-1)),d("b",null,vt(ct(o)("app.error"))+": ",1),t[5]||(t[5]=d("br",null,null,-1)),d("code",null,vt(T.value),1)])]}),_:1},8,["title"])):(u(),lt(ct(Xn),{key:0,size:"large"},{description:ut(function(){return[ht(ct(Et),null,{default:ut(function(){return[pt(vt(ct(o)("trackerView.locationLoading")),1)]}),_:1})]}),_:1}))]))]}),_:1})]}),_:1}),ht(ia,{show:x.value,"onUpdate:show":t[1]||(t[1]=function(e){return x.value=e}),types:["application/json","text/plain"],onConfirm:ct(R)},null,8,["show","onConfirm"]),ht(wa,{show:O.value,"onUpdate:show":t[2]||(t[2]=function(e){return O.value=e}),"onUpdate:width":t[3]||(t[3]=function(e){return E.value=e})},null,8,["show"])])}}});n("default",xt(_a,[["__scopeId","data-v-c3e17e79"]]))}}})}();
