var k=Object.defineProperty;var P=(s,e,t)=>e in s?k(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var c=(s,e,t)=>P(s,typeof e!="symbol"?e+"":e,t);import{u as B,M,I as w,B as _,N as y}from"./map-manager-BvmZqViI.js";import{d as v,o as f,c as x,ab as p,r as b,b as z,ag as C,ah as i,ad as d,a as u,am as I,au as T}from"./index-RYRiCSOH.js";import{N as $}from"./Element-D0ANQ4jE.js";const D={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},E=p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 112v288"},null,-1),N=p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),V=[E,N],Z=v({name:"Add",render:function(e,t){return f(),x("svg",D,V)}}),L={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},R=p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),H=[R],O=v({name:"Remove",render:function(e,t){return f(),x("svg",L,H)}}),S=["id"],j={class:"nav-toolbox"},F=v({__name:"BingMapView",props:{plugin:{},centre:{},viewCentre:{},tracking:{type:Boolean},mapType:{},zoom:{},liteMode:{type:Boolean},forceHiDPI:{type:Boolean},customizedTouchpadBehavior:{type:Boolean},enableInertia:{type:Boolean},showDashboard:{type:Boolean}},emits:["ready","update:zoom","update:centre","update:viewCentre","update:mapType"],setup(s,{emit:e}){let t=b(24);const o=B(),n={info:(h,r)=>o.info(h,{duration:r}),warning:(h,r)=>o.warning(h,{duration:r}),error:(h,r)=>o.error(h,{duration:r})},l=s,m=e,a=new M(l,m,n,"bing");return z(()=>{a.mount(),a.trackingMode.value=!!l.tracking}),(h,r)=>(f(),C(i($),{class:"container"},{default:d(()=>[p("div",{id:i(a).id,class:"bing-map-container"},null,8,S),p("div",j,[u(i(_),{strong:"",secondary:"",circle:"",type:"primary",onClick:r[0]||(r[0]=g=>i(a).zoom.value+=1)},{default:d(()=>[u(i(w),{size:i(t)},{default:d(()=>[u(i(Z))]),_:1},8,["size"])]),_:1}),u(i(_),{strong:"",secondary:"",circle:"",type:"primary",onClick:r[1]||(r[1]=g=>i(a).zoom.value-=1)},{default:d(()=>[u(i(w),{size:i(t)},{default:d(()=>[u(i(O))]),_:1},8,["size"])]),_:1}),u(i(y),{value:i(a).trackingMode.value,"onUpdate:value":r[2]||(r[2]=g=>i(a).trackingMode.value=g),size:"small"},null,8,["value"])])]),_:1}))}}),X=I(F,[["__scopeId","data-v-36f17cb0"]]);class q{constructor(e){c(this,"host");c(this,"space","pushPinLayer");c(this,"pushPins",[]);this.host=e}mount(){return this.host.plugins[this.space]=this,!0}unmount(){try{this.host.plugins[this.space]=null,this.pushPins.forEach(e=>this.host.map.entities.remove(e.pin))}catch(e){return console.log(e),!1}return!0}add(e,t){const o=this.pushPins.length>0?this.pushPins[this.pushPins.length-1].id+1:0,n=new Microsoft.Maps.Pushpin(e,t);return this.host.map.entities.push(n),this.pushPins.push({id:o,pin:n}),o}remove(e){const t=this.pushPins.findIndex(o=>o.id===e);t!==-1&&(this.host.map.entities.remove(this.pushPins[t].pin),this.pushPins.splice(t,1))}setOptions(e,t){const o=this.pushPins.findIndex(n=>n.id===e);o!==-1&&this.pushPins[o].pin.setOptions(t)}setLocation(e,t){const o=this.pushPins.findIndex(n=>n.id===e);o!==-1&&this.pushPins[o].pin.setLocation(t)}}class G{constructor(e){c(this,"host");c(this,"space");c(this,"behaviour");this.host=e,this.space="customizedTouchpadBehavior"}mount(){return this.host.map.setOptions({disableScrollWheelZoom:!0}),this.behaviour=A(this.host,(e,t)=>{this.host.setViewPort({centre:e,zoom:t})}),this.host.container.addEventListener("wheel",this.behaviour,{passive:!1}),!0}unmount(){return this.host.map.setOptions({disableScrollWheelZoom:!1}),this.behaviour&&this.host.container.removeEventListener("wheel",this.behaviour),!0}}function A(s,e){const t=s.properties.liteModeForceHiDPI?window.devicePixelRatio:1,o=[5e3,2500,1e3,500,250,200,100,50,25,10,5,2,1,.4,.25,.2,.15,.12,.05,.025,.01];return n=>{T.updateDeivceType(n),n.preventDefault();const l=s.getZoom(),m=5e3/o[Math.round(l)]||1,a={...s.getViewCentre()};if(!(n.ctrlKey||n.metaKey))a.latitude=Math.max(-90,Math.min(90,a.latitude-n.deltaY*t/m)),a.longitude=(a.longitude+n.deltaX*t/m+180)%360-180,e(a,l);else{const h=Math.min(Math.max(l-n.deltaY*.05,s.getZoomRange().min),s.getZoomRange().max);e(a,h)}}}export{X as B,q as a,G as b};
