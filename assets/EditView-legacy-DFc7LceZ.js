!function(){function e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return n};var e,n={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),s=new j(r||[]);return i(a,"_invoke",{value:E(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var p="suspendedStart",v="suspendedYield",m="executing",g="completed",y={};function b(){}function w(){}function k(){}var x={};d(x,c,(function(){return this}));var S=Object.getPrototypeOf,C=S&&S(S(P([])));C&&C!==r&&o.call(C,c)&&(x=C);var _=k.prototype=b.prototype=Object.create(x);function z(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(r,i,a,c){var u=h(e[r],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==s(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}var r;i(this,"_invoke",{value:function(e,o){function i(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(i,i):i()}})}function E(t,n,r){var o=p;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=R(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=h(t,n,r);if("normal"===u.type){if(o=r.done?g:v,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function R(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=k,i(_,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:w,configurable:!0}),w.displayName=d(k,l,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,d(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},n.awrap=function(e){return{__await:e}},z(I.prototype),d(I.prototype,u,(function(){return this})),n.AsyncIterator=I,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var a=new I(f(e,t,r,o),i);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},z(_),d(_,l,"Generator"),d(_,c,(function(){return this})),d(_,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=P,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},n}function n(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function s(e){n(a,o,i,s,c,"next",e)}function c(e){n(a,o,i,s,c,"throw",e)}s(void 0)}))}}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t,n){return t=l(t),function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}System.register(["./index-legacy-Dmi4D3ds.js","./customized-touchpad-behavior-legacy-BRe1fOR6.js","./map-manager-legacy-Cqu5szG7.js","./Element-legacy-D8miMJ1T.js","./Card-legacy-fTfZNVbE.js"],(function(n,i){"use strict";var a,u,l,h,m,g,y,b,w,k,x,S,C,_,z,I,E,R,O,D,j,P,M,B,N,T,A,L,F,H,U,W,G,q,X,Y,J,K,V,$,Q,Z,ee,te,ne,re,oe,ie,ae,se,ce,ue,le,de,fe,he,pe,ve,me,ge,ye,be,we,ke,xe,Se,Ce,_e,ze,Ie,Ee,Re,Oe,De,je,Pe,Me,Be,Ne,Te,Ae,Le,Fe,He,Ue,We,Ge,qe,Xe,Ye,Je,Ke,Ve,$e,Qe,Ze,et,tt,nt;return{setters:[function(e){a=e.r,u=e.b,l=e.w,h=e.e,m=e.f,g=e.S,y=e.i,b=e.g,w=e.h,k=e.j,x=e.k,S=e.l,C=e.m,_=e.d,z=e.n,I=e.p,E=e.q,R=e.s,O=e.t,D=e.v,j=e.x,P=e.y,M=e.z,B=e.N,N=e.A,T=e.B,A=e.C,L=e.D,F=e.E,H=e.F,U=e.G,W=e.H,G=e.I,q=e.J,X=e.K,Y=e.L,J=e.T,K=e.M,V=e.O,$=e.P,Q=e.Q,Z=e.R,ee=e.U,te=e.V,ne=e.W,re=e.X,oe=e.Y,ie=e.Z,ae=e._,se=e.$,ce=e.a0,ue=e.a1,le=e.a2,de=e.a3,fe=e.a4,he=e.a5,pe=e.a6,ve=e.a7,me=e.a8,ge=e.a9,ye=e.aa,be=e.ab,we=e.ac,ke=e.ad,xe=e.ae,Se=e.o,Ce=e.c,_e=e.af,ze=e.ag,Ie=e.a,Ee=e.ah,Re=e.ai,Oe=e.aj,De=e.ak,je=e.al,Pe=e.am,Me=e.an,Be=e.ao,Ne=e.ap,Te=e.aq,Ae=e.ar,Le=e.as,Fe=e.at,He=e.au,Ue=e.av,We=e.aw,Ge=e.ax,qe=e.ay},function(e){Xe=e.a,Ye=e.b,Je=e.u,Ke=e.B},function(e){Ve=e.b,$e=e.B,Qe=e.c,Ze=e.g},function(e){et=e.i},function(e){tt=e.u,nt=e.N}],execute:function(){var i=document.createElement("style");i.textContent=".container[data-v-f96e4745],.select-listview[data-v-f96e4745]{width:100%;height:100%}.route-edit-tool-tip{grid-row:1 / 1;grid-column:1 / 1;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:left;align-items:center;padding:0 0 0 8px!important}.map-container[data-v-47681c83]{width:calc(100% - 16px);height:calc(100% - 16px);margin:8px;padding:0}.edit-layout[data-v-47681c83]{max-height:100%;overflow-y:hidden;display:grid;grid-template-columns:1fr;grid-template-rows:3em auto;grid-gap:8px;width:calc(100% - 16px);height:calc(100% - 16px);margin:8px}.tool-tip-item[data-v-47681c83]{height:2em;width:2em;border-radius:4px;transition:background-color,.2s;display:flex;justify-content:center;align-items:center}.tool-tip-item[data-v-47681c83]:hover{background-color:rgba(128,128,128,.3)}.tool-tip-item[data-v-47681c83]:active{background-color:rgba(128,128,128,.5)}.draft-container[data-v-47681c83]{grid-row:2 / 2;grid-column:1 / 1;overflow-y:auto}\n",document.head.appendChild(i);var rt=new WeakSet;var ot=0,it="",at="",st="",ct="",ut=a("0px");var lt=a(!1);function dt(){lt.value=!0}function ft(){lt.value=!1}var ht=0;function pt(){return et&&(m((function(){ht||(window.addEventListener("compositionstart",dt),window.addEventListener("compositionend",ft)),ht++})),h((function(){ht<=1?(window.removeEventListener("compositionstart",dt),window.removeEventListener("compositionend",ft),ht=0):ht--}))),lt}function vt(e){return e!=e}function mt(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n){for(var r=e.length,o=n+-1;++o<r;)if(t(e[o],o,e))return o;return-1}(e,vt,n)}(e,t,0)>-1}var gt=g?g.isConcatSpreadable:void 0;function yt(e){return y(e)||b(e)||!!(gt&&e&&e[gt])}var bt=S((function(e,t){return C(e)?function(e,t,n,r){var o=-1,i=mt,a=!0,s=e.length,c=[],u=t.length;if(!s)return c;t.length>=200&&(i=x,a=!1,t=new k(t));e:for(;++o<s;){var l=e[o],d=l;if(l=0!==l?l:0,a&&d==d){for(var f=u;f--;)if(t[f]===d)continue e;c.push(l)}else i(t,d,r)||c.push(l)}return c}(e,function(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=yt),o||(o=[]);++i<a;){var s=e[i];n(s)&&w(o,s)}return o}(t,0,C)):[]})),wt=_({name:"Empty",render:function(){return z("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},z("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),z("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),kt=I("empty","\n display: flex;\n flex-direction: column;\n align-items: center;\n font-size: var(--n-font-size);\n",[E("icon","\n width: var(--n-icon-size);\n height: var(--n-icon-size);\n font-size: var(--n-icon-size);\n line-height: var(--n-icon-size);\n color: var(--n-icon-color);\n transition:\n color .3s var(--n-bezier);\n ",[R("+",[E("description","\n margin-top: 8px;\n ")])]),E("description","\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n "),E("extra","\n text-align: center;\n transition: color .3s var(--n-bezier);\n margin-top: 12px;\n color: var(--n-extra-text-color);\n ")]),xt=Object.assign(Object.assign({},D.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),St=_({name:"Empty",props:xt,setup:function(e){var t=O(e),n=t.mergedClsPrefixRef,r=t.inlineThemeDisabled,o=D("Empty","-empty",kt,N,e,n),i=tt("Empty").localeRef,a=j(T,null),s=P((function(){var t,n,r;return null!==(t=e.description)&&void 0!==t?t:null===(r=null===(n=null==a?void 0:a.mergedComponentPropsRef.value)||void 0===n?void 0:n.Empty)||void 0===r?void 0:r.description})),c=P((function(){var e,t;return(null===(t=null===(e=null==a?void 0:a.mergedComponentPropsRef.value)||void 0===e?void 0:e.Empty)||void 0===t?void 0:t.renderIcon)||function(){return z(wt,null)}})),u=P((function(){var t=e.size,n=o.value,r=n.common.cubicBezierEaseInOut,i=n.self;return{"--n-icon-size":i[A("iconSize",t)],"--n-font-size":i[A("fontSize",t)],"--n-bezier":r,"--n-text-color":i.textColor,"--n-icon-color":i.iconColor,"--n-extra-text-color":i.extraTextColor}})),l=r?M("empty",P((function(){var t="";return t+=e.size[0]})),u,e):void 0;return{mergedClsPrefix:n,mergedRenderIcon:c,localizedDescription:P((function(){return s.value||i.value.description})),cssVars:r?void 0:u,themeClass:null==l?void 0:l.themeClass,onRender:null==l?void 0:l.onRender}},render:function(){var e=this.$slots,t=this.mergedClsPrefix,n=this.onRender;return null==n||n(),z("div",{class:["".concat(t,"-empty"),this.themeClass],style:this.cssVars},this.showIcon?z("div",{class:"".concat(t,"-empty__icon")},e.icon?e.icon():z(B,{clsPrefix:t},{default:this.mergedRenderIcon})):null,this.showDescription?z("div",{class:"".concat(t,"-empty__description")},e.default?e.default():this.localizedDescription):null,e.extra?z("div",{class:"".concat(t,"-empty__extra")},e.extra()):null)}}),Ct="0!important",_t="-1px!important";function zt(e){return F("".concat(e,"-type"),[R("& +",[I("button",{},[F("".concat(e,"-type"),[E("border",{borderLeftWidth:Ct}),E("state-border",{left:_t})])])])])}function It(e){return F("".concat(e,"-type"),[R("& +",[I("button",[F("".concat(e,"-type"),[E("border",{borderTopWidth:Ct}),E("state-border",{top:_t})])])])])}var Et=I("button-group","\n flex-wrap: nowrap;\n display: inline-flex;\n position: relative;\n",[L("vertical",{flexDirection:"row"},[L("rtl",[I("button",[R("&:first-child:not(:last-child)","\n margin-right: ".concat(Ct,";\n border-top-right-radius: ").concat(Ct,";\n border-bottom-right-radius: ").concat(Ct,";\n ")),R("&:last-child:not(:first-child)","\n margin-left: ".concat(Ct,";\n border-top-left-radius: ").concat(Ct,";\n border-bottom-left-radius: ").concat(Ct,";\n ")),R("&:not(:first-child):not(:last-child)","\n margin-left: ".concat(Ct,";\n margin-right: ").concat(Ct,";\n border-radius: ").concat(Ct,";\n ")),zt("default"),F("ghost",[zt("primary"),zt("info"),zt("success"),zt("warning"),zt("error")])])])]),F("vertical",{flexDirection:"column"},[I("button",[R("&:first-child:not(:last-child)","\n margin-bottom: ".concat(Ct,";\n margin-left: ").concat(Ct,";\n margin-right: ").concat(Ct,";\n border-bottom-left-radius: ").concat(Ct,";\n border-bottom-right-radius: ").concat(Ct,";\n ")),R("&:last-child:not(:first-child)","\n margin-top: ".concat(Ct,";\n margin-left: ").concat(Ct,";\n margin-right: ").concat(Ct,";\n border-top-left-radius: ").concat(Ct,";\n border-top-right-radius: ").concat(Ct,";\n ")),R("&:not(:first-child):not(:last-child)","\n margin: ".concat(Ct,";\n border-radius: ").concat(Ct,";\n ")),It("default"),F("ghost",[It("primary"),It("info"),It("success"),It("warning"),It("error")])])])]),Rt={size:{type:String,default:void 0},vertical:Boolean},Ot=_({name:"ButtonGroup",props:Rt,setup:function(e){var t=O(e),n=t.mergedClsPrefixRef,r=t.mergedRtlRef;return H("-button-group",Et,n),U(Ve,e),{rtlEnabled:W("ButtonGroup",r,n),mergedClsPrefix:n}},render:function(){var e=this.mergedClsPrefix;return z("div",{class:["".concat(e,"-button-group"),this.rtlEnabled&&"".concat(e,"-button-group--rtl"),this.vertical&&"".concat(e,"-button-group--vertical")],role:"group"},this.$slots)}}),Dt=_({name:"NDrawerContent",inheritAttrs:!1,props:{blockScroll:Boolean,show:{type:Boolean,default:void 0},displayDirective:{type:String,required:!0},placement:{type:String,required:!0},contentClass:String,contentStyle:[Object,String],nativeScrollbar:{type:Boolean,required:!0},scrollbarProps:Object,trapFocus:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},showMask:{type:[Boolean,String],required:!0},maxWidth:Number,maxHeight:Number,minWidth:Number,minHeight:Number,resizable:Boolean,onClickoutside:Function,onAfterLeave:Function,onAfterEnter:Function,onEsc:Function},setup:function(e){var t=a(!!e.show),n=a(null),r=j($),o=0,i="",s=null,c=a(!1),d=a(!1),f=P((function(){return"top"===e.placement||"bottom"===e.placement})),p=O(e),v=p.mergedClsPrefixRef,m=p.mergedRtlRef,g=W("Drawer",m,v),y=C,b=r.doUpdateHeight,w=r.doUpdateWidth,k=function(t){var n=e.maxWidth;if(n&&t>n)return n;var r=e.minWidth;return r&&t<r?r:t},x=function(t){var n=e.maxHeight;if(n&&t>n)return n;var r=e.minHeight;return r&&t<r?r:t};function S(t){var r,i;if(d.value)if(f.value){var a=(null===(r=n.value)||void 0===r?void 0:r.offsetHeight)||0,s=o-t.clientY;a+="bottom"===e.placement?s:-s,a=x(a),b(a),o=t.clientY}else{var c=(null===(i=n.value)||void 0===i?void 0:i.offsetWidth)||0,u=o-t.clientX;c+="right"===e.placement?u:-u,c=k(c),w(c),o=t.clientX}}function C(){d.value&&(o=0,d.value=!1,document.body.style.cursor=i,document.body.removeEventListener("mousemove",S),document.body.removeEventListener("mouseup",C),document.body.removeEventListener("mouseleave",y))}G((function(){e.show&&(t.value=!0)})),l((function(){return e.show}),(function(e){e||C()})),h((function(){C()}));var _=P((function(){var t=e.show,n=[[X,t]];return e.showMask||n.push([Q,e.onClickoutside,void 0,{capture:!0}]),n}));return function(e){if("undefined"!=typeof document){var t,n=document.documentElement,r=!1,o=function(){n.style.marginRight=it,n.style.overflow=at,n.style.overflowX=st,n.style.overflowY=ct,ut.value="0px"};u((function(){t=l(e,(function(e){if(e){if(!ot){var t=window.innerWidth-n.offsetWidth;t>0&&(it=n.style.marginRight,n.style.marginRight="".concat(t,"px"),ut.value="".concat(t,"px")),at=n.style.overflow,st=n.style.overflowX,ct=n.style.overflowY,n.style.overflow="hidden",n.style.overflowX="hidden",n.style.overflowY="hidden"}r=!0,ot++}else--ot||o(),r=!1}),{immediate:!0})})),h((function(){null==t||t(),r&&(--ot||o(),r=!1)}))}}(P((function(){return e.blockScroll&&t.value}))),U(Z,n),U(ee,null),U(te,null),{bodyRef:n,rtlEnabled:g,mergedClsPrefix:r.mergedClsPrefixRef,isMounted:r.isMountedRef,mergedTheme:r.mergedThemeRef,displayed:t,transitionName:P((function(){return{right:"slide-in-from-right-transition",left:"slide-in-from-left-transition",top:"slide-in-from-top-transition",bottom:"slide-in-from-bottom-transition"}[e.placement]})),handleAfterLeave:function(){var n;t.value=!1,null===(n=e.onAfterLeave)||void 0===n||n.call(e)},bodyDirectives:_,handleMousedownResizeTrigger:function(e){d.value=!0,o=f.value?e.clientY:e.clientX,i=document.body.style.cursor,document.body.style.cursor=f.value?"ns-resize":"ew-resize",document.body.addEventListener("mousemove",S),document.body.addEventListener("mouseleave",y),document.body.addEventListener("mouseup",C)},handleMouseenterResizeTrigger:function(){null!==s&&(window.clearTimeout(s),s=null),d.value?c.value=!0:s=window.setTimeout((function(){c.value=!0}),300)},handleMouseleaveResizeTrigger:function(){null!==s&&(window.clearTimeout(s),s=null),c.value=!1},isDragging:d,isHoverOnResizeTrigger:c}},render:function(){var e=this,t=this.$slots,n=this.mergedClsPrefix;return"show"===this.displayDirective||this.displayed||this.show?q(z("div",{role:"none"},z(Y,{disabled:!this.showMask||!this.trapFocus,active:this.show,autoFocus:this.autoFocus,onEsc:this.onEsc},{default:function(){return z(J,{name:e.transitionName,appear:e.isMounted,onAfterEnter:e.onAfterEnter,onAfterLeave:e.handleAfterLeave},{default:function(){return q(z("div",K(e.$attrs,{role:"dialog",ref:"bodyRef","aria-modal":"true",class:["".concat(n,"-drawer"),e.rtlEnabled&&"".concat(n,"-drawer--rtl"),"".concat(n,"-drawer--").concat(e.placement,"-placement"),e.isDragging&&"".concat(n,"-drawer--unselectable"),e.nativeScrollbar&&"".concat(n,"-drawer--native-scrollbar")]}),[e.resizable?z("div",{class:["".concat(n,"-drawer__resize-trigger"),(e.isDragging||e.isHoverOnResizeTrigger)&&"".concat(n,"-drawer__resize-trigger--hover")],onMouseenter:e.handleMouseenterResizeTrigger,onMouseleave:e.handleMouseleaveResizeTrigger,onMousedown:e.handleMousedownResizeTrigger}):null,e.nativeScrollbar?z("div",{class:["".concat(n,"-drawer-content-wrapper"),e.contentClass],style:e.contentStyle,role:"none"},t):z(V,Object.assign({},e.scrollbarProps,{contentStyle:e.contentStyle,contentClass:["".concat(n,"-drawer-content-wrapper"),e.contentClass],theme:e.mergedTheme.peers.Scrollbar,themeOverrides:e.mergedTheme.peerOverrides.Scrollbar}),t)]),e.bodyDirectives)}})}})),[[X,"if"===this.displayDirective||this.displayed||this.show]]):null}}),jt=ne,Pt=jt.cubicBezierEaseIn,Mt=jt.cubicBezierEaseOut;var Bt=ne,Nt=Bt.cubicBezierEaseIn,Tt=Bt.cubicBezierEaseOut;var At=ne,Lt=At.cubicBezierEaseIn,Ft=At.cubicBezierEaseOut;var Ht=ne,Ut=Ht.cubicBezierEaseIn,Wt=Ht.cubicBezierEaseOut;var Gt=R([I("drawer","\n word-break: break-word;\n line-height: var(--n-line-height);\n position: absolute;\n pointer-events: all;\n box-shadow: var(--n-box-shadow);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n background-color: var(--n-color);\n color: var(--n-text-color);\n box-sizing: border-box;\n ",[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duration,n=void 0===t?"0.3s":t,r=e.leaveDuration,o=void 0===r?"0.2s":r,i=e.name,a=void 0===i?"slide-in-from-right":i;return[R("&.".concat(a,"-transition-leave-active"),{transition:"transform ".concat(o," ").concat(Pt)}),R("&.".concat(a,"-transition-enter-active"),{transition:"transform ".concat(n," ").concat(Mt)}),R("&.".concat(a,"-transition-enter-to"),{transform:"translateX(0)"}),R("&.".concat(a,"-transition-enter-from"),{transform:"translateX(100%)"}),R("&.".concat(a,"-transition-leave-from"),{transform:"translateX(0)"}),R("&.".concat(a,"-transition-leave-to"),{transform:"translateX(100%)"})]}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duration,n=void 0===t?"0.3s":t,r=e.leaveDuration,o=void 0===r?"0.2s":r,i=e.name,a=void 0===i?"slide-in-from-left":i;return[R("&.".concat(a,"-transition-leave-active"),{transition:"transform ".concat(o," ").concat(Nt)}),R("&.".concat(a,"-transition-enter-active"),{transition:"transform ".concat(n," ").concat(Tt)}),R("&.".concat(a,"-transition-enter-to"),{transform:"translateX(0)"}),R("&.".concat(a,"-transition-enter-from"),{transform:"translateX(-100%)"}),R("&.".concat(a,"-transition-leave-from"),{transform:"translateX(0)"}),R("&.".concat(a,"-transition-leave-to"),{transform:"translateX(-100%)"})]}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duration,n=void 0===t?"0.3s":t,r=e.leaveDuration,o=void 0===r?"0.2s":r,i=e.name,a=void 0===i?"slide-in-from-top":i;return[R("&.".concat(a,"-transition-leave-active"),{transition:"transform ".concat(o," ").concat(Lt)}),R("&.".concat(a,"-transition-enter-active"),{transition:"transform ".concat(n," ").concat(Ft)}),R("&.".concat(a,"-transition-enter-to"),{transform:"translateY(0)"}),R("&.".concat(a,"-transition-enter-from"),{transform:"translateY(-100%)"}),R("&.".concat(a,"-transition-leave-from"),{transform:"translateY(0)"}),R("&.".concat(a,"-transition-leave-to"),{transform:"translateY(-100%)"})]}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duration,n=void 0===t?"0.3s":t,r=e.leaveDuration,o=void 0===r?"0.2s":r,i=e.name,a=void 0===i?"slide-in-from-bottom":i;return[R("&.".concat(a,"-transition-leave-active"),{transition:"transform ".concat(o," ").concat(Ut)}),R("&.".concat(a,"-transition-enter-active"),{transition:"transform ".concat(n," ").concat(Wt)}),R("&.".concat(a,"-transition-enter-to"),{transform:"translateY(0)"}),R("&.".concat(a,"-transition-enter-from"),{transform:"translateY(100%)"}),R("&.".concat(a,"-transition-leave-from"),{transform:"translateY(0)"}),R("&.".concat(a,"-transition-leave-to"),{transform:"translateY(100%)"})]}(),F("unselectable","\n user-select: none; \n -webkit-user-select: none;\n "),F("native-scrollbar",[I("drawer-content-wrapper","\n overflow: auto;\n height: 100%;\n ")]),E("resize-trigger","\n position: absolute;\n background-color: #0000;\n transition: background-color .3s var(--n-bezier);\n ",[F("hover","\n background-color: var(--n-resize-trigger-color-hover);\n ")]),I("drawer-content-wrapper","\n box-sizing: border-box;\n "),I("drawer-content","\n height: 100%;\n display: flex;\n flex-direction: column;\n ",[F("native-scrollbar",[I("drawer-body-content-wrapper","\n height: 100%;\n overflow: auto;\n ")]),I("drawer-body","\n flex: 1 0 0;\n overflow: hidden;\n "),I("drawer-body-content-wrapper","\n box-sizing: border-box;\n padding: var(--n-body-padding);\n "),I("drawer-header","\n font-weight: var(--n-title-font-weight);\n line-height: 1;\n font-size: var(--n-title-font-size);\n color: var(--n-title-text-color);\n padding: var(--n-header-padding);\n transition: border .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-divider-color);\n border-bottom: var(--n-header-border-bottom);\n display: flex;\n justify-content: space-between;\n align-items: center;\n ",[E("close","\n margin-left: 6px;\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n ")]),I("drawer-footer","\n display: flex;\n justify-content: flex-end;\n border-top: var(--n-footer-border-top);\n transition: border .3s var(--n-bezier);\n padding: var(--n-footer-padding);\n ")]),F("right-placement","\n top: 0;\n bottom: 0;\n right: 0;\n border-top-left-radius: var(--n-border-radius);\n border-bottom-left-radius: var(--n-border-radius);\n ",[E("resize-trigger","\n width: 3px;\n height: 100%;\n top: 0;\n left: 0;\n transform: translateX(-1.5px);\n cursor: ew-resize;\n ")]),F("left-placement","\n top: 0;\n bottom: 0;\n left: 0;\n border-top-right-radius: var(--n-border-radius);\n border-bottom-right-radius: var(--n-border-radius);\n ",[E("resize-trigger","\n width: 3px;\n height: 100%;\n top: 0;\n right: 0;\n transform: translateX(1.5px);\n cursor: ew-resize;\n ")]),F("top-placement","\n top: 0;\n left: 0;\n right: 0;\n border-bottom-left-radius: var(--n-border-radius);\n border-bottom-right-radius: var(--n-border-radius);\n ",[E("resize-trigger","\n width: 100%;\n height: 3px;\n bottom: 0;\n left: 0;\n transform: translateY(1.5px);\n cursor: ns-resize;\n ")]),F("bottom-placement","\n left: 0;\n bottom: 0;\n right: 0;\n border-top-left-radius: var(--n-border-radius);\n border-top-right-radius: var(--n-border-radius);\n ",[E("resize-trigger","\n width: 100%;\n height: 3px;\n top: 0;\n left: 0;\n transform: translateY(-1.5px);\n cursor: ns-resize;\n ")])]),R("body",[R(">",[I("drawer-container","\n position: fixed;\n ")])]),I("drawer-container","\n position: relative;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n ",[R("> *","\n pointer-events: all;\n ")]),I("drawer-mask","\n background-color: rgba(0, 0, 0, .3);\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[F("invisible","\n background-color: rgba(0, 0, 0, 0)\n "),re({enterDuration:"0.2s",leaveDuration:"0.2s",enterCubicBezier:"var(--n-bezier-in)",leaveCubicBezier:"var(--n-bezier-out)"})])]),qt=Object.assign(Object.assign({},D.props),{show:Boolean,width:[Number,String],height:[Number,String],placement:{type:String,default:"right"},maskClosable:{type:Boolean,default:!0},showMask:{type:[Boolean,String],default:!0},to:[String,Object],displayDirective:{type:String,default:"if"},nativeScrollbar:{type:Boolean,default:!0},zIndex:Number,onMaskClick:Function,scrollbarProps:Object,contentClass:String,contentStyle:[Object,String],trapFocus:{type:Boolean,default:!0},onEsc:Function,autoFocus:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!0},maxWidth:Number,maxHeight:Number,minWidth:Number,minHeight:Number,resizable:Boolean,defaultWidth:{type:[Number,String],default:251},defaultHeight:{type:[Number,String],default:251},onUpdateWidth:[Function,Array],onUpdateHeight:[Function,Array],"onUpdate:width":[Function,Array],"onUpdate:height":[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onAfterLeave:Function,drawerStyle:[String,Object],drawerClass:String,target:null,onShow:Function,onHide:Function}),Xt=_({name:"Drawer",inheritAttrs:!1,props:qt,setup:function(e){var t=O(e),n=t.mergedClsPrefixRef,r=t.namespaceRef,o=t.inlineThemeDisabled,i=oe(),s=D("Drawer","-drawer",Gt,ue,e,n),c=a(e.defaultWidth),u=a(e.defaultHeight),l=ie(ae(e,"width"),c),d=ie(ae(e,"height"),u),f=P((function(){var t=e.placement;return"top"===t||"bottom"===t?"":le(l.value)})),h=P((function(){var t=e.placement;return"left"===t||"right"===t?"":le(d.value)})),p=P((function(){return[{width:f.value,height:h.value},e.drawerStyle||""]}));function v(t){var n=e.onMaskClick;e.maskClosable&&g(!1),n&&n(t)}var m=pt();function g(t){var n=e.onHide,r=e.onUpdateShow,o=e["onUpdate:show"];r&&de(r,t),o&&de(o,t),n&&!t&&de(n,t)}U($,{isMountedRef:i,mergedThemeRef:s,mergedClsPrefixRef:n,doUpdateShow:g,doUpdateHeight:function(t){var n=e.onUpdateHeight,r=e["onUpdate:width"];n&&de(n,t),r&&de(r,t),u.value=t},doUpdateWidth:function(t){var n=e.onUpdateWidth,r=e["onUpdate:width"];n&&de(n,t),r&&de(r,t),c.value=t}});var y=P((function(){var e=s.value,t=e.common,n=t.cubicBezierEaseInOut,r=t.cubicBezierEaseIn,o=t.cubicBezierEaseOut,i=e.self,a=i.color,c=i.textColor,u=i.boxShadow,l=i.lineHeight,d=i.headerPadding,f=i.footerPadding,h=i.borderRadius,p=i.bodyPadding,v=i.titleFontSize,m=i.titleTextColor,g=i.titleFontWeight,y=i.headerBorderBottom,b=i.footerBorderTop,w=i.closeIconColor,k=i.closeIconColorHover,x=i.closeIconColorPressed,S=i.closeColorHover,C=i.closeColorPressed,_=i.closeIconSize;return{"--n-line-height":l,"--n-color":a,"--n-border-radius":h,"--n-text-color":c,"--n-box-shadow":u,"--n-bezier":n,"--n-bezier-out":o,"--n-bezier-in":r,"--n-header-padding":d,"--n-body-padding":p,"--n-footer-padding":f,"--n-title-text-color":m,"--n-title-font-size":v,"--n-title-font-weight":g,"--n-header-border-bottom":y,"--n-footer-border-top":b,"--n-close-icon-color":w,"--n-close-icon-color-hover":k,"--n-close-icon-color-pressed":x,"--n-close-size":i.closeSize,"--n-close-color-hover":S,"--n-close-color-pressed":C,"--n-close-icon-size":_,"--n-close-border-radius":i.closeBorderRadius,"--n-resize-trigger-color-hover":i.resizableTriggerColorHover}})),b=o?M("drawer",void 0,y,e):void 0;return{mergedClsPrefix:n,namespace:r,mergedBodyStyle:p,handleOutsideClick:function(e){v(e)},handleMaskClick:v,handleEsc:function(t){var n,r;null===(n=e.onEsc)||void 0===n||n.call(e),e.show&&e.closeOnEsc&&(r=t,!rt.has(r))&&(m.value||g(!1))},mergedTheme:s,cssVars:o?void 0:y,themeClass:null==b?void 0:b.themeClass,onRender:null==b?void 0:b.onRender,isMounted:i}},render:function(){var e=this,t=this.mergedClsPrefix;return z(ce,{to:this.to,show:this.show},{default:function(){var n;return null===(n=e.onRender)||void 0===n||n.call(e),q(z("div",{class:["".concat(t,"-drawer-container"),e.namespace,e.themeClass],style:e.cssVars,role:"none"},e.showMask?z(J,{name:"fade-in-transition",appear:e.isMounted},{default:function(){return e.show?z("div",{"aria-hidden":!0,class:["".concat(t,"-drawer-mask"),"transparent"===e.showMask&&"".concat(t,"-drawer-mask--invisible")],onClick:e.handleMaskClick}):null}}):null,z(Dt,Object.assign({},e.$attrs,{class:[e.drawerClass,e.$attrs.class],style:[e.mergedBodyStyle,e.$attrs.style],blockScroll:e.blockScroll,contentStyle:e.contentStyle,contentClass:e.contentClass,placement:e.placement,scrollbarProps:e.scrollbarProps,show:e.show,displayDirective:e.displayDirective,nativeScrollbar:e.nativeScrollbar,onAfterEnter:e.onAfterEnter,onAfterLeave:e.onAfterLeave,trapFocus:e.trapFocus,autoFocus:e.autoFocus,resizable:e.resizable,maxHeight:e.maxHeight,minHeight:e.minHeight,maxWidth:e.maxWidth,minWidth:e.minWidth,showMask:e.showMask,onEsc:e.handleEsc,onClickoutside:e.handleOutsideClick}),e.$slots)),[[se,{zIndex:e.zIndex,enabled:e.show}]])}})}}),Yt={title:String,headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],bodyClass:String,bodyStyle:[Object,String],bodyContentClass:String,bodyContentStyle:[Object,String],nativeScrollbar:{type:Boolean,default:!0},scrollbarProps:Object,closable:Boolean},Jt=_({name:"DrawerContent",props:Yt,setup:function(){var e=j($,null);e||fe("drawer-content","`n-drawer-content` must be placed inside `n-drawer`.");var t=e.doUpdateShow;return{handleCloseClick:function(){t(!1)},mergedTheme:e.mergedThemeRef,mergedClsPrefix:e.mergedClsPrefixRef}},render:function(){var e=this.title,t=this.mergedClsPrefix,n=this.nativeScrollbar,r=this.mergedTheme,o=this.bodyClass,i=this.bodyStyle,a=this.bodyContentClass,s=this.bodyContentStyle,c=this.headerClass,u=this.headerStyle,l=this.footerClass,d=this.footerStyle,f=this.scrollbarProps,h=this.closable,p=this.$slots;return z("div",{role:"none",class:["".concat(t,"-drawer-content"),n&&"".concat(t,"-drawer-content--native-scrollbar")]},p.header||e||h?z("div",{class:["".concat(t,"-drawer-header"),c],style:u,role:"none"},z("div",{class:"".concat(t,"-drawer-header__main"),role:"heading","aria-level":"1"},void 0!==p.header?p.header():e),h&&z(he,{onClick:this.handleCloseClick,clsPrefix:t,class:"".concat(t,"-drawer-header__close"),absolute:!0})):null,n?z("div",{class:["".concat(t,"-drawer-body"),o],style:i,role:"none"},z("div",{class:["".concat(t,"-drawer-body-content-wrapper"),a],style:s,role:"none"},p)):z(V,Object.assign({themeOverrides:r.peerOverrides.Scrollbar,theme:r.peers.Scrollbar},f,{class:"".concat(t,"-drawer-body"),contentClass:["".concat(t,"-drawer-body-content-wrapper"),a],contentStyle:s}),p),p.footer?z("div",{class:["".concat(t,"-drawer-footer"),l],style:d,role:"none"},p.footer()):null)}}),Kt=R([I("list","\n --n-merged-border-color: var(--n-border-color);\n --n-merged-color: var(--n-color);\n --n-merged-color-hover: var(--n-color-hover);\n margin: 0;\n font-size: var(--n-font-size);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n padding: 0;\n list-style-type: none;\n color: var(--n-text-color);\n background-color: var(--n-merged-color);\n ",[F("show-divider",[I("list-item",[R("&:not(:last-child)",[E("divider","\n background-color: var(--n-merged-border-color);\n ")])])]),F("clickable",[I("list-item","\n cursor: pointer;\n ")]),F("bordered","\n border: 1px solid var(--n-merged-border-color);\n border-radius: var(--n-border-radius);\n "),F("hoverable",[I("list-item","\n border-radius: var(--n-border-radius);\n ",[R("&:hover","\n background-color: var(--n-merged-color-hover);\n ",[E("divider","\n background-color: transparent;\n ")])])]),F("bordered, hoverable",[I("list-item","\n padding: 12px 20px;\n "),E("header, footer","\n padding: 12px 20px;\n ")]),E("header, footer","\n padding: 12px 0;\n box-sizing: border-box;\n transition: border-color .3s var(--n-bezier);\n ",[R("&:not(:last-child)","\n border-bottom: 1px solid var(--n-merged-border-color);\n ")]),I("list-item","\n position: relative;\n padding: 12px 0; \n box-sizing: border-box;\n display: flex;\n flex-wrap: nowrap;\n align-items: center;\n transition:\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n ",[E("prefix","\n margin-right: 20px;\n flex: 0;\n "),E("suffix","\n margin-left: 20px;\n flex: 0;\n "),E("main","\n flex: 1;\n "),E("divider","\n height: 1px;\n position: absolute;\n bottom: 0;\n left: 0;\n right: 0;\n background-color: transparent;\n transition: background-color .3s var(--n-bezier);\n pointer-events: none;\n ")])]),pe(I("list","\n --n-merged-color-hover: var(--n-color-hover-modal);\n --n-merged-color: var(--n-color-modal);\n --n-merged-border-color: var(--n-border-color-modal);\n ")),ve(I("list","\n --n-merged-color-hover: var(--n-color-hover-popover);\n --n-merged-color: var(--n-color-popover);\n --n-merged-border-color: var(--n-border-color-popover);\n "))]),Vt=Object.assign(Object.assign({},D.props),{size:{type:String,default:"medium"},bordered:Boolean,clickable:Boolean,hoverable:Boolean,showDivider:{type:Boolean,default:!0}}),$t=me("n-list"),Qt=_({name:"List",props:Vt,setup:function(e){var t=O(e),n=t.mergedClsPrefixRef,r=t.inlineThemeDisabled,o=t.mergedRtlRef,i=W("List",o,n),a=D("List","-list",Kt,ge,e,n);U($t,{showDividerRef:ae(e,"showDivider"),mergedClsPrefixRef:n});var s=P((function(){var e=a.value,t=e.common.cubicBezierEaseInOut,n=e.self,r=n.fontSize,o=n.textColor,i=n.color,s=n.colorModal,c=n.colorPopover,u=n.borderColor,l=n.borderColorModal,d=n.borderColorPopover;return{"--n-font-size":r,"--n-bezier":t,"--n-text-color":o,"--n-color":i,"--n-border-radius":n.borderRadius,"--n-border-color":u,"--n-border-color-modal":l,"--n-border-color-popover":d,"--n-color-modal":s,"--n-color-popover":c,"--n-color-hover":n.colorHover,"--n-color-hover-modal":n.colorHoverModal,"--n-color-hover-popover":n.colorHoverPopover}})),c=r?M("list",void 0,s,e):void 0;return{mergedClsPrefix:n,rtlEnabled:i,cssVars:r?void 0:s,themeClass:null==c?void 0:c.themeClass,onRender:null==c?void 0:c.onRender}},render:function(){var e,t=this.$slots,n=this.mergedClsPrefix,r=this.onRender;return null==r||r(),z("ul",{class:["".concat(n,"-list"),this.rtlEnabled&&"".concat(n,"-list--rtl"),this.bordered&&"".concat(n,"-list--bordered"),this.showDivider&&"".concat(n,"-list--show-divider"),this.hoverable&&"".concat(n,"-list--hoverable"),this.clickable&&"".concat(n,"-list--clickable"),this.themeClass],style:this.cssVars},t.header?z("div",{class:"".concat(n,"-list__header")},t.header()):null,null===(e=t.default)||void 0===e?void 0:e.call(t),t.footer?z("div",{class:"".concat(n,"-list__footer")},t.footer()):null)}}),Zt=_({name:"ListItem",setup:function(){var e=j($t,null);return e||fe("list-item","`n-list-item` must be placed in `n-list`."),{showDivider:e.showDividerRef,mergedClsPrefix:e.mergedClsPrefixRef}},render:function(){var e=this.$slots,t=this.mergedClsPrefix;return z("li",{class:"".concat(t,"-list-item")},e.prefix?z("div",{class:"".concat(t,"-list-item__prefix")},e.prefix()):null,e.default?z("div",{class:"".concat(t,"-list-item__main")},e):null,e.suffix?z("div",{class:"".concat(t,"-list-item__suffix")},e.suffix()):null,this.showDivider&&z("div",{class:"".concat(t,"-list-item__divider")}))}});var en={name:"Split",common:ye,self:function(e){return{resizableTriggerColorHover:e.primaryColorHover,resizableTriggerColor:e.borderColor}}},tn=I("split","\n display: flex;\n width: 100%;\n height: 100%;\n",[F("horizontal","\n flex-direction: row;\n "),F("vertical","\n flex-direction: column;\n "),I("split-pane-1","\n overflow: hidden;\n "),I("split-pane-2","\n overflow: hidden;\n flex: 1;\n "),E("resize-trigger","\n background-color: var(--n-resize-trigger-color);\n transition: background-color .3s var(--n-bezier);\n ",[F("hover","\n background-color: var(--n-resize-trigger-color-hover);\n "),R("&:hover","\n background-color: var(--n-resize-trigger-color-hover);\n ")])]),nn=Object.assign(Object.assign({},D.props),{direction:{type:String,default:"horizontal"},resizeTriggerSize:{type:Number,default:3},disabled:Boolean,defaultSize:{type:[String,Number],default:.5},"onUpdate:size":[Function,Array],onUpdateSize:[Function,Array],size:[String,Number],min:{type:[String,Number],default:0},max:{type:[String,Number],default:1},pane1Class:String,pane1Style:[Object,String],pane2Class:String,pane2Style:[Object,String],onDragStart:Function,onDragMove:Function,onDragEnd:Function,watchProps:Array}),rn=_({name:"Split",props:nn,setup:function(e){var t,n=O(e),r=n.mergedClsPrefixRef,o=n.inlineThemeDisabled,i=D("Split","-split",tn,en,e,r),s=P((function(){var e=i.value,t=e.common.cubicBezierEaseInOut,n=e.self;return{"--n-bezier":t,"--n-resize-trigger-color":n.resizableTriggerColor,"--n-resize-trigger-color-hover":n.resizableTriggerColorHover}})),c=a(null),u=a(!1),l=ae(e,"size"),d=a(e.defaultSize);(null===(t=e.watchProps)||void 0===t?void 0:t.includes("defaultSize"))&&G((function(){return d.value=e.defaultSize}));var f=function(t){var n=e["onUpdate:size"];e.onUpdateSize&&de(e.onUpdateSize,t),n&&de(n,t),d.value=t},h=ie(l,d),p=P((function(){var t=h.value;if("string"==typeof t)return{flex:"0 0 ".concat(t)};if("number"==typeof t){var n=100*t;return{flex:"0 0 calc(".concat(n,"% - ").concat(e.resizeTriggerSize*n/100,"px)")}}})),v=P((function(){return"horizontal"===e.direction?{width:"".concat(e.resizeTriggerSize,"px"),height:"100%"}:{width:"100%",height:"".concat(e.resizeTriggerSize,"px")}})),m=P((function(){var t="horizontal"===e.direction;return{width:t?"".concat(e.resizeTriggerSize,"px"):"",height:t?"":"".concat(e.resizeTriggerSize,"px"),cursor:"horizontal"===e.direction?"col-resize":"row-resize"}})),g=0;function y(t){var n,r,o=null===(r=null===(n=c.value)||void 0===n?void 0:n.parentElement)||void 0===r?void 0:r.getBoundingClientRect();if(o){var i=e.direction,a=o.width-e.resizeTriggerSize,s=o.height-e.resizeTriggerSize,u="horizontal"===i?a:s,l="horizontal"===i?t.clientX-o.left-g:t.clientY-o.top+g,d=e.min,p=e.max,v="string"==typeof d?ke(d):d*u,m="string"==typeof p?ke(p):p*u,y=l;y=Math.max(y,v),y=Math.min(y,m,u),"string"==typeof h.value?f("".concat(y,"px")):f(y/u)}}var b=o?M("split",void 0,s,e):void 0;return{themeClass:null==b?void 0:b.themeClass,onRender:null==b?void 0:b.onRender,cssVars:o?void 0:s,resizeTriggerElRef:c,isDragging:u,mergedClsPrefix:r,resizeTriggerWrapperStyle:m,resizeTriggerStyle:v,handleMouseDown:function(t){t.preventDefault(),u.value=!0,e.onDragStart&&e.onDragStart(t);var n="mousemove",r="mouseup",o=function(t){y(t),e.onDragMove&&e.onDragMove(t)},i=function(){xe(n,document,o),xe(r,document,i),u.value=!1,e.onDragEnd&&e.onDragEnd(t),document.body.style.cursor=""};document.body.style.cursor=m.value.cursor,we(n,document,o),we(r,document,i);var a=c.value;if(a){var s=a.getBoundingClientRect();g="horizontal"===e.direction?t.clientX-s.left:s.top-t.clientY}y(t)},firstPaneStyle:p}},render:function(){var e,t,n,r,o,i=this;return null===(e=this.onRender)||void 0===e||e.call(this),z("div",{class:["".concat(this.mergedClsPrefix,"-split"),"".concat(this.mergedClsPrefix,"-split--").concat(this.direction),this.themeClass],style:this.cssVars},z("div",{class:["".concat(this.mergedClsPrefix,"-split-pane-1"),this.pane1Class],style:[this.firstPaneStyle,this.pane1Style]},null===(n=(t=this.$slots)[1])||void 0===n?void 0:n.call(t)),!this.disabled&&z("div",{ref:"resizeTriggerElRef",class:"".concat(this.mergedClsPrefix,"-split__resize-trigger-wrapper"),style:this.resizeTriggerWrapperStyle,onMousedown:this.handleMouseDown},be(this.$slots["resize-trigger"],(function(){return[z("div",{style:i.resizeTriggerStyle,class:["".concat(i.mergedClsPrefix,"-split__resize-trigger"),i.isDragging&&"".concat(i.mergedClsPrefix,"-split__resize-trigger--hover")]})]}))),z("div",{class:["".concat(this.mergedClsPrefix,"-split-pane-2"),this.pane2Class],style:this.pane2Style},null===(o=(r=this.$slots)[2])||void 0===o?void 0:o.call(r)))}}),on={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},an=[_e("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),_e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 176v160"},null,-1),_e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M336 256H176"},null,-1)],sn=_({name:"AddCircleOutline",render:function(e,t){return Se(),Ce("svg",on,an)}}),cn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},un=[_e("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),_e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 320L192 192"},null,-1),_e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M192 320l128-128"},null,-1)],ln=_({name:"CloseCircleOutline",render:function(e,t){return Se(),Ce("svg",cn,un)}}),dn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},fn=[_e("path",{d:"M408 96H252.11a23.89 23.89 0 0 1-13.31-4L211 73.41A55.77 55.77 0 0 0 179.89 64H104a56.06 56.06 0 0 0-56 56v24h416c0-30.88-25.12-48-56-48z",fill:"currentColor"},null,-1),_e("path",{d:"M423.75 448H88.25a56 56 0 0 1-55.93-55.15L16.18 228.11v-.28A48 48 0 0 1 64 176h384.1a48 48 0 0 1 47.8 51.83v.28l-16.22 164.74A56 56 0 0 1 423.75 448zm56.15-221.45z",fill:"currentColor"},null,-1)],hn=_({name:"FolderOpen",render:function(e,t){return Se(),Ce("svg",dn,fn)}}),pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},vn=[_e("path",{d:"M313.27 124.64L198.73 51.36a32 32 0 0 0-29.28.35L56.51 127.49A16 16 0 0 0 48 141.63v295.8a16 16 0 0 0 23.49 14.14l97.82-63.79a32 32 0 0 1 29.5-.24l111.86 73a32 32 0 0 0 29.27-.11l115.43-75.94a16 16 0 0 0 8.63-14.2V74.57a16 16 0 0 0-23.49-14.14l-98 63.86a32 32 0 0 1-29.24.35z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),_e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M328 128v336"},null,-1),_e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M184 48v336"},null,-1)],mn=_({name:"MapOutline",render:function(e,t){return Se(),Ce("svg",pn,vn)}}),gn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},yn=[_e("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),_e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M336 256H176"},null,-1)],bn=_({name:"RemoveCircleOutline",render:function(e,t){return Se(),Ce("svg",gn,yn)}}),wn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},kn=[_e("path",{d:"M465.94 119.76l-73.7-73.7A47.68 47.68 0 0 0 358.3 32H96a64 64 0 0 0-64 64v320a64 64 0 0 0 64 64h320a64 64 0 0 0 64-64V153.7a47.68 47.68 0 0 0-14.06-33.94zM120 112h176a8 8 0 0 1 8 8v48a8 8 0 0 1-8 8H120a8 8 0 0 1-8-8v-48a8 8 0 0 1 8-8zm139.75 319.91a80 80 0 1 1 76.16-76.16a80.06 80.06 0 0 1-76.16 76.16z",fill:"currentColor"},null,-1),_e("circle",{cx:"256",cy:"352",r:"48",fill:"currentColor"},null,-1)],xn=_({name:"Save",render:function(e,t){return Se(),Ce("svg",wn,kn)}}),Sn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Cn=[_e("path",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32",d:"M336 320H32L184 48l152 272z"},null,-1),_e("path",{d:"M265.32 194.51A144 144 0 1 1 192 320",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1)],_n=_({name:"ShapesOutline",render:function(e,t){return Se(),Ce("svg",Sn,Cn)}}),zn=[ze,Xe,Ye,function(){return p((function e(t){f(this,e),v(this,"host",void 0),v(this,"space",void 0),v(this,"id",void 0),v(this,"containerID",void 0),v(this,"previousScale",void 0),v(this,"enable",(function(e){var t,n=document.getElementById(e),r=Number(window.getComputedStyle(n).borderRadius.match(/\d+/g)),o="".concat(e,"-force-hidpi-style-support");return(document.getElementById(o)||((t=document.createElement("style")).id=o,document.head.appendChild(t),t)).innerHTML="\n            #".concat(e," > div {\n                transform: scale(").concat(1/window.devicePixelRatio,") !important;\n                transform-origin: top left !important;\n                width: ").concat(100*window.devicePixelRatio,"% !important;\n                height: ").concat(100*window.devicePixelRatio,"% !important;\n            }\n            #").concat(e," * {\n                border-radius: ").concat(window.devicePixelRatio*r,"px !important;\n            }\n        "),o})),this.host=t,this.space="liteModeHiDpi",this.containerID=t.container.id,this.previousScale=window.devicePixelRatio}),[{key:"mount",value:function(){return this.host.plugins[this.space]=this,this.host.properties.liteModeForceHiDPI&&(this.id=this.enableLiteForceHiDPI()),!0}},{key:"unmount",value:function(){return this.host.plugins[this.space]=null,!this.host.properties.liteModeForceHiDPI||this.disableLiteForceHiDPI()}},{key:"onResize",value:function(){this.previousScale!==window.devicePixelRatio&&(this.previousScale=window.devicePixelRatio,this.enable(this.containerID))}},{key:"enableLiteForceHiDPI",value:function(){var e=this;return window.addEventListener("resize",(function(){return e.onResize()})),this.enable(this.containerID)}},{key:"disableLiteForceHiDPI",value:function(){var e=this,t="".concat(this.containerID,"-force-hidpi-style-support"),n=document.getElementById(t);return!!n&&(document.head.removeChild(n),window.removeEventListener("resize",(function(){return e.onResize()})),!0)}}])}()],In={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},En=[_e("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[_e("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"}),_e("path",{d:"M7 9l5-5l5 5"}),_e("path",{d:"M12 4v12"})],-1)],Rn=_({name:"Upload",render:function(e,t){return Se(),Ce("svg",In,En)}}),On={class:"container"},Dn={style:{height:"100%",width:"100%",display:"flex","justify-items":"center"}},jn=Te(_({__name:"SketchSelector",props:{list:{type:Array,default:function(){return[]}}},emits:["select","remove"],setup:function(e,t){var n=t.emit,r=e,o=n;return function(e,t){return Se(),Ce("div",On,[Ie(je(Qt),{class:"select-listview",hoverable:""},{default:Ee((function(){return[(Se(!0),Ce(Re,null,Oe(r.list,(function(e){return Se(),De(je(Zt),{title:e.name,key:e.id,onClick:function(t){return n=e.id,void o("select",n);var n}},{prefix:Ee((function(){return[_e("div",Dn,[Ie(je(Pe),{size:"20"},{default:Ee((function(){return[Ie(je(_n))]})),_:1})])]})),suffix:Ee((function(){return[Ie(je($e),{quaternary:"",circle:"",onClick:Me((function(t){return n=e.id,void(confirm("Are you sure to delete this CartoSketch?\nBoth Route and Drafts will be deleted")&&o("remove",n));var n}),["stop"])},{icon:Ee((function(){return[Ie(je(Pe),null,{default:Ee((function(){return[Ie(je(bn))]})),_:1})]})),_:2},1032,["onClick"])]})),default:Ee((function(){return[Be(" "+Ne(e.name),1)]})),_:2},1032,["title","onClick"])})),128))]})),_:1})])}}}),[["__scopeId","data-v-f96e4745"]]),Pn=_({__name:"SelectorDrawer",props:{active:{type:Boolean,default:function(){return!1}},placement:{type:String,default:function(){return"right"}},list:{type:Array,default:function(){return[]}}},emits:["new","update:active","remove","select","import"],setup:function(e,t){var n=t.emit,r=e,o=[{title:"import",icon:Rn,callback:function(){c("import")},secondary:!0,iconSize:17,type:"default"},{title:"new",icon:sn,callback:function(){return c("new")},secondary:!0,iconSize:20,type:"default"},{title:"close",icon:ln,callback:function(){i.value=!1},secondary:!0,iconSize:20,type:"error"}],i=a(!1),s=a(r.placement);l(r,(function(){i.value=r.active,s.value=r.placement}),{deep:!0}),l(i,(function(){c("update:active",i.value)}));var c=n;return function(t,n){return Se(),De(je(Xt),{show:i.value,"onUpdate:show":n[2]||(n[2]=function(e){return i.value=e}),width:502,placement:s.value,"auto-focus":!1},{default:Ee((function(){return[Ie(je(Jt),{title:"CartoSketch Library"},{footer:Ee((function(){return[Ie(je(Ot),null,{default:Ee((function(){return[(Se(),Ce(Re,null,Oe(o,(function(e){return Ie(je($e),{secondary:e.secondary,key:e.title,type:e.type,title:e.title,onClick:e.callback},{icon:Ee((function(){return[Ie(je(Pe),{size:e.iconSize},{default:Ee((function(){return[(Se(),De(Ae(e.icon)))]})),_:2},1032,["size"])]})),_:2},1032,["secondary","type","title","onClick"])})),64))]})),_:1})]})),default:Ee((function(){return[Ie(jn,{list:e.list,onRemove:n[0]||(n[0]=function(e){return c("remove",e)}),onSelect:n[1]||(n[1]=function(e){return c("select",e)})},null,8,["list"])]})),_:1})]})),_:1},8,["show","placement"])}}}),Mn=function(){return p((function e(t){var n=this;f(this,e),v(this,"history",[]),v(this,"hostMap",void 0),v(this,"handlers",[]),v(this,"name",void 0),v(this,"id",void 0),v(this,"componentLibrary",new Map),v(this,"componentClassification",new Map),v(this,"previousComponentIDs",new Set),v(this,"shownComponentIDs",new Set),this.hostMap=t,this.initialiseBackend().then((function(){n.executeHandler("ready"),n.startSyncComponents()})).catch((function(e){throw new Error("Fail to initialise drawing backend: ".concat(e))}))}),[{key:"startSyncComponents",value:function(){var e=this;this.addHandler("change",(function(){try{e.syncFromMapToBackend(),e.syncFromBackendToMap()}catch(t){console.error("Fail to sync components, reason: \na",t)}}))}},{key:"executeHandler",value:function(e){var t=this;this.handlers.forEach((function(n){n.type===e&&n.handler(t)}))}},{key:"addHandler",value:function(e,t){var n=this.handlers.length>0?this.handlers[this.handlers.length-1].id+1:0;this.handlers.push({type:e,id:n,handler:t})}},{key:"showByID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.shownComponentIDs.add(e),t||this.executeHandler("change")}},{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.showByID(e.id,t)}},{key:"hideByID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.shownComponentIDs.delete(e),t||this.executeHandler("change")}},{key:"hide",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.hideByID(e.id,t)}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";this.componentLibrary.set(e.id,e),this.registerPrimitive(e,t)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{this.hide(e)}finally{this.componentLibrary.delete(e.id),this.componentClassification.delete(e.id),this.componentLibrary.delete(e.id),t||this.executeHandler("change")}}},{key:"addHistory",value:function(e,t){this.history.push([{type:e,data:t}])}},{key:"generateShowHideHistory",value:function(){var e=Bn(this.shownComponentIDs,this.previousComponentIDs),t=Bn(this.previousComponentIDs,this.shownComponentIDs),n=[];return e.length>0&&n.push({type:"show",data:e}),t.length>0&&n.push({type:"delete",data:t}),this.previousComponentIDs=Le(this.shownComponentIDs),n}},{key:"findCorrespondingUndoAction",value:function(){for(var e=1,t=0,n=this.history.length-1;n>=0;n--){if("undo"===this.history[n][0].type?e+=1:t+=1,e===t)return this.history[n]}return[]}},{key:"findCorrespondingRedoAction",value:function(){for(var e=0,t=1,n=this.history.length-1;n>=0;n--){var r=this.history[n][0].type;if("undo"===r?e+=1:"redo"===r&&(t+=1),"redo"!==r&&"undo"!==r)return[];if(e===t)return this.history[n]}return[]}},{key:"undo",value:function(){var e=this;if(console.log(this.history),this.history.length>=1){var t=this.findCorrespondingUndoAction();if(0===t.length)return void console.warn("No action to undo");"redo"!==t[0].type?(t.forEach((function(t){"add"===t.type?t.data.forEach((function(t){return e.hide(t,!0)})):"delete"===t.type&&t.data.forEach((function(t){return e.show(t,!0)}))})),this.executeHandler("change"),this.addHistory("undo",t)):(t[0].data.forEach((function(t){"add"===t.type?t.data.forEach((function(t){return e.hide(t,!0)})):"delete"===t.type&&t.data.forEach((function(t){return e.show(t,!0)}))})),this.executeHandler("change"),this.addHistory("undo",t[0].data))}}},{key:"redo",value:function(){var e=this;if(this.history.length>=1){var t=this.findCorrespondingRedoAction();if(0===t.length)return void console.warn("No action to redo");t[0].data.forEach((function(t){"add"===t.type?t.data.forEach((function(t){return e.show(t,!0)})):"delete"===t.type&&t.data.forEach((function(t){return e.hide(t,!0)}))})),this.executeHandler("change"),this.addHistory("redo",t[0].data)}}},{key:"editComponent",value:function(e){var t=this.componentLibrary.get(e);if(!t)throw new Error("No corresponding primitive found by id: ".concat(e));this.editPrimitive(t)}},{key:"getComponentMeta",value:function(e){return{id:e.id,className:this.componentClassification.get(e.id)||"unknown",name:e.name,type:e.type,properties:e.properties}}},{key:"registerPrimitive",value:function(e,t){this.componentClassification.set(e.id,t||"unknown")}},{key:"getClassificationInfo",value:function(){var e=this,t=Array.from(this.componentLibrary).map((function(e){return e[1]})),n=function(n){return t.filter((function(t){return e.getComponentMeta(t).className===n})).map((function(t){return e.getComponentMeta(t)}))};return{routes:n("route"),drafts:n("draft"),unknowns:n("unknown")}}},{key:"getClassifiedProxyComponents",value:function(){var e=this,t=Array.from(this.componentLibrary).map((function(e){return e[1]}));return{routes:t.filter((function(t){return"route"===e.getComponentMeta(t).className})),drafts:t.filter((function(t){return"draft"===e.getComponentMeta(t).className})),unknowns:t.filter((function(t){return"unknown"===e.getComponentMeta(t).className}))}}}])}();function Bn(e,t){var n=new Set(t);return Array.from(e).filter((function(e){return!n.has(e)}))}var Nn=function(){return p((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,e),v(this,"forwardMap",new Map),v(this,"backwardMap",new Map),n.forEach((function(e){t.forwardMap.set(e.key1,e.key2),t.backwardMap.set(e.key2,e.key1)}))}),[{key:"getForward",value:function(e){return this.forwardMap.get(e)}},{key:"getBackward",value:function(e){return this.backwardMap.get(e)}},{key:"set",value:function(e,t){this.forwardMap.set(e,t),this.backwardMap.set(t,e)}},{key:"removeForward",value:function(e){this.backwardMap.delete(this.getForward(e)),this.forwardMap.delete(e)}},{key:"removeBackward",value:function(e){this.forwardMap.delete(this.getBackward(e)),this.backwardMap.delete(e)}},{key:"forwardKeys",value:function(){return Array.from(this.forwardMap.keys())}},{key:"backwardKeys",value:function(){return Array.from(this.backwardMap.keys())}},{key:"iterateForward",value:function(e){this.forwardMap.forEach((function(t,n,r){return e(n,t,r)}))}},{key:"iterateBackward",value:function(e){this.backwardMap.forEach((function(t,n,r){return e(n,t,r)}))}},{key:"hasForward",value:function(e){return this.forwardMap.has(e)}},{key:"hasBackward",value:function(e){return this.backwardMap.has(e)}}])}(),Tn=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=c(this,t,[].concat(r)),"primitiveComponentMap",new Nn),v(e,"previousPrimitiveIDs",[]),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),p(t,[{key:"syncFromMapToBackend",value:function(){var e=this,t=this.hostMap.plugins.drawingTools.getAllPrimitiveIDs(),n=bt(t,this.previousPrimitiveIDs),r=bt(this.previousPrimitiveIDs,t);this.previousPrimitiveIDs=t;var o=[];n&&n.forEach((function(t){var n=e.hostMap.plugins.drawingTools.getPrimitiveByID(t),r=Fe(n);e.add(r),e.showByID(r.id,!0),o.push(r.id),e.primitiveComponentMap.set(t,r.id)})),r&&r.forEach((function(t){var n=e.primitiveComponentMap.getForward(t);if(!n)throw new Error("correspondingComponentID ".concat(t," is undefined"));var r=e.componentLibrary.get(n);e.hide(r,!0),e.remove(r),e.primitiveComponentMap.removeForward(t)}))}},{key:"syncFromBackendToMap",value:function(){}},{key:"getShownComponentIDs",value:function(){return this.primitiveComponentMap.backwardKeys()}},{key:"escape",value:function(){this.hostMap.plugins.drawingTools.stopDrawing()}},{key:"initialiseBackend",value:function(){var e=this;return this.hostMap.plugins.drawingTools.initialised?Promise.resolve():new Promise((function(t){e.hostMap.plugins.drawingTools.addHandler("ready",(function(){e.hostMap.plugins.drawingTools.addHandler("drawingChanged",(function(){e.executeHandler("change")})),t()}))}))}},{key:"clear",value:function(){this.hostMap.plugins.drawingTools.clear()}},{key:"editPrimitive",value:function(e){var t=this.getPrimitiveFromComponent(e);if(void 0===t)throw new Error("Fail to find primitive with id ".concat(e.id));this.hostMap.plugins.drawingTools.edit(t)}},{key:"getPrimitiveFromComponent",value:function(e){var t=this.primitiveComponentMap.getBackward(e.id);if(void 0!==t)return this.hostMap.plugins.drawingTools.getPrimitiveByID(t)}}])}(Mn);function An(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ln={exports:{}};
/*!
          localForage -- Offline Storage, Improved
          Version 1.10.0
          https://localforage.github.io/localForage
          (c) 2013-2017 Mozilla, Apache License 2.0
      */!function(e){e.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(!s&&An)return An(a);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){var n=t[a][1][e];return o(n||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var i=An,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}function d(e){1!==u.push(e)||r||n()}t.exports=d}).call(this,void 0!==Qe?Qe:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var i={},a=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==o&&p(this,e)}function d(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(o){return i.reject(e,o)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"===s(e)||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function a(){t(o,r)}var s=v(a);"error"===s.status&&r(s.value)}function v(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}function m(e){return e instanceof this?e:i.resolve(new this(o),e)}function g(e){var t=new this(o);return i.reject(t,e)}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,u=new this(o);++c<n;)l(e[c],c);return u;function l(e,o){function c(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(u,a))}t.resolve(e).then(c,(function(e){r||(r=!0,i.reject(u,e))}))}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(o);++a<n;)c(e[a]);return s;function c(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(s,e))}),(function(e){r||(r=!0,i.reject(s,e))}))}}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===c||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==u?f(n,this.state===c?e:t,this.outcome):this.queue.push(new d(n,e,t)),n},d.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},d.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},d.prototype.callRejected=function(e){i.reject(this.promise,e)},d.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=v(h,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=c,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=m,l.reject=g,l.all=y,l.race=b},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==Qe?Qe:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=i();function c(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(n){return!1}}function u(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function d(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function f(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var v="local-forage-detect-blob-support",m=void 0,g={},y=Object.prototype.toString,b="readonly",w="readwrite";function k(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function x(e){return new l((function(t){var n=e.transaction(v,w),r=u([""]);n.objectStore(v).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function S(e){return"boolean"==typeof m?l.resolve(m):x(e).then((function(e){return m=e}))}function C(e){var t=g[e.name],n={};n.promise=new l((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function _(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function z(e,t){var n=g[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function I(e,t){return new l((function(n,r){if(g[e.name]=g[e.name]||T(),e.db){if(!t)return n(e.db);C(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(v)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),_(e)}}))}function E(e){return I(e,!1)}function R(e){return I(e,!0)}function O(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function D(e){return new l((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function j(e){return u([k(atob(e.data))],{type:e.type})}function P(e){return e&&e.__local_forage_encoded_blob}function M(e){var t=this,n=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return f(n,e,e),n}function B(e){C(e);for(var t=g[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,E(e).then((function(t){return e.db=t,O(e)?R(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw z(e,t),t}))}function N(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return l.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),R(e)})).then((function(){return B(e).then((function(){N(e,t,n,r-1)}))})).catch(n);n(i)}}function T(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function A(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=g[n.name];o||(o=T(),g[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=M);var i=[];function a(){return l.resolve()}for(var s=0;s<o.forages.length;s++){var c=o.forages[s];c!==t&&i.push(c._initReady().catch(a))}var u=o.forages.slice(0);return l.all(i).then((function(){return n.db=o.db,E(n)})).then((function(e){return n.db=e,O(n,t._defaultConfig.version)?R(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var i=u[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function L(e,t){var n=this;e=h(e);var r=new l((function(t,r){n.ready().then((function(){N(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),P(e)&&(e=j(e)),t(e)},a.onerror=function(){r(a.error)}}catch(s){r(s)}}))})).catch(r)}));return d(r,t),r}function F(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){N(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;P(r)&&(r=j(r));var o=e(r,n.key,s++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(c){r(c)}}))})).catch(r)}));return d(r,t),r}function H(e,t,n){var r=this;e=h(e);var o=new l((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===y.call(t)?S(i.db).then((function(e){return e?t:D(t)})):t})).then((function(t){N(r._dbInfo,w,(function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(u){o(u)}}))})).catch(o)}));return d(o,n),o}function U(e,t){var n=this;e=h(e);var r=new l((function(t,r){n.ready().then((function(){N(n._dbInfo,w,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(s){r(s)}}))})).catch(r)}));return d(r,t),r}function W(e){var t=this,n=new l((function(e,n){t.ready().then((function(){N(t._dbInfo,w,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(a){n(a)}}))})).catch(n)}));return d(n,e),n}function G(e){var t=this,n=new l((function(e,n){t.ready().then((function(){N(t._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(a){n(a)}}))})).catch(n)}));return d(n,e),n}function q(e,t){var n=this,r=new l((function(t,r){e<0?t(null):n.ready().then((function(){N(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(u){r(u)}}))})).catch(r)}));return d(r,t),r}function X(e){var t=this,n=new l((function(e,n){t.ready().then((function(){N(t._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(s){n(s)}}))})).catch(n)}));return d(n,e),n}function Y(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var i=e.name===n.name&&o._dbInfo.db?l.resolve(o._dbInfo.db):E(e).then((function(t){var n=g[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;C(e);var r=g[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var s=o[i];s._dbInfo.db=null,s._dbInfo.version=n}var c=new l((function(t,r){var o=a.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}));return c.then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,_(n._dbInfo)}})).catch((function(t){throw(z(e,t)||l.resolve()).catch((function(){})),t}))}})):i.then((function(t){C(e);var n=g[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;var i=new l((function(t,n){var r=a.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return i.then((function(e){n.db=e;for(var t=0;t<r.length;t++)_(r[t]._dbInfo)})).catch((function(t){throw(z(e,t)||l.resolve()).catch((function(){})),t}))}))}else r=l.reject("Invalid arguments");return d(r,t),r}var J={_driver:"asyncStorage",_initStorage:A,_support:c(),iterate:F,getItem:L,setItem:H,removeItem:U,clear:W,length:G,key:q,keys:X,dropInstance:Y};function K(){return"function"==typeof openDatabase}var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$="~~local_forage_type~",Q=/^~~local_forage_type~([^~]+)~/,Z="__lfsc__:",ee=Z.length,te="arbf",ne="blob",re="si08",oe="ui08",ie="uic8",ae="si16",se="si32",ce="ur16",ue="ui32",le="fl32",de="fl64",fe=ee+te.length,he=Object.prototype.toString;function pe(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=V.indexOf(e[t]),r=V.indexOf(e[t+1]),o=V.indexOf(e[t+2]),i=V.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u}function ve(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=V[n[t]>>2],r+=V[(3&n[t])<<4|n[t+1]>>4],r+=V[(15&n[t+1])<<2|n[t+2]>>6],r+=V[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function me(e,t){var n="";if(e&&(n=he.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var r,o=Z;e instanceof ArrayBuffer?(r=e,o+=te):(r=e.buffer,"[object Int8Array]"===n?o+=re:"[object Uint8Array]"===n?o+=oe:"[object Uint8ClampedArray]"===n?o+=ie:"[object Int16Array]"===n?o+=ae:"[object Uint16Array]"===n?o+=ce:"[object Int32Array]"===n?o+=se:"[object Uint32Array]"===n?o+=ue:"[object Float32Array]"===n?o+=le:"[object Float64Array]"===n?o+=de:t(new Error("Failed to get type for BinaryArray"))),t(o+ve(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=$+e.type+"~"+ve(this.result);t(Z+ne+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(a){console.error("Couldn't convert value into a JSON string: ",e),t(null,a)}}function ge(e){if(e.substring(0,ee)!==Z)return JSON.parse(e);var t,n=e.substring(fe),r=e.substring(ee,fe);if(r===ne&&Q.test(n)){var o=n.match(Q);t=o[1],n=n.substring(o[0].length)}var i=pe(n);switch(r){case te:return i;case ne:return u([i],{type:t});case re:return new Int8Array(i);case oe:return new Uint8Array(i);case ie:return new Uint8ClampedArray(i);case ae:return new Int16Array(i);case ce:return new Uint16Array(i);case se:return new Int32Array(i);case ue:return new Uint32Array(i);case le:return new Float32Array(i);case de:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var ye={serialize:me,deserialize:ge,stringToBuffer:pe,bufferToString:ve};function be(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function we(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new l((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(o){return r(o)}n.db.transaction((function(o){be(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ye,o}function ke(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):be(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,a)}),i)}function xe(e,t){var n=this;e=h(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){ke(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return d(r,t),r}function Se(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){ke(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,c.key,s+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return d(r,t),r}function Ce(e,t,n,r){var o=this;e=h(e);var i=new l((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?a(u):c.db.transaction((function(n){ke(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Ce.apply(o,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return d(i,n),i}function _e(e,t,n){return Ce.apply(this,[e,t,n,1])}function ze(e,t){var n=this;e=h(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){ke(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return d(r,t),r}function Ie(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){ke(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function Ee(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){ke(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function Re(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){ke(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return d(r,t),r}function Oe(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){ke(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return d(n,e),n}function De(e){return new l((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function je(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return d(r=e.name?new l((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(De(r))})).then((function(e){return new l((function(t,n){e.db.transaction((function(r){function o(e){return new l((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],a=0,s=e.storeNames.length;a<s;a++)i.push(o(e.storeNames[a]));l.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):l.reject("Invalid arguments"),t),r}var Pe={_driver:"webSQLStorage",_initStorage:we,_support:K(),iterate:Se,getItem:xe,setItem:_e,removeItem:ze,clear:Ie,length:Ee,key:Re,keys:Oe,dropInstance:je};function Me(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Be(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Ne(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function Te(){return!Ne()||localStorage.length>0}function Ae(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Be(e,t._defaultConfig),Te()?(t._dbInfo=n,n.serializer=ye,l.resolve()):l.reject()}function Le(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return d(n,e),n}function Fe(e,t){var n=this;e=h(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return d(r,t),r}function He(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(o),a++)))return u}}}));return d(r,t),r}function Ue(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return d(r,t),r}function We(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return d(n,e),n}function Ge(e){var t=this.keys().then((function(e){return e.length}));return d(t,e),t}function qe(e,t){var n=this;e=h(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return d(r,t),r}function Xe(e,t,n){var r=this;e=h(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new l((function(o,i){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||i(s),i(s)}}))}))}));return d(o,n),o}function Ye(e,t){if(t=p.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new l((function(t){e.storeName?t(Be(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):l.reject("Invalid arguments"),d(r,t),r}var Je={_driver:"localStorageWrapper",_initStorage:Ae,_support:Me(),iterate:He,getItem:Fe,setItem:Xe,removeItem:qe,clear:Le,length:Ge,key:Ue,keys:We,dropInstance:Ye},Ke=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ve=function(e,t){for(var n=e.length,r=0;r<n;){if(Ke(e[r],t))return!0;r++}return!1},$e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Qe={},Ze={},et={INDEXEDDB:J,WEBSQL:Pe,LOCALSTORAGE:Je},tt=[et.INDEXEDDB._driver,et.WEBSQL._driver,et.LOCALSTORAGE._driver],nt=["dropInstance"],rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(nt),ot={description:"",driver:tt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function it(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function at(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&($e(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var st=function(){function e(t){for(var n in o(this,e),et)if(et.hasOwnProperty(n)){var r=et[n],i=r._driver;this[n]=i,Qe[i]||this.defineDriver(r)}this._defaultConfig=at({},ot),this._config=at({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new l((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=rt.concat("_initStorage"),a=0,s=i.length;a<s;a++){var c=i[a];if((!Ve(nt,c)||e[c])&&"function"!=typeof e[c])return void n(o)}var u=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=l.reject(t);return d(n,arguments[arguments.length-1]),n}},n=0,r=nt.length;n<r;n++){var o=nt[n];e[o]||(e[o]=t(o))}};u();var f=function(n){Qe[r]&&console.info("Redefining LocalForage driver: "+r),Qe[r]=e,Ze[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(h){n(h)}}));return f(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Qe[e]?l.resolve(Qe[e]):l.reject(new Error("Driver not found."));return f(r,t,n),r},e.prototype.getSerializer=function(e){var t=l.resolve(ye);return f(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return f(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;$e(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function a(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();var s=new Error("No available storage method found.");return r._driverSet=l.reject(s),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return l.resolve()})):l.resolve();return this._driverSet=c.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=l.reject(e),r._driverSet})),f(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Ze[e]},e.prototype._extend=function(e){at(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=rt.length;e<t;e++)it(this,rt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),ct=new st;t.exports=ct},{3:3}]},{},[4])(4)}(Ln);var Fn=Ze(Ln.exports),Hn=function(){return p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He();f(this,e),v(this,"id",void 0),v(this,"name",void 0),v(this,"routes",void 0),this.id=r,this.name=t,this.routes=n}),[{key:"getRoutes",value:function(){return Object.freeze(this.routes)}},{key:"getRoute",value:function(e){return this.routes.find((function(t){return t.id===e}))}},{key:"addRoute",value:function(e){this.routes.push(e)}},{key:"exportAsGeoJSON",value:function(){return{type:"FeatureCollection",features:this.routes.map((function(e){return e.exportAsGeoJSON()}))}}},{key:"exportToStorage",value:function(){return{id:this.id,name:this.name,routes:this.routes.map((function(e){return e.exportToStorage()}))}}}])}();!function(e){function t(e,t,n){if(e.features)throw new Error("[importItemFromGeoJSON] Only one feature is supported");var r=e.properties,o=e.geometry.type,i=e.geometry.coordinates;if("LineString"!==o)throw new Error("[importItemFromGeoJSON] Unsupported geometry type for routes ".concat(o));return n=n||He(),new Un(t=t||n,n,i.map((function(e){return{latitude:e[1],longitude:e[0]}})),r)}function n(e){return new Un(e.name,e.id,e.points,e.properties)}e.create=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He();return new e(t,n,r)},e.createItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He();return new Un(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})},e.importFromGeoJSON=function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He();if(n.feature)throw new Error("Multiple features should be contained");r=r||o;var i=n.features.map((function(e,n){return t(e,"".concat(r,"-").concat(n))}));return new e(r,i,o)},e.importItemFromGeoJSON=t,e.importItemFromStorage=n,e.readFromStorage=function(t){return new e(t.name,t.routes.map((function(e){return n(e)})),t.id)}}(Hn||(Hn={}));var Un=function(){return p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};f(this,e),v(this,"name",void 0),v(this,"id",void 0),v(this,"properties",void 0),v(this,"points",void 0),this.name=t,this.id=n,this.properties=o,this.points=r}),[{key:"setPoints",value:function(e){this.points=Le(e)}},{key:"appendPoint",value:function(e){this.points.push(Le(e))}},{key:"getPoints",value:function(){return Object.freeze(this.points)}},{key:"setProperties",value:function(e){var t=Le(e);Object.assign(this.properties,t)}},{key:"exportAsGeoJSON",value:function(){return{type:"Feature",properties:Object.assign({},this.properties,{name:this.name,id:this.id}),geometry:{type:"LineString",coordinates:this.points.map((function(e){return[e.longitude,e.latitude]}))}}}},{key:"exportAsBingMapsPrimitive",value:function(){return new Microsoft.Maps.Polyline(this.points.map((function(e){return new Microsoft.Maps.Location(e.latitude,e.longitude)})),this.properties)}},{key:"exportToStorage",value:function(){return{name:this.name,id:this.id,properties:this.properties,points:this.points}}}])}(),Wn=Hn,Gn=Object.freeze(Object.defineProperty({__proto__:null,get CartoSketchRoute(){return Hn},CartoSketchRouteItem:Un,default:Wn},Symbol.toStringTag,{value:"Module"})),qn=["Polygon","LineString","Point"],Xn=function(){return p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He();f(this,e),v(this,"id",void 0),v(this,"name",void 0),v(this,"drafts",void 0),this.id=r,this.name=t,this.drafts=n}),[{key:"getDrafts",value:function(){return Object.freeze(this.drafts)}},{key:"getDraft",value:function(e){return this.drafts.find((function(t){return t.id===e}))}},{key:"addDraft",value:function(e){this.drafts.push(e)}},{key:"exportAsGeoJSON",value:function(){return{type:"FeatureCollection",features:this.drafts.map((function(e){return e.exportAsGeoJSON()}))}}},{key:"exportToStorage",value:function(){return{id:this.id,name:this.name,drafts:this.drafts.map((function(e){return e.exportToStorage()}))}}}])}();!function(e){function t(e,t,n){if(Array.isArray(e.features))throw new Error("[createDraftItemFromGeoJSON] Only one feature is supported");var r=e.geometry.type,o=Array.isArray(e.geometry.coordinates[0])?e.geometry.coordinates:[e.geometry.coordinates],i=e.properties.title;if(!(r in qn))throw new Error("Invalid or unsupported geometry type ".concat(r," in feature ").concat(i));if(!o)throw new Error("No coordinates provided in feature ".concat(i));if(!i)throw new Error("No title provided");var a={title:i,subTitle:e.properties.subTitle||"",label:e.properties.label||"",fillColor:e.properties.fillColor||"",strokeColor:e.properties.strokeColor||"",strokeThickness:e.properties.strokeThickness||1,icon:e.properties.icon||"",visible:e.properties.visible||!0};return new Yn(t||i,{type:r,coordinates:o},n,a)}e.create=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He();return new e(t,n,r)},e.createItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He();return new Yn(e,arguments.length>2?arguments[2]:void 0,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})},e.importItemFromGeoJSON=t,e.importFromGeoJSON=function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He();if(n.feature)throw new Error("[importFromGeoJSON] Multiple features should be contained");var i=n.features.map((function(e,n){return t(e,"".concat(r,"-").concat(n),void 0)}));return new e(o,i,o)},e.readItemFromStorage=function(e){return new Yn(e.name,e.shape,e.id,e.properties)},e.readFromStorage=function(t){return new e(t.name,t.drafts.map((function(t){return e.readItemFromStorage(t)})),t.id)}}(Xn||(Xn={}));var Yn=function(){return p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He(),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};f(this,e),v(this,"name",void 0),v(this,"id",void 0),v(this,"shape",void 0),v(this,"properties",void 0),this.name=t,this.id=r,this.shape=n,this.properties=o}),[{key:"setShapes",value:function(e){this.shape=e}},{key:"getShapes",value:function(){return Object.freeze(this.shape)}},{key:"setProperties",value:function(e){var t=Le(e);Object.assign(this.properties,t)}},{key:"exportAsGeoJSON",value:function(){return{type:"Feature",properties:Object.assign({},this.properties,{name:this.name,id:this.id}),geometry:this.shape}}},{key:"exportToStorage",value:function(){return{name:this.name,id:this.id,properties:this.properties,shape:this.shape}}}])}(),Jn=Xn,Kn=Object.freeze(Object.defineProperty({__proto__:null,get CartoSketchDraft(){return Xn},CartoSketchDraftItem:Yn,default:Jn},Symbol.toStringTag,{value:"Module"})),Vn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He(),r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;f(this,e),v(this,"id",void 0),v(this,"name",void 0),v(this,"routes",void 0),v(this,"drafts",void 0),this.name=t,this.id=n,this.routes=r||new Wn(t,[],n),this.drafts=o||new Jn(t,[],n)}return p(e,[{key:"exportToStorage",value:function(){return{id:this.id,name:this.name,routes:this.routes.exportToStorage(),drafts:this.drafts.exportToStorage()}}},{key:"exportAsGeoJSON",value:function(){var e=this.routes.exportAsGeoJSON().features,t=this.drafts.exportAsGeoJSON().features;return{type:"FeatureCollection",features:[].concat(o(e),o(t))}}},{key:"save",value:(n=r(t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.write(this);case 2:case"end":return t.stop()}}),n,this)}))),function(){return n.apply(this,arguments)})}]);var n}();!function(n){function o(e){return i.apply(this,arguments)}function i(){return(i=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Promise,e.next=4,n.storage.getItem(r);case 4:return e.t1=!!e.sent,e.abrupt("return",e.t0.resolve.call(e.t0,e.t1));case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",Promise.reject(e.t2));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function a(){return(a=r(t().mark((function n(){var r,o,i,a,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.t0=e,t.next=4,c();case 4:t.t1=t.sent,o=(0,t.t0)(t.t1),t.prev=6,o.s();case 8:if((i=o.n()).done){t.next=16;break}return a=i.value,t.next=12,m(a);case 12:(s=t.sent)?r.push({name:s.name,id:s.id}):console.error("CartoSketch ".concat(a," cannot be read, ignore"));case 14:t.next=8;break;case 16:t.next=21;break;case 18:t.prev=18,t.t2=t.catch(6),o.e(t.t2);case 21:return t.prev=21,o.f(),t.finish(21);case 24:return t.abrupt("return",Promise.resolve(r));case 25:case"end":return t.stop()}}),n,null,[[6,18,21,24]])})))).apply(this,arguments)}function s(e){return new n(e.name,e.id,n.Routes.CartoSketchRoute.readFromStorage(e.routes),n.Drafts.CartoSketchDraft.readFromStorage(e.drafts))}function c(){return u.apply(this,arguments)}function u(){return(u=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.storage.keys();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=r(t().mark((function n(){var r,o,i,a;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.t0=e,t.next=4,c();case 4:t.t1=t.sent,o=(0,t.t0)(t.t1),t.prev=6,o.s();case 8:if((i=o.n()).done){t.next=17;break}return a=i.value,t.t2=r,t.next=13,h(a);case 13:t.t3=t.sent,t.t2.push.call(t.t2,t.t3);case 15:t.next=8;break;case 17:t.next=22;break;case 19:t.prev=19,t.t4=t.catch(6),o.e(t.t4);case 22:return t.prev=22,o.f(),t.finish(22);case 25:return t.abrupt("return",Promise.resolve(r));case 26:case"end":return t.stop()}}),n,null,[[6,19,22,25]])})))).apply(this,arguments)}function d(){return(d=r(t().mark((function n(){var r,o,i,a,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.t0=e,t.next=4,c();case 4:t.t1=t.sent,o=(0,t.t0)(t.t1),t.prev=6,o.s();case 8:if((i=o.n()).done){t.next=16;break}return a=i.value,t.next=12,m(a);case 12:(s=t.sent)&&r.push(s);case 14:t.next=8;break;case 16:t.next=21;break;case 18:t.prev=18,t.t2=t.catch(6),o.e(t.t2);case 21:return t.prev=21,o.f(),t.finish(21);case 24:return t.abrupt("return",Promise.resolve(r));case 25:case"end":return t.stop()}}),n,null,[[6,18,21,24]])})))).apply(this,arguments)}function f(){return f=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){o(n).then(function(){var o=r(t().mark((function r(o){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=5;break}return t.next=3,b(n).then((function(){return e()})).catch((function(e){return i("Fail to remove the CartoSketch with id: ".concat(n,". Reason: ").concat(e))}));case 3:t.next=6;break;case 5:i("The CartoSketch with id: "+n+" cannot be found and will not be removed");case 6:case"end":return t.stop()}}),r)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){i("Fail to identify the existence of the CartoSketch with id: ".concat(n,". Reason: ").concat(e,". It will not be removed"))}))})));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(n);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",Promise.reject("The CartoSketch with id: "+n+" not found"));case 4:return e.next=6,m(n);case 6:if(!(r=e.sent)){e.next=11;break}return e.abrupt("return",Promise.resolve(s(r)));case 11:return e.abrupt("return",Promise.reject("The CartoSketch with id: "+n+" is empty. It cannot be read"));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(n.id,n.exportToStorage());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return(g=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){n.storage.getItem(r).then((function(t){return e(null!==t?t:void 0)})).catch((function(e){return t(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return new Promise((function(r,o){n.storage.setItem(e,t).then((function(){return r()})).catch((function(e){return o(e)}))}))}function b(e){return new Promise((function(t,r){n.storage.removeItem(e).then((function(){return t()})).catch((function(e){return r(e)}))}))}n.storageSpace="cartosketch_storage",n.storage=Fn.createInstance({name:n.storageSpace}),n.Routes=Gn,n.Drafts=Kn,n.exist=o,n.getInfoList=function(){return a.apply(this,arguments)},n.readFromStorage=s,n.getIDList=c,n.getList=function(){return l.apply(this,arguments)},n.getListRaw=function(){return d.apply(this,arguments)},n.remove=function(e){return f.apply(this,arguments)},n.read=h,n.write=function(e){return v.apply(this,arguments)},n.readRaw=m,n.writeRaw=y,n.deleteRaw=b}(Vn||(Vn={}));var $n,Qn,Zn=Vn;function er(e){return e.getDrafts().map((function(e){return function(e){var t=e.getShapes();switch(t.type){case"Point":var n={latitude:t.coordinates[0][1],longitude:t.coordinates[0][0]},r=Object.assign({},{draggable:!1,icon:"",label:"",title:e.name||"",subTitle:"",visible:!0},e.properties);return new We([n],r,e.id,e.name);case"LineString":var o=t.coordinates.map((function(e){return{longitude:e[0],latitude:e[1]}})),i=Object.assign({},{strokeColor:"#000000",strokeThickness:1,visible:!0},e.properties);return new Ue(o,i,e.id,e.name);case"Polygon":var a=t.coordinates.map((function(e){return{longitude:e[0],latitude:e[1]}})),s=Object.assign({},{fillColor:"#2d9cec",strokeColor:"#000000",strokeThickness:1,visible:!0},e.properties);return new Ue(a,s,e.id,e.name);default:throw new Error("Unknown GeoJSON type: ".concat(t.type))}}(e)}))}function tr(e){return e.getRoutes().map((function(e){return function(e){var t=Object.assign({},{strokeColor:"#000000",strokeThickness:1,visible:!0},e.properties),n=e.getPoints().map((function(e){return{latitude:e.latitude,longitude:e.longitude}}));return new Ue(n,t,e.id,e.name)}(e)}))}function nr(e){return{routes:tr(e.routes),drafts:er(e.drafts)}}function rr(e,t,n){var r=e.map((function(e){return function(e){var t=Le(e.getProperties()),n={type:e.type,coordinates:e.coordinates.map((function(e){return[e.longitude,e.latitude]}))};switch(e.type){case"Polygon":case"LineString":case"Point":return new Yn(e.name,n,e.id,t);default:throw new Error("Unknown component type: ".concat(e.type))}}(e)}));return new Xn(n,r,t)}function or(e,t,n){return new Hn(n,e.map((function(e){return n=(t=e).getLocations().map((function(e){return{latitude:e.latitude,longitude:e.longitude}})),r=Le(t.getProperties()),new Un(t.name,t.id,n,r);var t,n,r})),t)}(Qn=$n||($n={})).ua=new Je.UAParser(navigator.userAgent),Qn.isMobile="mobile"===Qn.ua.getDevice().type,Qn.isTablet="tablet"===Qn.ua.getDevice().type,Qn.isUnknown=""===Qn.ua.getDevice().type,Qn.browser=Qn.ua.getBrowser().name||"",Qn.engine=Qn.ua.getEngine().name||"",Qn.os=Qn.ua.getOS().name||"";var ir="Mac OS"===$n.os,ar=function(){return p((function e(t){f(this,e),v(this,"handlers",[]),v(this,"backend",void 0),v(this,"isBackendReady",!1),v(this,"initialised",!1),v(this,"sketchID",void 0),v(this,"sketchName",void 0),v(this,"shortcutMounted",!1),this.backend=t,this.backend&&this.backendReady()}),[{key:"setBackend",value:function(e){this.backend=e,this.isBackendReady=!1,this.backendReady()}},{key:"backendReady",value:function(){var e=this;this.backend&&this.backend.addHandler("ready",(function(){e.isBackendReady=!0,e.initialiseAdapter()}))}},{key:"checkBackendReady",value:function(){return this.isBackendReady||console.warn("SketchEditAdapter: Backend is not ready"),this.isBackendReady}},{key:"initialiseAdapter",value:function(){this.mountKeyShortcuts(),this.initialised=!0}},{key:"redo",value:function(){this.checkBackendReady()&&(console.log("redo"),this.backend.redo())}},{key:"undo",value:function(){this.checkBackendReady()&&(console.log("undo"),this.backend.undo())}},{key:"escape",value:function(){this.checkBackendReady()&&this.backend.escape()}},{key:"edit",value:function(e){this.checkBackendReady()&&this.backend.editComponent(e)}},{key:"clear",value:function(){this.checkBackendReady()&&(console.log("clear"),this.backend.clear())}},{key:"mountKeyShortcuts",value:function(){var e=this;this.checkBackendReady()&&(this.shortcutMounted||(this.shortcutMounted=!0,document.addEventListener("keyup",(function(t){console.log(t.key,t.ctrlKey,t.metaKey,t.shiftKey);var n="z"===t.key&&!t.shiftKey&&(t.ctrlKey&&!ir||t.metaKey&&ir),r="z"===t.key&&t.shiftKey&&(t.ctrlKey&&!ir||t.metaKey&&ir);n&&e.undo(),r&&e.redo(),"Escape"===t.key&&e.escape()}))))}},{key:"executeHandler",value:function(e){this.handlers.forEach((function(t){t.type===e&&t.handler()}))}},{key:"addHandler",value:function(e,t){var n=this.handlers.length>0?this.handlers[this.handlers.length-1].id+1:0;this.handlers.push({type:e,id:n,handler:t})}},{key:"removeHandler",value:function(e){this.handlers=this.handlers.filter((function(t){return t.id!==e}))}},{key:"load",value:(n=r(t().mark((function e(n){var r,o,i=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkBackendReady()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Zn.read(n);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return",Promise.reject("Cannot load sketch ".concat(n)));case 7:if(console.log(r,this),this.sketchID=r.id,this.sketchName=r.name,this.initialised){e.next=13;break}return console.warn("Cannot import from sketch, adapter not initialised"),e.abrupt("return");case 13:(o=nr(r)).routes.forEach((function(e){i.backend.add(e,"route")})),o.drafts.forEach((function(e){i.backend.add(e,"draft")})),this.executeHandler("change");case 17:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"save",value:(e=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkBackendReady()){e.next=2;break}return e.abrupt("return");case 2:if(this.initialised){e.next=5;break}return console.warn("Cannot export to sketch, adapter not initialised"),e.abrupt("return");case 5:if(this.sketchID&&this.sketchName){e.next=7;break}return e.abrupt("return",Promise.reject("Cannot export to sketch, sketch ID or name not set. It seems the sketch has not been loaded yet"));case 7:return n=this.backend.getClassifiedProxyComponents(),t=n.routes,o=n.drafts,i=this.sketchID,a=this.sketchName,s=void 0,c=void 0,s=or(t,i,a),c=rr(o,i,a),r=new Zn(a,i,s,c),e.next=11,r.save();case 11:case"end":return e.stop()}var t,o,i,a,s,c}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,n}(),sr={class:"edit-layout"},cr=["onClick","title"],ur=_({__name:"SketchEdit",props:{liteMode:{type:Boolean},forceHighDpi:{type:Boolean},mapType:{}},setup:function(e){var n=e,o=new ar,i=a([]),s=a(!1),c=a(Microsoft.Maps.MapTypeId.road),l=a(!1),d=a("right"),f={open:function(){return l.value=!0},close:function(){return l.value=!1}},h=[{title:"save",icon:xn,iconSize:20,callback:o.save.bind(o)},{title:"Open",icon:hn,iconSize:20,callback:f.open}];function p(e){var t=new Tn(e);o.setBackend(t),window.adapter=o,s.value=!0}function v(){return m.apply(this,arguments)}function m(){return(m=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=prompt("Enter the name of the new CartoSketch"))){e.next=5;break}return e.next=4,Zn.write(new Zn(n));case 4:g();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){Zn.getInfoList().then((function(e){i.value=e}))}function y(e){return b.apply(this,arguments)}function b(){return(b=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn.remove(n);case 2:g();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.load(n);case 2:console.log("selected sketch, id:",n),f.close();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return u((function(){g()})),function(e,t){return Se(),Ce(Re,null,[Ie(Pn,{list:i.value,active:l.value,"onUpdate:active":t[0]||(t[0]=function(e){return l.value=e}),placement:d.value,onNew:v,onRemove:y,onSelect:w,onActiveStateSync:t[1]||(t[1]=function(e){l.value=e}),onImport:t[2]||(t[2]=function(e){alert("Not implemented")})},null,8,["list","active","placement"]),Ie(je(rn),{direction:"horizontal",max:.8,min:.4,"default-size":.7},{1:Ee((function(){return[Ie(je(nt),{class:"map-container","content-style":"padding: 0"},{default:Ee((function(){return[q(Ie(Ke,{"map-type":c.value,plugin:je(zn),"lite-mode":n.liteMode,forceHiDPI:n.forceHighDpi,onReady:p},null,8,["map-type","plugin","lite-mode","forceHiDPI"]),[[X,je(s)]]),je(s)?Ge("",!0):(Se(),De(je(St),{key:0,description:"Map",size:"huge",style:{height:"100%","justify-content":"center"}},{icon:Ee((function(){return[Ie(je(Pe),null,{default:Ee((function(){return[Ie(je(mn))]})),_:1})]})),_:1}))]})),_:1})]})),2:Ee((function(){return[_e("div",sr,[Ie(je(nt),{"content-class":"route-edit-tool-tip"},{default:Ee((function(){return[(Se(),Ce(Re,null,Oe(h,(function(e,t){return _e("div",{key:t,onClick:e.callback,title:e.title,class:"tool-tip-item"},[Ie(je(Pe),{size:e.iconSize},{default:Ee((function(){return[(Se(),De(Ae(e.icon)))]})),_:2},1032,["size"])],8,cr)})),64))]})),_:1}),Ie(je(nt),{class:"draft-container"},qe({default:Ee((function(){return[je(s)?(Se(),De(je(rn),{key:0,direction:"vertical",max:.8,min:.3,"default-size":.7},{1:Ee((function(){return[]})),2:Ee((function(){return[]})),_:1})):Ge("",!0),je(s)?Ge("",!0):(Se(),De(je(St),{key:1,description:"No sketch selected",style:{height:"100%","justify-content":"center"}},{icon:Ee((function(){return[Ie(je(Pe))]})),extra:Ee((function(){return[Ie(je($e),{size:"small",onClick:t[3]||(t[3]=function(e){return f.open()})},{default:Ee((function(){return[Be("Select a sketch")]})),_:1})]})),_:1}))]})),_:2},[je(s)?{name:"header",fn:Ee((function(){return[Be(" Components ")]})),key:"0"}:void 0]),1024)])]})),_:1})],64)}}}),lr=Te(ur,[["__scopeId","data-v-47681c83"]]);n("default",_({__name:"EditView",setup:function(e){return function(e,t){return Se(),De(lr,{"lite-mode":!0,"force-high-dpi":!1})}}}))}}}))}();
