var x=Object.defineProperty;var P=(s,e,t)=>e in s?x(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var h=(s,e,t)=>P(s,typeof e!="symbol"?e+"":e,t);import{u as B,M,I as w,B as _,N as y}from"./map-manager-BFAynjyZ.js";import{d as f,o as v,c as k,af as p,r as z,ay as b,b as C,ak as I,al as r,ah as d,a as l,aq as T,az as $}from"./index-5rhT695Q.js";import{N as D}from"./Element-BFe6sE4A.js";const E={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},N=p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 112v288"},null,-1),V=p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),Z=[N,V],L=f({name:"Add",render:function(e,t){return v(),k("svg",E,Z)}}),R={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},H=p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),O=[H],S=f({name:"Remove",render:function(e,t){return v(),k("svg",R,O)}}),j=["id"],F={class:"nav-toolbox"},A=f({__name:"BingMapView",props:{plugin:{},centre:{},viewCentre:{},tracking:{type:Boolean},mapType:{},zoom:{},liteMode:{type:Boolean},forceHiDPI:{type:Boolean},customizedTouchpadBehavior:{type:Boolean},enableInertia:{type:Boolean},showDashboard:{type:Boolean}},emits:["ready","update:zoom","update:centre","update:viewCentre","update:mapType"],setup(s,{emit:e}){let t=z(24);const o=B(),n={info:(c,a)=>o.info(c,{duration:a}),warning:(c,a)=>o.warning(c,{duration:a}),error:(c,a)=>o.error(c,{duration:a})},u=s,m=e,i=b(new M(u,m,n,"bing"));return C(()=>{i.mount(),i.trackingMode=!!u.tracking}),(c,a)=>(v(),I(r(D),{class:"container"},{default:d(()=>[p("div",{id:i.id,class:"bing-map-container"},null,8,j),p("div",F,[l(r(_),{strong:"",secondary:"",circle:"",type:"primary",onClick:a[0]||(a[0]=g=>i.zoom+=1)},{default:d(()=>[l(r(w),{size:r(t)},{default:d(()=>[l(r(L))]),_:1},8,["size"])]),_:1}),l(r(_),{strong:"",secondary:"",circle:"",type:"primary",onClick:a[1]||(a[1]=g=>i.zoom-=1)},{default:d(()=>[l(r(w),{size:r(t)},{default:d(()=>[l(r(S))]),_:1},8,["size"])]),_:1}),l(r(y),{value:i.trackingMode,"onUpdate:value":a[2]||(a[2]=g=>i.trackingMode=g),size:"small"},null,8,["value"])])]),_:1}))}}),X=T(A,[["__scopeId","data-v-fe0756dc"]]);class G{constructor(e){h(this,"host");h(this,"space","pushPinLayer");h(this,"pushPins",[]);this.host=e}mount(){return this.host.plugins[this.space]=this,!0}unmount(){try{this.host.plugins[this.space]=null,this.pushPins.forEach(e=>this.host.map.entities.remove(e.pin))}catch(e){return console.log(e),!1}return!0}add(e,t){const o=this.pushPins.length>0?this.pushPins[this.pushPins.length-1].id+1:0,n=new Microsoft.Maps.Pushpin(e,t);return this.host.map.entities.push(n),this.pushPins.push({id:o,pin:n}),o}remove(e){const t=this.pushPins.findIndex(o=>o.id===e);t!==-1&&(this.host.map.entities.remove(this.pushPins[t].pin),this.pushPins.splice(t,1))}setOptions(e,t){const o=this.pushPins.findIndex(n=>n.id===e);o!==-1&&this.pushPins[o].pin.setOptions(t)}setLocation(e,t){const o=this.pushPins.findIndex(n=>n.id===e);o!==-1&&this.pushPins[o].pin.setLocation(t)}}class J{constructor(e){h(this,"host");h(this,"space");h(this,"behaviour");this.host=e,this.space="customizedTouchpadBehavior"}mount(){return this.host.map.setOptions({disableScrollWheelZoom:!0}),this.behaviour=K(this.host,(e,t)=>{this.host.setViewPort({centre:e,zoom:t})}),this.host.container.addEventListener("wheel",this.behaviour,{passive:!1}),!0}unmount(){return this.host.map.setOptions({disableScrollWheelZoom:!1}),this.behaviour&&this.host.container.removeEventListener("wheel",this.behaviour),!0}}function K(s,e){const t=s.properties.liteModeForceHiDPI?window.devicePixelRatio:1,o=[5e3,2500,1e3,500,250,200,100,50,25,10,5,2,1,.4,.25,.2,.15,.12,.05,.025,.01];return n=>{$.updateDeivceType(n),n.preventDefault();const u=s.getZoom(),m=5e3/o[Math.round(u)]||1,i={...s.getViewCentre()};if(!(n.ctrlKey||n.metaKey))i.latitude=Math.max(-90,Math.min(90,i.latitude-n.deltaY*t/m)),i.longitude=(i.longitude+n.deltaX*t/m+180)%360-180,e(i,u);else{const c=Math.min(Math.max(u-n.deltaY*.05,s.getZoomRange().min),s.getZoomRange().max);e(i,c)}}}export{X as B,G as a,J as b};
