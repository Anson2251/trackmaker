var ht=Object.defineProperty;var ft=(o,e,t)=>e in o?ht(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var B=(o,e,t)=>ft(o,typeof e!="symbol"?e+"":e,t);import{r as D,b as We,w as ne,e as ge,f as mt,S as Se,i as pt,g as gt,h as vt,j as wt,k as bt,l as yt,m as ze,d as I,n as f,p as _,q as A,s as u,t as oe,v as Q,x as Ct,y as ve,z as xt,A as L,B as ke,C as we,N as St,D as $e,E,F as zt,G as te,H as Ve,I as be,J as Ye,K as kt,L as $t,M as _t,O as Mt,P as ie,Q as he,R as Bt,T as Xe,U as Rt,V as Ke,W as ae,X as Et,Y as Dt,Z as It,_ as fe,$ as me,a0 as _e,a1 as Pt,a2 as Ht,a3 as Y,a4 as Tt,a5 as Lt,a6 as Ft,a7 as Ot,a8 as Me,a9 as Be,aa as Re,o as M,c as U,ab as y,ac as Nt,a as S,ad as w,ae as se,af as ye,ag as K,ah as g,ai as J,aj as At,ak as pe,al as jt,am as Ge,an as qe,ao as Ut,ap as Wt,aq as Vt,ar as ce,as as Yt,at as re}from"./index-CxcRb_H6.js";import{a as Xt,b as Kt,B as Gt}from"./customized-touchpad-behavior-3lYqy0Ib.js";import{b as qt,B as Ce}from"./map-manager-bC_tjiCU.js";import{u as Zt,N as Jt,a as Qt,b as ue}from"./ListItem-C1IXtutE.js";import{i as eo}from"./Element-yaSdY-P1.js";const to=new WeakSet;function oo(o){return!to.has(o)}let G=0,Ee="",De="",Ie="",Pe="";const He=D("0px");function ro(o){if(typeof document>"u")return;const e=document.documentElement;let t,r=!1;const n=()=>{e.style.marginRight=Ee,e.style.overflow=De,e.style.overflowX=Ie,e.style.overflowY=Pe,He.value="0px"};We(()=>{t=ne(o,a=>{if(a){if(!G){const i=window.innerWidth-e.offsetWidth;i>0&&(Ee=e.style.marginRight,e.style.marginRight="".concat(i,"px"),He.value="".concat(i,"px")),De=e.style.overflow,Ie=e.style.overflowX,Pe=e.style.overflowY,e.style.overflow="hidden",e.style.overflowX="hidden",e.style.overflowY="hidden"}r=!0,G++}else G--,G||n(),r=!1},{immediate:!0})}),ge(()=>{t==null||t(),r&&(G--,G||n(),r=!1)})}const xe=D(!1);function Te(){xe.value=!0}function Le(){xe.value=!1}let ee=0;function no(){return eo&&(mt(()=>{ee||(window.addEventListener("compositionstart",Te),window.addEventListener("compositionend",Le)),ee++}),ge(()=>{ee<=1?(window.removeEventListener("compositionstart",Te),window.removeEventListener("compositionend",Le),ee=0):ee--})),xe}function io(o,e,t,r){for(var n=o.length,a=t+-1;++a<n;)if(e(o[a],a,o))return a;return-1}function so(o){return o!==o}function ao(o,e,t){for(var r=t-1,n=o.length;++r<n;)if(o[r]===e)return r;return-1}function lo(o,e,t){return e===e?ao(o,e,t):io(o,so,t)}function co(o,e){var t=o==null?0:o.length;return!!t&&lo(o,e,0)>-1}var Fe=Se?Se.isConcatSpreadable:void 0;function uo(o){return pt(o)||gt(o)||!!(Fe&&o&&o[Fe])}function ho(o,e,t,r,n){var a=-1,i=o.length;for(t||(t=uo),n||(n=[]);++a<i;){var m=o[a];t(m)&&vt(n,m)}return n}var fo=200;function mo(o,e,t,r){var n=-1,a=co,i=!0,m=o.length,s=[],c=e.length;if(!m)return s;e.length>=fo&&(a=bt,i=!1,e=new wt(e));e:for(;++n<m;){var p=o[n],v=p;if(p=p!==0?p:0,i&&v===v){for(var P=c;P--;)if(e[P]===v)continue e;s.push(p)}else a(e,v,r)||s.push(p)}return s}var Oe=yt(function(o,e){return ze(o)?mo(o,ho(e,1,ze)):[]});const po=I({name:"Empty",render(){return f("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),f("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),go=_("empty","\n display: flex;\n flex-direction: column;\n align-items: center;\n font-size: var(--n-font-size);\n",[A("icon","\n width: var(--n-icon-size);\n height: var(--n-icon-size);\n font-size: var(--n-icon-size);\n line-height: var(--n-icon-size);\n color: var(--n-icon-color);\n transition:\n color .3s var(--n-bezier);\n ",[u("+",[A("description","\n margin-top: 8px;\n ")])]),A("description","\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n "),A("extra","\n text-align: center;\n transition: color .3s var(--n-bezier);\n margin-top: 12px;\n color: var(--n-extra-text-color);\n ")]),vo=Object.assign(Object.assign({},Q.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),Ne=I({name:"Empty",props:vo,setup(o){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=oe(o),r=Q("Empty","-empty",go,Ct,o,e),{localeRef:n}=Zt("Empty"),a=ve(xt,null),i=L(()=>{var p,v,P;return(p=o.description)!==null&&p!==void 0?p:(P=(v=a==null?void 0:a.mergedComponentPropsRef.value)===null||v===void 0?void 0:v.Empty)===null||P===void 0?void 0:P.description}),m=L(()=>{var p,v;return((v=(p=a==null?void 0:a.mergedComponentPropsRef.value)===null||p===void 0?void 0:p.Empty)===null||v===void 0?void 0:v.renderIcon)||(()=>f(po,null))}),s=L(()=>{const{size:p}=o,{common:{cubicBezierEaseInOut:v},self:{[ke("iconSize",p)]:P,[ke("fontSize",p)]:F,textColor:H,iconColor:j,extraTextColor:V}}=r.value;return{"--n-icon-size":P,"--n-font-size":F,"--n-bezier":v,"--n-text-color":H,"--n-icon-color":j,"--n-extra-text-color":V}}),c=t?we("empty",L(()=>{let p="";const{size:v}=o;return p+=v[0],p}),s,o):void 0;return{mergedClsPrefix:e,mergedRenderIcon:m,localizedDescription:L(()=>i.value||n.value.description),cssVars:t?void 0:s,themeClass:c==null?void 0:c.themeClass,onRender:c==null?void 0:c.onRender}},render(){const{$slots:o,mergedClsPrefix:e,onRender:t}=this;return t==null||t(),f("div",{class:["".concat(e,"-empty"),this.themeClass],style:this.cssVars},this.showIcon?f("div",{class:"".concat(e,"-empty__icon")},o.icon?o.icon():f(St,{clsPrefix:e},{default:this.mergedRenderIcon})):null,this.showDescription?f("div",{class:"".concat(e,"-empty__description")},o.default?o.default():this.localizedDescription):null,o.extra?f("div",{class:"".concat(e,"-empty__extra")},o.extra()):null)}}),C="0!important",Ze="-1px!important";function q(o){return E("".concat(o,"-type"),[u("& +",[_("button",{},[E("".concat(o,"-type"),[A("border",{borderLeftWidth:C}),A("state-border",{left:Ze})])])])])}function Z(o){return E("".concat(o,"-type"),[u("& +",[_("button",[E("".concat(o,"-type"),[A("border",{borderTopWidth:C}),A("state-border",{top:Ze})])])])])}const wo=_("button-group","\n flex-wrap: nowrap;\n display: inline-flex;\n position: relative;\n",[$e("vertical",{flexDirection:"row"},[$e("rtl",[_("button",[u("&:first-child:not(:last-child)","\n margin-right: ".concat(C,";\n border-top-right-radius: ").concat(C,";\n border-bottom-right-radius: ").concat(C,";\n ")),u("&:last-child:not(:first-child)","\n margin-left: ".concat(C,";\n border-top-left-radius: ").concat(C,";\n border-bottom-left-radius: ").concat(C,";\n ")),u("&:not(:first-child):not(:last-child)","\n margin-left: ".concat(C,";\n margin-right: ").concat(C,";\n border-radius: ").concat(C,";\n ")),q("default"),E("ghost",[q("primary"),q("info"),q("success"),q("warning"),q("error")])])])]),E("vertical",{flexDirection:"column"},[_("button",[u("&:first-child:not(:last-child)","\n margin-bottom: ".concat(C,";\n margin-left: ").concat(C,";\n margin-right: ").concat(C,";\n border-bottom-left-radius: ").concat(C,";\n border-bottom-right-radius: ").concat(C,";\n ")),u("&:last-child:not(:first-child)","\n margin-top: ".concat(C,";\n margin-left: ").concat(C,";\n margin-right: ").concat(C,";\n border-top-left-radius: ").concat(C,";\n border-top-right-radius: ").concat(C,";\n ")),u("&:not(:first-child):not(:last-child)","\n margin: ".concat(C,";\n border-radius: ").concat(C,";\n ")),Z("default"),E("ghost",[Z("primary"),Z("info"),Z("success"),Z("warning"),Z("error")])])])]),bo={size:{type:String,default:void 0},vertical:Boolean},yo=I({name:"ButtonGroup",props:bo,setup(o){const{mergedClsPrefixRef:e,mergedRtlRef:t}=oe(o);return zt("-button-group",wo,e),te(qt,o),{rtlEnabled:Ve("ButtonGroup",t,e),mergedClsPrefix:e}},render(){const{mergedClsPrefix:o}=this;return f("div",{class:["".concat(o,"-button-group"),this.rtlEnabled&&"".concat(o,"-button-group--rtl"),this.vertical&&"".concat(o,"-button-group--vertical")],role:"group"},this.$slots)}}),Co=I({name:"NDrawerContent",inheritAttrs:!1,props:{blockScroll:Boolean,show:{type:Boolean,default:void 0},displayDirective:{type:String,required:!0},placement:{type:String,required:!0},contentClass:String,contentStyle:[Object,String],nativeScrollbar:{type:Boolean,required:!0},scrollbarProps:Object,trapFocus:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},showMask:{type:[Boolean,String],required:!0},maxWidth:Number,maxHeight:Number,minWidth:Number,minHeight:Number,resizable:Boolean,onClickoutside:Function,onAfterLeave:Function,onAfterEnter:Function,onEsc:Function},setup(o){const e=D(!!o.show),t=D(null),r=ve(be);let n=0,a="",i=null;const m=D(!1),s=D(!1),c=L(()=>o.placement==="top"||o.placement==="bottom"),{mergedClsPrefixRef:p,mergedRtlRef:v}=oe(o),P=Ve("Drawer",v,p),F=l,H=h=>{s.value=!0,n=c.value?h.clientY:h.clientX,a=document.body.style.cursor,document.body.style.cursor=c.value?"ns-resize":"ew-resize",document.body.addEventListener("mousemove",T),document.body.addEventListener("mouseleave",F),document.body.addEventListener("mouseup",l)},j=()=>{i!==null&&(window.clearTimeout(i),i=null),s.value?m.value=!0:i=window.setTimeout(()=>{m.value=!0},300)},V=()=>{i!==null&&(window.clearTimeout(i),i=null),m.value=!1},{doUpdateHeight:x,doUpdateWidth:z}=r,d=h=>{const{maxWidth:$}=o;if($&&h>$)return $;const{minWidth:O}=o;return O&&h<O?O:h},k=h=>{const{maxHeight:$}=o;if($&&h>$)return $;const{minHeight:O}=o;return O&&h<O?O:h};function T(h){var $,O;if(s.value)if(c.value){let N=(($=t.value)===null||$===void 0?void 0:$.offsetHeight)||0;const W=n-h.clientY;N+=o.placement==="bottom"?W:-W,N=k(N),x(N),n=h.clientY}else{let N=((O=t.value)===null||O===void 0?void 0:O.offsetWidth)||0;const W=n-h.clientX;N+=o.placement==="right"?W:-W,N=d(N),z(N),n=h.clientX}}function l(){s.value&&(n=0,s.value=!1,document.body.style.cursor=a,document.body.removeEventListener("mousemove",T),document.body.removeEventListener("mouseup",l),document.body.removeEventListener("mouseleave",F))}Ye(()=>{o.show&&(e.value=!0)}),ne(()=>o.show,h=>{h||l()}),ge(()=>{l()});const b=L(()=>{const{show:h}=o,$=[[he,h]];return o.showMask||$.push([kt,o.onClickoutside,void 0,{capture:!0}]),$});function R(){var h;e.value=!1,(h=o.onAfterLeave)===null||h===void 0||h.call(o)}return ro(L(()=>o.blockScroll&&e.value)),te($t,t),te(_t,null),te(Mt,null),{bodyRef:t,rtlEnabled:P,mergedClsPrefix:r.mergedClsPrefixRef,isMounted:r.isMountedRef,mergedTheme:r.mergedThemeRef,displayed:e,transitionName:L(()=>({right:"slide-in-from-right-transition",left:"slide-in-from-left-transition",top:"slide-in-from-top-transition",bottom:"slide-in-from-bottom-transition"})[o.placement]),handleAfterLeave:R,bodyDirectives:b,handleMousedownResizeTrigger:H,handleMouseenterResizeTrigger:j,handleMouseleaveResizeTrigger:V,isDragging:s,isHoverOnResizeTrigger:m}},render(){const{$slots:o,mergedClsPrefix:e}=this;return this.displayDirective==="show"||this.displayed||this.show?ie(f("div",{role:"none"},f(Bt,{disabled:!this.showMask||!this.trapFocus,active:this.show,autoFocus:this.autoFocus,onEsc:this.onEsc},{default:()=>f(Xe,{name:this.transitionName,appear:this.isMounted,onAfterEnter:this.onAfterEnter,onAfterLeave:this.handleAfterLeave},{default:()=>ie(f("div",Rt(this.$attrs,{role:"dialog",ref:"bodyRef","aria-modal":"true",class:["".concat(e,"-drawer"),this.rtlEnabled&&"".concat(e,"-drawer--rtl"),"".concat(e,"-drawer--").concat(this.placement,"-placement"),this.isDragging&&"".concat(e,"-drawer--unselectable"),this.nativeScrollbar&&"".concat(e,"-drawer--native-scrollbar")]}),[this.resizable?f("div",{class:["".concat(e,"-drawer__resize-trigger"),(this.isDragging||this.isHoverOnResizeTrigger)&&"".concat(e,"-drawer__resize-trigger--hover")],onMouseenter:this.handleMouseenterResizeTrigger,onMouseleave:this.handleMouseleaveResizeTrigger,onMousedown:this.handleMousedownResizeTrigger}):null,this.nativeScrollbar?f("div",{class:["".concat(e,"-drawer-content-wrapper"),this.contentClass],style:this.contentStyle,role:"none"},o):f(Ke,Object.assign({},this.scrollbarProps,{contentStyle:this.contentStyle,contentClass:["".concat(e,"-drawer-content-wrapper"),this.contentClass],theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar}),o)]),this.bodyDirectives)})})),[[he,this.displayDirective==="if"||this.displayed||this.show]]):null}}),{cubicBezierEaseIn:xo,cubicBezierEaseOut:So}=ae;function zo({duration:o="0.3s",leaveDuration:e="0.2s",name:t="slide-in-from-right"}={}){return[u("&.".concat(t,"-transition-leave-active"),{transition:"transform ".concat(e," ").concat(xo)}),u("&.".concat(t,"-transition-enter-active"),{transition:"transform ".concat(o," ").concat(So)}),u("&.".concat(t,"-transition-enter-to"),{transform:"translateX(0)"}),u("&.".concat(t,"-transition-enter-from"),{transform:"translateX(100%)"}),u("&.".concat(t,"-transition-leave-from"),{transform:"translateX(0)"}),u("&.".concat(t,"-transition-leave-to"),{transform:"translateX(100%)"})]}const{cubicBezierEaseIn:ko,cubicBezierEaseOut:$o}=ae;function _o({duration:o="0.3s",leaveDuration:e="0.2s",name:t="slide-in-from-left"}={}){return[u("&.".concat(t,"-transition-leave-active"),{transition:"transform ".concat(e," ").concat(ko)}),u("&.".concat(t,"-transition-enter-active"),{transition:"transform ".concat(o," ").concat($o)}),u("&.".concat(t,"-transition-enter-to"),{transform:"translateX(0)"}),u("&.".concat(t,"-transition-enter-from"),{transform:"translateX(-100%)"}),u("&.".concat(t,"-transition-leave-from"),{transform:"translateX(0)"}),u("&.".concat(t,"-transition-leave-to"),{transform:"translateX(-100%)"})]}const{cubicBezierEaseIn:Mo,cubicBezierEaseOut:Bo}=ae;function Ro({duration:o="0.3s",leaveDuration:e="0.2s",name:t="slide-in-from-top"}={}){return[u("&.".concat(t,"-transition-leave-active"),{transition:"transform ".concat(e," ").concat(Mo)}),u("&.".concat(t,"-transition-enter-active"),{transition:"transform ".concat(o," ").concat(Bo)}),u("&.".concat(t,"-transition-enter-to"),{transform:"translateY(0)"}),u("&.".concat(t,"-transition-enter-from"),{transform:"translateY(-100%)"}),u("&.".concat(t,"-transition-leave-from"),{transform:"translateY(0)"}),u("&.".concat(t,"-transition-leave-to"),{transform:"translateY(-100%)"})]}const{cubicBezierEaseIn:Eo,cubicBezierEaseOut:Do}=ae;function Io({duration:o="0.3s",leaveDuration:e="0.2s",name:t="slide-in-from-bottom"}={}){return[u("&.".concat(t,"-transition-leave-active"),{transition:"transform ".concat(e," ").concat(Eo)}),u("&.".concat(t,"-transition-enter-active"),{transition:"transform ".concat(o," ").concat(Do)}),u("&.".concat(t,"-transition-enter-to"),{transform:"translateY(0)"}),u("&.".concat(t,"-transition-enter-from"),{transform:"translateY(100%)"}),u("&.".concat(t,"-transition-leave-from"),{transform:"translateY(0)"}),u("&.".concat(t,"-transition-leave-to"),{transform:"translateY(100%)"})]}const Po=u([_("drawer","\n word-break: break-word;\n line-height: var(--n-line-height);\n position: absolute;\n pointer-events: all;\n box-shadow: var(--n-box-shadow);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n background-color: var(--n-color);\n color: var(--n-text-color);\n box-sizing: border-box;\n ",[zo(),_o(),Ro(),Io(),E("unselectable","\n user-select: none; \n -webkit-user-select: none;\n "),E("native-scrollbar",[_("drawer-content-wrapper","\n overflow: auto;\n height: 100%;\n ")]),A("resize-trigger","\n position: absolute;\n background-color: #0000;\n transition: background-color .3s var(--n-bezier);\n ",[E("hover","\n background-color: var(--n-resize-trigger-color-hover);\n ")]),_("drawer-content-wrapper","\n box-sizing: border-box;\n "),_("drawer-content","\n height: 100%;\n display: flex;\n flex-direction: column;\n ",[E("native-scrollbar",[_("drawer-body-content-wrapper","\n height: 100%;\n overflow: auto;\n ")]),_("drawer-body","\n flex: 1 0 0;\n overflow: hidden;\n "),_("drawer-body-content-wrapper","\n box-sizing: border-box;\n padding: var(--n-body-padding);\n "),_("drawer-header","\n font-weight: var(--n-title-font-weight);\n line-height: 1;\n font-size: var(--n-title-font-size);\n color: var(--n-title-text-color);\n padding: var(--n-header-padding);\n transition: border .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-divider-color);\n border-bottom: var(--n-header-border-bottom);\n display: flex;\n justify-content: space-between;\n align-items: center;\n ",[A("close","\n margin-left: 6px;\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n ")]),_("drawer-footer","\n display: flex;\n justify-content: flex-end;\n border-top: var(--n-footer-border-top);\n transition: border .3s var(--n-bezier);\n padding: var(--n-footer-padding);\n ")]),E("right-placement","\n top: 0;\n bottom: 0;\n right: 0;\n border-top-left-radius: var(--n-border-radius);\n border-bottom-left-radius: var(--n-border-radius);\n ",[A("resize-trigger","\n width: 3px;\n height: 100%;\n top: 0;\n left: 0;\n transform: translateX(-1.5px);\n cursor: ew-resize;\n ")]),E("left-placement","\n top: 0;\n bottom: 0;\n left: 0;\n border-top-right-radius: var(--n-border-radius);\n border-bottom-right-radius: var(--n-border-radius);\n ",[A("resize-trigger","\n width: 3px;\n height: 100%;\n top: 0;\n right: 0;\n transform: translateX(1.5px);\n cursor: ew-resize;\n ")]),E("top-placement","\n top: 0;\n left: 0;\n right: 0;\n border-bottom-left-radius: var(--n-border-radius);\n border-bottom-right-radius: var(--n-border-radius);\n ",[A("resize-trigger","\n width: 100%;\n height: 3px;\n bottom: 0;\n left: 0;\n transform: translateY(1.5px);\n cursor: ns-resize;\n ")]),E("bottom-placement","\n left: 0;\n bottom: 0;\n right: 0;\n border-top-left-radius: var(--n-border-radius);\n border-top-right-radius: var(--n-border-radius);\n ",[A("resize-trigger","\n width: 100%;\n height: 3px;\n top: 0;\n left: 0;\n transform: translateY(-1.5px);\n cursor: ns-resize;\n ")])]),u("body",[u(">",[_("drawer-container","\n position: fixed;\n ")])]),_("drawer-container","\n position: relative;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n ",[u("> *","\n pointer-events: all;\n ")]),_("drawer-mask","\n background-color: rgba(0, 0, 0, .3);\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[E("invisible","\n background-color: rgba(0, 0, 0, 0)\n "),Et({enterDuration:"0.2s",leaveDuration:"0.2s",enterCubicBezier:"var(--n-bezier-in)",leaveCubicBezier:"var(--n-bezier-out)"})])]),Ho=Object.assign(Object.assign({},Q.props),{show:Boolean,width:[Number,String],height:[Number,String],placement:{type:String,default:"right"},maskClosable:{type:Boolean,default:!0},showMask:{type:[Boolean,String],default:!0},to:[String,Object],displayDirective:{type:String,default:"if"},nativeScrollbar:{type:Boolean,default:!0},zIndex:Number,onMaskClick:Function,scrollbarProps:Object,contentClass:String,contentStyle:[Object,String],trapFocus:{type:Boolean,default:!0},onEsc:Function,autoFocus:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!0},maxWidth:Number,maxHeight:Number,minWidth:Number,minHeight:Number,resizable:Boolean,defaultWidth:{type:[Number,String],default:251},defaultHeight:{type:[Number,String],default:251},onUpdateWidth:[Function,Array],onUpdateHeight:[Function,Array],"onUpdate:width":[Function,Array],"onUpdate:height":[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onAfterLeave:Function,drawerStyle:[String,Object],drawerClass:String,target:null,onShow:Function,onHide:Function}),To=I({name:"Drawer",inheritAttrs:!1,props:Ho,setup(o){const{mergedClsPrefixRef:e,namespaceRef:t,inlineThemeDisabled:r}=oe(o),n=Dt(),a=Q("Drawer","-drawer",Po,It,o,e),i=D(o.defaultWidth),m=D(o.defaultHeight),s=fe(me(o,"width"),i),c=fe(me(o,"height"),m),p=L(()=>{const{placement:l}=o;return l==="top"||l==="bottom"?"":_e(s.value)}),v=L(()=>{const{placement:l}=o;return l==="left"||l==="right"?"":_e(c.value)}),P=l=>{const{onUpdateWidth:b,"onUpdate:width":R}=o;b&&Y(b,l),R&&Y(R,l),i.value=l},F=l=>{const{onUpdateHeight:b,"onUpdate:width":R}=o;b&&Y(b,l),R&&Y(R,l),m.value=l},H=L(()=>[{width:p.value,height:v.value},o.drawerStyle||""]);function j(l){const{onMaskClick:b,maskClosable:R}=o;R&&d(!1),b&&b(l)}function V(l){j(l)}const x=no();function z(l){var b;(b=o.onEsc)===null||b===void 0||b.call(o),o.show&&o.closeOnEsc&&oo(l)&&(x.value||d(!1))}function d(l){const{onHide:b,onUpdateShow:R,"onUpdate:show":h}=o;R&&Y(R,l),h&&Y(h,l),b&&!l&&Y(b,l)}te(be,{isMountedRef:n,mergedThemeRef:a,mergedClsPrefixRef:e,doUpdateShow:d,doUpdateHeight:F,doUpdateWidth:P});const k=L(()=>{const{common:{cubicBezierEaseInOut:l,cubicBezierEaseIn:b,cubicBezierEaseOut:R},self:{color:h,textColor:$,boxShadow:O,lineHeight:N,headerPadding:W,footerPadding:le,borderRadius:de,bodyPadding:X,titleFontSize:Je,titleTextColor:Qe,titleFontWeight:et,headerBorderBottom:tt,footerBorderTop:ot,closeIconColor:rt,closeIconColorHover:nt,closeIconColorPressed:it,closeColorHover:st,closeColorPressed:at,closeIconSize:lt,closeSize:dt,closeBorderRadius:ct,resizableTriggerColorHover:ut}}=a.value;return{"--n-line-height":N,"--n-color":h,"--n-border-radius":de,"--n-text-color":$,"--n-box-shadow":O,"--n-bezier":l,"--n-bezier-out":R,"--n-bezier-in":b,"--n-header-padding":W,"--n-body-padding":X,"--n-footer-padding":le,"--n-title-text-color":Qe,"--n-title-font-size":Je,"--n-title-font-weight":et,"--n-header-border-bottom":tt,"--n-footer-border-top":ot,"--n-close-icon-color":rt,"--n-close-icon-color-hover":nt,"--n-close-icon-color-pressed":it,"--n-close-size":dt,"--n-close-color-hover":st,"--n-close-color-pressed":at,"--n-close-icon-size":lt,"--n-close-border-radius":ct,"--n-resize-trigger-color-hover":ut}}),T=r?we("drawer",void 0,k,o):void 0;return{mergedClsPrefix:e,namespace:t,mergedBodyStyle:H,handleOutsideClick:V,handleMaskClick:j,handleEsc:z,mergedTheme:a,cssVars:r?void 0:k,themeClass:T==null?void 0:T.themeClass,onRender:T==null?void 0:T.onRender,isMounted:n}},render(){const{mergedClsPrefix:o}=this;return f(Ht,{to:this.to,show:this.show},{default:()=>{var e;return(e=this.onRender)===null||e===void 0||e.call(this),ie(f("div",{class:["".concat(o,"-drawer-container"),this.namespace,this.themeClass],style:this.cssVars,role:"none"},this.showMask?f(Xe,{name:"fade-in-transition",appear:this.isMounted},{default:()=>this.show?f("div",{"aria-hidden":!0,class:["".concat(o,"-drawer-mask"),this.showMask==="transparent"&&"".concat(o,"-drawer-mask--invisible")],onClick:this.handleMaskClick}):null}):null,f(Co,Object.assign({},this.$attrs,{class:[this.drawerClass,this.$attrs.class],style:[this.mergedBodyStyle,this.$attrs.style],blockScroll:this.blockScroll,contentStyle:this.contentStyle,contentClass:this.contentClass,placement:this.placement,scrollbarProps:this.scrollbarProps,show:this.show,displayDirective:this.displayDirective,nativeScrollbar:this.nativeScrollbar,onAfterEnter:this.onAfterEnter,onAfterLeave:this.onAfterLeave,trapFocus:this.trapFocus,autoFocus:this.autoFocus,resizable:this.resizable,maxHeight:this.maxHeight,minHeight:this.minHeight,maxWidth:this.maxWidth,minWidth:this.minWidth,showMask:this.showMask,onEsc:this.handleEsc,onClickoutside:this.handleOutsideClick}),this.$slots)),[[Pt,{zIndex:this.zIndex,enabled:this.show}]])}})}}),Lo={title:String,headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],bodyClass:String,bodyStyle:[Object,String],bodyContentClass:String,bodyContentStyle:[Object,String],nativeScrollbar:{type:Boolean,default:!0},scrollbarProps:Object,closable:Boolean},Fo=I({name:"DrawerContent",props:Lo,setup(){const o=ve(be,null);o||Tt("drawer-content","`n-drawer-content` must be placed inside `n-drawer`.");const{doUpdateShow:e}=o;function t(){e(!1)}return{handleCloseClick:t,mergedTheme:o.mergedThemeRef,mergedClsPrefix:o.mergedClsPrefixRef}},render(){const{title:o,mergedClsPrefix:e,nativeScrollbar:t,mergedTheme:r,bodyClass:n,bodyStyle:a,bodyContentClass:i,bodyContentStyle:m,headerClass:s,headerStyle:c,footerClass:p,footerStyle:v,scrollbarProps:P,closable:F,$slots:H}=this;return f("div",{role:"none",class:["".concat(e,"-drawer-content"),t&&"".concat(e,"-drawer-content--native-scrollbar")]},H.header||o||F?f("div",{class:["".concat(e,"-drawer-header"),s],style:c,role:"none"},f("div",{class:"".concat(e,"-drawer-header__main"),role:"heading","aria-level":"1"},H.header!==void 0?H.header():o),F&&f(Lt,{onClick:this.handleCloseClick,clsPrefix:e,class:"".concat(e,"-drawer-header__close"),absolute:!0})):null,t?f("div",{class:["".concat(e,"-drawer-body"),n],style:a,role:"none"},f("div",{class:["".concat(e,"-drawer-body-content-wrapper"),i],style:m,role:"none"},H)):f(Ke,Object.assign({themeOverrides:r.peerOverrides.Scrollbar,theme:r.peers.Scrollbar},P,{class:"".concat(e,"-drawer-body"),contentClass:["".concat(e,"-drawer-body-content-wrapper"),i],contentStyle:m}),H),H.footer?f("div",{class:["".concat(e,"-drawer-footer"),p],style:v,role:"none"},H.footer()):null)}});function Oo(o){const{primaryColorHover:e,borderColor:t}=o;return{resizableTriggerColorHover:e,resizableTriggerColor:t}}const No={name:"Split",common:Ft,self:Oo},Ao=_("split","\n display: flex;\n width: 100%;\n height: 100%;\n",[E("horizontal","\n flex-direction: row;\n "),E("vertical","\n flex-direction: column;\n "),_("split-pane-1","\n overflow: hidden;\n "),_("split-pane-2","\n overflow: hidden;\n flex: 1;\n "),A("resize-trigger","\n background-color: var(--n-resize-trigger-color);\n transition: background-color .3s var(--n-bezier);\n ",[E("hover","\n background-color: var(--n-resize-trigger-color-hover);\n "),u("&:hover","\n background-color: var(--n-resize-trigger-color-hover);\n ")])]),jo=Object.assign(Object.assign({},Q.props),{direction:{type:String,default:"horizontal"},resizeTriggerSize:{type:Number,default:3},disabled:Boolean,defaultSize:{type:[String,Number],default:.5},"onUpdate:size":[Function,Array],onUpdateSize:[Function,Array],size:[String,Number],min:{type:[String,Number],default:0},max:{type:[String,Number],default:1},pane1Class:String,pane1Style:[Object,String],pane2Class:String,pane2Style:[Object,String],onDragStart:Function,onDragMove:Function,onDragEnd:Function,watchProps:Array}),Ae=I({name:"Split",props:jo,setup(o){var e;const{mergedClsPrefixRef:t,inlineThemeDisabled:r}=oe(o),n=Q("Split","-split",Ao,No,o,t),a=L(()=>{const{common:{cubicBezierEaseInOut:d},self:{resizableTriggerColor:k,resizableTriggerColorHover:T}}=n.value;return{"--n-bezier":d,"--n-resize-trigger-color":k,"--n-resize-trigger-color-hover":T}}),i=D(null),m=D(!1),s=me(o,"size"),c=D(o.defaultSize);!((e=o.watchProps)===null||e===void 0)&&e.includes("defaultSize")&&Ye(()=>c.value=o.defaultSize);const p=d=>{const k=o["onUpdate:size"];o.onUpdateSize&&Y(o.onUpdateSize,d),k&&Y(k,d),c.value=d},v=fe(s,c),P=L(()=>{const d=v.value;if(typeof d=="string")return{flex:"0 0 ".concat(d)};if(typeof d=="number"){const k=d*100;return{flex:"0 0 calc(".concat(k,"% - ").concat(o.resizeTriggerSize*k/100,"px)")}}}),F=L(()=>o.direction==="horizontal"?{width:"".concat(o.resizeTriggerSize,"px"),height:"100%"}:{width:"100%",height:"".concat(o.resizeTriggerSize,"px")}),H=L(()=>{const d=o.direction==="horizontal";return{width:d?"".concat(o.resizeTriggerSize,"px"):"",height:d?"":"".concat(o.resizeTriggerSize,"px"),cursor:o.direction==="horizontal"?"col-resize":"row-resize"}});let j=0;const V=d=>{d.preventDefault(),m.value=!0,o.onDragStart&&o.onDragStart(d);const k="mousemove",T="mouseup",l=h=>{x(h),o.onDragMove&&o.onDragMove(h)},b=()=>{Re(k,document,l),Re(T,document,b),m.value=!1,o.onDragEnd&&o.onDragEnd(d),document.body.style.cursor=""};document.body.style.cursor=H.value.cursor,Me(k,document,l),Me(T,document,b);const R=i.value;if(R){const h=R.getBoundingClientRect();o.direction==="horizontal"?j=d.clientX-h.left:j=h.top-d.clientY}x(d)};function x(d){var k,T;const l=(T=(k=i.value)===null||k===void 0?void 0:k.parentElement)===null||T===void 0?void 0:T.getBoundingClientRect();if(!l)return;const{direction:b}=o,R=l.width-o.resizeTriggerSize,h=l.height-o.resizeTriggerSize,$=b==="horizontal"?R:h,O=b==="horizontal"?d.clientX-l.left-j:d.clientY-l.top+j,{min:N,max:W}=o,le=typeof N=="string"?Be(N):N*$,de=typeof W=="string"?Be(W):W*$;let X=O;X=Math.max(X,le),X=Math.min(X,de,$),typeof v.value=="string"?p("".concat(X,"px")):p(X/$)}const z=r?we("split",void 0,a,o):void 0;return{themeClass:z==null?void 0:z.themeClass,onRender:z==null?void 0:z.onRender,cssVars:r?void 0:a,resizeTriggerElRef:i,isDragging:m,mergedClsPrefix:t,resizeTriggerWrapperStyle:H,resizeTriggerStyle:F,handleMouseDown:V,firstPaneStyle:P}},render(){var o,e,t,r,n;return(o=this.onRender)===null||o===void 0||o.call(this),f("div",{class:["".concat(this.mergedClsPrefix,"-split"),"".concat(this.mergedClsPrefix,"-split--").concat(this.direction),this.themeClass],style:this.cssVars},f("div",{class:["".concat(this.mergedClsPrefix,"-split-pane-1"),this.pane1Class],style:[this.firstPaneStyle,this.pane1Style]},(t=(e=this.$slots)[1])===null||t===void 0?void 0:t.call(e)),!this.disabled&&f("div",{ref:"resizeTriggerElRef",class:"".concat(this.mergedClsPrefix,"-split__resize-trigger-wrapper"),style:this.resizeTriggerWrapperStyle,onMousedown:this.handleMouseDown},Ot(this.$slots["resize-trigger"],()=>[f("div",{style:this.resizeTriggerStyle,class:["".concat(this.mergedClsPrefix,"-split__resize-trigger"),this.isDragging&&"".concat(this.mergedClsPrefix,"-split__resize-trigger--hover")]})])),f("div",{class:["".concat(this.mergedClsPrefix,"-split-pane-2"),this.pane2Class],style:this.pane2Style},(n=(r=this.$slots)[2])===null||n===void 0?void 0:n.call(r)))}}),Uo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Wo=y("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Vo=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 176v160"},null,-1),Yo=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M336 256H176"},null,-1),Xo=[Wo,Vo,Yo],Ko=I({name:"AddCircleOutline",render:function(e,t){return M(),U("svg",Uo,Xo)}}),Go={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},qo=y("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Zo=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 320L192 192"},null,-1),Jo=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M192 320l128-128"},null,-1),Qo=[qo,Zo,Jo],er=I({name:"CloseCircleOutline",render:function(e,t){return M(),U("svg",Go,Qo)}}),tr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},or=y("path",{d:"M408 96H252.11a23.89 23.89 0 0 1-13.31-4L211 73.41A55.77 55.77 0 0 0 179.89 64H104a56.06 56.06 0 0 0-56 56v24h416c0-30.88-25.12-48-56-48z",fill:"currentColor"},null,-1),rr=y("path",{d:"M423.75 448H88.25a56 56 0 0 1-55.93-55.15L16.18 228.11v-.28A48 48 0 0 1 64 176h384.1a48 48 0 0 1 47.8 51.83v.28l-16.22 164.74A56 56 0 0 1 423.75 448zm56.15-221.45z",fill:"currentColor"},null,-1),nr=[or,rr],ir=I({name:"FolderOpen",render:function(e,t){return M(),U("svg",tr,nr)}}),sr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ar=y("path",{d:"M313.27 124.64L198.73 51.36a32 32 0 0 0-29.28.35L56.51 127.49A16 16 0 0 0 48 141.63v295.8a16 16 0 0 0 23.49 14.14l97.82-63.79a32 32 0 0 1 29.5-.24l111.86 73a32 32 0 0 0 29.27-.11l115.43-75.94a16 16 0 0 0 8.63-14.2V74.57a16 16 0 0 0-23.49-14.14l-98 63.86a32 32 0 0 1-29.24.35z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),lr=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M328 128v336"},null,-1),dr=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M184 48v336"},null,-1),cr=[ar,lr,dr],ur=I({name:"MapOutline",render:function(e,t){return M(),U("svg",sr,cr)}}),hr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},fr=y("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),mr=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M336 256H176"},null,-1),pr=[fr,mr],gr=I({name:"RemoveCircleOutline",render:function(e,t){return M(),U("svg",hr,pr)}}),vr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},wr=y("path",{d:"M465.94 119.76l-73.7-73.7A47.68 47.68 0 0 0 358.3 32H96a64 64 0 0 0-64 64v320a64 64 0 0 0 64 64h320a64 64 0 0 0 64-64V153.7a47.68 47.68 0 0 0-14.06-33.94zM120 112h176a8 8 0 0 1 8 8v48a8 8 0 0 1-8 8H120a8 8 0 0 1-8-8v-48a8 8 0 0 1 8-8zm139.75 319.91a80 80 0 1 1 76.16-76.16a80.06 80.06 0 0 1-76.16 76.16z",fill:"currentColor"},null,-1),br=y("circle",{cx:"256",cy:"352",r:"48",fill:"currentColor"},null,-1),yr=[wr,br],Cr=I({name:"Save",render:function(e,t){return M(),U("svg",vr,yr)}}),xr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Sr=y("path",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32",d:"M336 320H32L184 48l152 272z"},null,-1),zr=y("path",{d:"M265.32 194.51A144 144 0 1 1 192 320",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),kr=[Sr,zr],$r=I({name:"ShapesOutline",render:function(e,t){return M(),U("svg",xr,kr)}});class _r{constructor(e){B(this,"host");B(this,"space");B(this,"id");B(this,"containerID");B(this,"previousScale");B(this,"enable",e=>{const t=document.getElementById(e),r=Number(window.getComputedStyle(t).borderRadius.match(/\d+/g)),n="".concat(e,"-force-hidpi-style-support"),a=document.getElementById(n)||(()=>{const i=document.createElement("style");return i.id=n,document.head.appendChild(i),i})();return a.innerHTML="\n            #".concat(e," > div {\n                transform: scale(").concat(1/window.devicePixelRatio,") !important;\n                transform-origin: top left !important;\n                width: ").concat(window.devicePixelRatio*100,"% !important;\n                height: ").concat(window.devicePixelRatio*100,"% !important;\n            }\n            #").concat(e," * {\n                border-radius: ").concat(window.devicePixelRatio*r,"px !important;\n            }\n        "),n});this.host=e,this.space="liteModeHiDpi",this.containerID=e.container.id,this.previousScale=window.devicePixelRatio}mount(){return this.host.plugins[this.space]=this,this.host.properties.liteModeForceHiDPI&&(this.id=this.enableLiteForceHiDPI()),!0}unmount(){return this.host.plugins[this.space]=null,this.host.properties.liteModeForceHiDPI?this.disableLiteForceHiDPI():!0}onResize(){this.previousScale!==window.devicePixelRatio&&(this.previousScale=window.devicePixelRatio,this.enable(this.containerID))}enableLiteForceHiDPI(){return window.addEventListener("resize",()=>this.onResize()),this.enable(this.containerID)}disableLiteForceHiDPI(){const e="".concat(this.containerID,"-force-hidpi-style-support"),t=document.getElementById(e);if(t)document.head.removeChild(t);else return!1;return window.removeEventListener("resize",()=>this.onResize()),!0}}const Mr=[Nt,Xt,Kt,_r],Br={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Rr=y("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[y("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"}),y("path",{d:"M7 9l5-5l5 5"}),y("path",{d:"M12 4v12"})],-1),Er=[Rr],Dr=I({name:"Upload",render:function(e,t){return M(),U("svg",Br,Er)}}),Ir={class:"container"},Pr={style:{height:"100%",width:"100%",display:"flex","justify-items":"center"}},Hr=I({__name:"SketchSelector",props:{list:{type:Array,default:()=>[]}},emits:["select","remove"],setup(o,{emit:e}){const t=o,r=e;function n(i){r("select",i)}function a(i){confirm("Are you sure to delete this CartoSketch?\nBoth Route and Drafts will be deleted")&&r("remove",i)}return(i,m)=>(M(),U("div",Ir,[S(g(Qt),{class:"select-listview",hoverable:""},{default:w(()=>[(M(!0),U(se,null,ye(t.list,s=>(M(),K(g(Jt),{title:s.name,key:s.id,onClick:c=>n(s.id)},{prefix:w(()=>[y("div",Pr,[S(g(J),{size:"20"},{default:w(()=>[S(g($r))]),_:1})])]),suffix:w(()=>[S(g(Ce),{quaternary:"",circle:"",onClick:At(c=>a(s.id),["stop"])},{icon:w(()=>[S(g(J),null,{default:w(()=>[S(g(gr))]),_:1})]),_:2},1032,["onClick"])]),default:w(()=>[pe(" "+jt(s.name),1)]),_:2},1032,["title","onClick"]))),128))]),_:1})]))}}),Tr=Ge(Hr,[["__scopeId","data-v-f96e4745"]]),Lr=I({__name:"SelectorDrawer",props:{active:{type:Boolean,default:()=>!1},placement:{type:String,default:()=>"right"},list:{type:Array,default:()=>[]}},emits:["new","update:active","remove","select","import"],setup(o,{emit:e}){const t=o,r=[{title:"import",icon:Dr,callback:()=>{i("import")},secondary:!0,iconSize:17,type:"default"},{title:"new",icon:Ko,callback:()=>i("new"),secondary:!0,iconSize:20,type:"default"},{title:"close",icon:er,callback:()=>{n.value=!1},secondary:!0,iconSize:20,type:"error"}],n=D(!1),a=D(t.placement);ne(t,()=>{n.value=t.active,a.value=t.placement},{deep:!0}),ne(n,()=>{i("update:active",n.value)});const i=e;return(m,s)=>(M(),K(g(To),{show:n.value,"onUpdate:show":s[2]||(s[2]=c=>n.value=c),width:502,placement:a.value,"auto-focus":!1},{default:w(()=>[S(g(Fo),{title:"CartoSketch Library"},{footer:w(()=>[S(g(yo),null,{default:w(()=>[(M(),U(se,null,ye(r,c=>S(g(Ce),{secondary:c.secondary,key:c.title,type:c.type,title:c.title,onClick:c.callback},{icon:w(()=>[S(g(J),{size:c.iconSize},{default:w(()=>[(M(),K(qe(c.icon)))]),_:2},1032,["size"])]),_:2},1032,["secondary","type","title","onClick"])),64))]),_:1})]),default:w(()=>[S(Tr,{list:o.list,onRemove:s[0]||(s[0]=c=>i("remove",c)),onSelect:s[1]||(s[1]=c=>i("select",c))},null,8,["list"])]),_:1})]),_:1},8,["show","placement"]))}});class Fr{constructor(e){B(this,"history",[]);B(this,"hostMap");B(this,"handlers",[]);B(this,"name");B(this,"id");B(this,"componentLibrary",new Map);B(this,"componentClassification",new Map);B(this,"previousComponentIDs",new Set);B(this,"shownComponentIDs",new Set);this.hostMap=e,this.initialiseBackend().then(()=>{this.executeHandler("ready"),this.startSyncComponents()}).catch(t=>{throw new Error("Fail to initialise drawing backend: ".concat(t))})}startSyncComponents(){this.addHandler("change",()=>{try{this.syncFromMapToBackend(),this.syncFromBackendToMap()}catch(e){console.error("Fail to sync components, reason: \na",e)}})}executeHandler(e){this.handlers.forEach(t=>{t.type===e&&t.handler(this)})}addHandler(e,t){const r=this.handlers.length>0?this.handlers[this.handlers.length-1].id+1:0;this.handlers.push({type:e,id:r,handler:t})}showByID(e,t=!1){this.shownComponentIDs.add(e),t||this.executeHandler("change")}show(e,t=!1){this.showByID(e.id,t)}hideByID(e,t=!1){this.shownComponentIDs.delete(e),t||this.executeHandler("change")}hide(e,t=!1){this.hideByID(e.id,t)}add(e,t="unknown"){this.componentLibrary.set(e.id,e),this.registerPrimitive(e,t)}remove(e,t=!1){try{this.hide(e)}finally{this.componentLibrary.delete(e.id),this.componentClassification.delete(e.id),this.componentLibrary.delete(e.id),t||this.executeHandler("change")}}addHistory(e,t){this.history.push([{type:e,data:t}])}generateShowHideHistory(){const e=je(this.shownComponentIDs,this.previousComponentIDs),t=je(this.previousComponentIDs,this.shownComponentIDs),r=[];return e.length>0&&r.push({type:"show",data:e}),t.length>0&&r.push({type:"delete",data:t}),this.previousComponentIDs=Ut(this.shownComponentIDs),r}findCorrespondingUndoAction(){let e=1,t=0;for(let r=this.history.length-1;r>=0;r--)if(this.history[r][0].type==="undo"?e+=1:t+=1,e===t)return this.history[r];return[]}findCorrespondingRedoAction(){let e=0,t=1;for(let r=this.history.length-1;r>=0;r--){const n=this.history[r][0].type;if(n==="undo"?e+=1:n==="redo"&&(t+=1),n!=="redo"&&n!=="undo")return[];if(e===t)return this.history[r]}return[]}undo(){if(console.log(this.history),this.history.length>=1){const e=this.findCorrespondingUndoAction();if(e.length===0){console.warn("No action to undo");return}e[0].type!=="redo"?(e.forEach(t=>{t.type==="add"?t.data.forEach(r=>this.hide(r,!0)):t.type==="delete"&&t.data.forEach(r=>this.show(r,!0))}),this.executeHandler("change"),this.addHistory("undo",e)):(e[0].data.forEach(t=>{t.type==="add"?t.data.forEach(r=>this.hide(r,!0)):t.type==="delete"&&t.data.forEach(r=>this.show(r,!0))}),this.executeHandler("change"),this.addHistory("undo",e[0].data))}}redo(){if(this.history.length>=1){const e=this.findCorrespondingRedoAction();if(e.length===0){console.warn("No action to redo");return}e[0].data.forEach(t=>{t.type==="add"?t.data.forEach(r=>this.show(r,!0)):t.type==="delete"&&t.data.forEach(r=>this.hide(r,!0))}),this.executeHandler("change"),this.addHistory("redo",e[0].data)}}editComponent(e){const t=this.componentLibrary.get(e);if(t)this.editPrimitive(t);else throw new Error("No corresponding primitive found by id: ".concat(e))}getComponentMeta(e){return{id:e.id,className:this.componentClassification.get(e.id)||"unknown",name:e.name,type:e.type,properties:e.properties}}registerPrimitive(e,t){this.componentClassification.set(e.id,t||"unknown")}getClassificationInfo(){const e=Array.from(this.componentLibrary).map(r=>r[1]),t=r=>e.filter(n=>this.getComponentMeta(n).className===r).map(n=>this.getComponentMeta(n));return{routes:t("route"),drafts:t("draft"),unknowns:t("unknown")}}getClassifiedProxyComponents(){const e=Array.from(this.componentLibrary).map(t=>t[1]);return{routes:e.filter(t=>this.getComponentMeta(t).className==="route"),drafts:e.filter(t=>this.getComponentMeta(t).className==="draft"),unknowns:e.filter(t=>this.getComponentMeta(t).className==="unknown")}}}function je(o,e){const t=new Set(e);return Array.from(o).filter(r=>!t.has(r))}class Or{constructor(e=[]){B(this,"forwardMap",new Map);B(this,"backwardMap",new Map);e.forEach(t=>{this.forwardMap.set(t.key1,t.key2),this.backwardMap.set(t.key2,t.key1)})}getForward(e){return this.forwardMap.get(e)}getBackward(e){return this.backwardMap.get(e)}set(e,t){this.forwardMap.set(e,t),this.backwardMap.set(t,e)}removeForward(e){this.backwardMap.delete(this.getForward(e)),this.forwardMap.delete(e)}removeBackward(e){this.forwardMap.delete(this.getBackward(e)),this.backwardMap.delete(e)}forwardKeys(){return Array.from(this.forwardMap.keys())}backwardKeys(){return Array.from(this.backwardMap.keys())}iterateForward(e){this.forwardMap.forEach((t,r,n)=>e(r,t,n))}iterateBackward(e){this.backwardMap.forEach((t,r,n)=>e(r,t,n))}hasForward(e){return this.forwardMap.has(e)}hasBackward(e){return this.backwardMap.has(e)}}class Nr extends Fr{constructor(){super(...arguments);B(this,"primitiveComponentMap",new Or);B(this,"previousPrimitiveIDs",[])}syncFromMapToBackend(){const t=this.hostMap.plugins.drawingTools.getAllPrimitiveIDs(),r=Oe(t,this.previousPrimitiveIDs),n=Oe(this.previousPrimitiveIDs,t);this.previousPrimitiveIDs=t;const a=[];r&&r.forEach(i=>{const m=this.hostMap.plugins.drawingTools.getPrimitiveByID(i),s=Wt(m);this.add(s),this.showByID(s.id,!0),a.push(s.id),this.primitiveComponentMap.set(i,s.id)}),n&&n.forEach(i=>{const m=this.primitiveComponentMap.getForward(i);if(!m)throw new Error("correspondingComponentID ".concat(i," is undefined"));const s=this.componentLibrary.get(m);this.hide(s,!0),this.remove(s),this.primitiveComponentMap.removeForward(i)})}syncFromBackendToMap(){}getShownComponentIDs(){return this.primitiveComponentMap.backwardKeys()}escape(){this.hostMap.plugins.drawingTools.stopDrawing()}initialiseBackend(){return this.hostMap.plugins.drawingTools.initialised?Promise.resolve():new Promise(t=>{this.hostMap.plugins.drawingTools.addHandler("ready",()=>{this.hostMap.plugins.drawingTools.addHandler("drawingChanged",()=>{this.executeHandler("change")}),t()})})}clear(){this.hostMap.plugins.drawingTools.clear()}editPrimitive(t){const r=this.getPrimitiveFromComponent(t);if(r===void 0)throw new Error("Fail to find primitive with id ".concat(t.id));this.hostMap.plugins.drawingTools.edit(r)}getPrimitiveFromComponent(t){const r=this.primitiveComponentMap.getBackward(t.id);if(r!==void 0)return this.hostMap.plugins.drawingTools.getPrimitiveByID(r)}}const Ar={class:"edit-layout"},jr=["onClick","title"],Ue=20,Ur=I({__name:"SketchEdit",props:{liteMode:{type:Boolean},forceHighDpi:{type:Boolean},mapType:{}},setup(o){const e=o,t=new Vt,r=D([]);let n=D(!1);const a=D(Microsoft.Maps.MapTypeId.road),i=D(!1),m=D("right"),s={open:()=>i.value=!0,close:()=>i.value=!1},c=D(Mr),p=[{title:"save",icon:Cr,iconSize:Ue,callback:t.save.bind(t)},{title:"Open",icon:ir,iconSize:Ue,callback:s.open}];function v(x){console.log(x);const z=new Nr(x);t.setBackend(z),window.adapter=t,n.value=!0}async function P(){const x=prompt("Enter the name of the new CartoSketch");x&&(await re.write(new re(x)),F())}function F(){re.getInfoList().then(x=>{r.value=x})}async function H(x){await re.remove(x),F()}async function j(x){await t.load(x),console.log("selected sketch, id:",x),s.close()}function V(x){alert(x)}return We(()=>{F()}),(x,z)=>(M(),U(se,null,[S(Lr,{list:r.value,active:i.value,"onUpdate:active":z[0]||(z[0]=d=>i.value=d),placement:m.value,onNew:P,onRemove:H,onSelect:j,onActiveStateSync:z[1]||(z[1]=d=>{i.value=d}),onImport:z[2]||(z[2]=d=>V("Not implemented"))},null,8,["list","active","placement"]),S(g(Ae),{direction:"horizontal",max:.8,min:.4,"default-size":.7},{1:w(()=>[S(g(ue),{class:"map-container","content-style":"padding: 0"},{default:w(()=>[ie(S(Gt,{"map-type":a.value,plugin:c.value,"lite-mode":e.liteMode,forceHiDPI:e.forceHighDpi,onReady:v},null,8,["map-type","plugin","lite-mode","forceHiDPI"]),[[he,g(n)]]),g(n)?ce("",!0):(M(),K(g(Ne),{key:0,description:"Map",size:"huge",style:{height:"100%","justify-content":"center"}},{icon:w(()=>[S(g(J),null,{default:w(()=>[S(g(ur))]),_:1})]),_:1}))]),_:1})]),2:w(()=>[y("div",Ar,[S(g(ue),{"content-class":"route-edit-tool-tip"},{default:w(()=>[(M(),U(se,null,ye(p,(d,k)=>y("div",{key:k,onClick:d.callback,title:d.title,class:"tool-tip-item"},[S(g(J),{size:d.iconSize},{default:w(()=>[(M(),K(qe(d.icon)))]),_:2},1032,["size"])],8,jr)),64))]),_:1}),S(g(ue),{class:"draft-container"},Yt({default:w(()=>[g(n)?(M(),K(g(Ae),{key:0,direction:"vertical",max:.8,min:.3,"default-size":.7},{1:w(()=>[]),2:w(()=>[]),_:1})):ce("",!0),g(n)?ce("",!0):(M(),K(g(Ne),{key:1,description:"No sketch selected",style:{height:"100%","justify-content":"center"}},{icon:w(()=>[S(g(J))]),extra:w(()=>[S(g(Ce),{size:"small",onClick:z[3]||(z[3]=d=>s.open())},{default:w(()=>[pe("Select a sketch")]),_:1})]),_:1}))]),_:2},[g(n)?{name:"header",fn:w(()=>[pe(" Components ")]),key:"0"}:void 0]),1024)])]),_:1})],64))}}),Wr=Ge(Ur,[["__scopeId","data-v-f1c86884"]]),Zr=I({__name:"EditView",setup(o){return(e,t)=>(M(),K(Wr,{"lite-mode":!0,"force-high-dpi":!1}))}});export{Zr as default};
