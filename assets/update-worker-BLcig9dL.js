(function(){"use strict";/**
 * @preserve
 * gcoord 1.0.6, geographic coordinate library
 * Copyright (c) 2024 Jiulong Hu <me@hujiulong.com>
 */const{sin:h,cos:Le,sqrt:ut,abs:X,PI:g}=Math,At=6378245,Ot=.006693421622965823;function Mt(t,e){return t>=72.004&&t<=137.8347&&e>=.8293&&e<=55.8271}function Be(t,e){let r=-100+2*t+3*e+.2*e*e+.1*t*e+.2*ut(X(t));return r+=(20*h(6*t*g)+20*h(2*t*g))*2/3,r+=(20*h(e*g)+40*h(e/3*g))*2/3,r+=(160*h(e/12*g)+320*h(e*g/30))*2/3,r}function xe(t,e){let r=300+t+2*e+.1*t*t+.1*t*e+.1*ut(X(t));return r+=(20*h(6*t*g)+20*h(2*t*g))*2/3,r+=(20*h(t*g)+40*h(t/3*g))*2/3,r+=(150*h(t/12*g)+300*h(t/30*g))*2/3,r}function Fe(t,e){let r=xe(t-105,e-35),n=Be(t-105,e-35);const o=e/180*g;let a=h(o);a=1-Ot*a*a;const i=ut(a);return r=r*180/(At/i*Le(o)*g),n=n*180/(At*(1-Ot)/(a*i)*g),[r,n]}function w(t){const[e,r]=t;if(!Mt(e,r))return[e,r];const n=Fe(e,r);return[e+n[0],r+n[1]]}function E(t){const[e,r]=t;if(!Mt(e,r))return[e,r];let[n,o]=[e,r],a=w([n,o]),i=a[0]-e,s=a[1]-r;for(;X(i)>1e-6||X(s)>1e-6;)n-=i,o-=s,a=w([n,o]),i=a[0]-e,s=a[1]-r;return[n,o]}const{sin:Y,cos:R,atan2:Gt,sqrt:Ct,PI:Ne}=Math,Z=Ne*3e3/180;function I(t){const[e,r]=t,n=e-.0065,o=r-.006,a=Ct(n*n+o*o)-2e-5*Y(o*Z),i=Gt(o,n)-3e-6*R(n*Z),s=a*R(i),l=a*Y(i);return[s,l]}function D(t){const[e,r]=t,n=e,o=r,a=Ct(n*n+o*o)+2e-5*Y(o*Z),i=Gt(o,n)+3e-6*R(n*Z),s=a*R(i)+.0065,l=a*Y(i)+.006;return[s,l]}const Et=180/Math.PI,It=Math.PI/180,Q=6378137,P=20037508342789244e-9;function k(t){return[t[0]*Et/Q,(Math.PI*.5-2*Math.atan(Math.exp(-t[1]/Q)))*Et]}function tt(t){const e=Math.abs(t[0])<=180?t[0]:t[0]-(t[0]<0?-1:1)*360,r=[Q*e*It,Q*Math.log(Math.tan(Math.PI*.25+.5*t[1]*It))];return r[0]>P&&(r[0]=P),r[0]<-P&&(r[0]=-P),r[1]>P&&(r[1]=P),r[1]<-P&&(r[1]=-P),r}const{abs:ft}=Math,Dt=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],Lt=[75,60,45,30,15,0],Ue=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],ze=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function Bt(t,e,r){const n=ft(e)/r[9];let o=r[0]+r[1]*ft(t),a=r[2]+r[3]*n+r[4]*Math.pow(n,2)+r[5]*Math.pow(n,3)+r[6]*Math.pow(n,4)+r[7]*Math.pow(n,5)+r[8]*Math.pow(n,6);return o*=t<0?-1:1,a*=e<0?-1:1,[o,a]}function et(t){const[e,r]=t;let n=[];for(let o=0;o<Lt.length;o++)if(ft(r)>Lt[o]){n=ze[o];break}return Bt(e,r,n)}function rt(t){const[e,r]=t;let n=[];for(let o=0;o<Dt.length;o++)if(r>=Dt[o]){n=Ue[o];break}return Bt(e,r,n)}function S(t,e){if(!t)throw new Error(e)}function xt(t){return!!t&&Object.prototype.toString.call(t)==="[object Array]"}function Ft(t){return!isNaN(Number(t))&&t!==null&&!xt(t)}function y(...t){const e=t.length-1;return function(...r){let n=e,o=t[e].apply(null,r);for(;n--;)o=t[n].call(null,o);return o}}function Nt(t,e,r=!1){if(t===null)return;let n,o,a,i,s,l,d=0,v=0,b,N;const{type:V}=t,st=V==="FeatureCollection",ct=V==="Feature",j=st?t.features.length:1;for(let p=0;p<j;p++){b=st?t.features[p].geometry:ct?t.geometry:t,N=b?b.type==="GeometryCollection":!1,l=N?b.geometries.length:1;for(let St=0;St<l;St++){let $=0,C=0;if(i=N?b.geometries[St]:b,i===null)continue;const A=i.type;switch(d=r&&(A==="Polygon"||A==="MultiPolygon")?1:0,A){case null:break;case"Point":if(s=i.coordinates,e(s,v,p,$,C)===!1)return!1;v++,$++;break;case"LineString":case"MultiPoint":for(s=i.coordinates,n=0;n<s.length;n++){if(e(s[n],v,p,$,C)===!1)return!1;v++,A==="MultiPoint"&&$++}A==="LineString"&&$++;break;case"Polygon":case"MultiLineString":for(s=i.coordinates,n=0;n<s.length;n++){for(o=0;o<s[n].length-d;o++){if(e(s[n][o],v,p,$,C)===!1)return!1;v++}A==="MultiLineString"&&$++,A==="Polygon"&&C++}A==="Polygon"&&$++;break;case"MultiPolygon":for(s=i.coordinates,n=0;n<s.length;n++){for(C=0,o=0;o<s[n].length;o++){for(a=0;a<s[n][o].length-d;a++){if(e(s[n][o][a],v,p,$,C)===!1)return!1;v++}C++}$++}break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(Nt(i.geometries[n],e,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}var f;(function(t){t.WGS84="WGS84",t.WGS1984="WGS84",t.EPSG4326="WGS84",t.GCJ02="GCJ02",t.AMap="GCJ02",t.BD09="BD09",t.BD09LL="BD09",t.Baidu="BD09",t.BMap="BD09",t.BD09MC="BD09MC",t.BD09Meter="BD09MC",t.EPSG3857="EPSG3857",t.EPSG900913="EPSG3857",t.EPSG102100="EPSG3857",t.WebMercator="EPSG3857",t.WM="EPSG3857"})(f||(f={}));const We={to:{[f.GCJ02]:w,[f.BD09]:y(D,w),[f.BD09MC]:y(et,D,w),[f.EPSG3857]:tt}},Je={to:{[f.WGS84]:E,[f.BD09]:D,[f.BD09MC]:y(et,D),[f.EPSG3857]:y(tt,E)}},qe={to:{[f.WGS84]:y(E,I),[f.GCJ02]:I,[f.EPSG3857]:y(tt,E,I),[f.BD09MC]:et}},He={to:{[f.WGS84]:k,[f.GCJ02]:y(w,k),[f.BD09]:y(D,w,k),[f.BD09MC]:y(et,D,w,k)}},Ke={to:{[f.WGS84]:y(E,I,rt),[f.GCJ02]:y(I,rt),[f.EPSG3857]:y(tt,E,I,rt),[f.BD09]:rt}};var Ve={WGS84:We,GCJ02:Je,BD09:qe,EPSG3857:He,BD09MC:Ke};function Xe(t,e,r){if(S(!!t,"The args[0] input coordinate is required"),S(!!e,"The args[1] original coordinate system is required"),S(!!r,"The args[2] target coordinate system is required"),e===r)return t;const n=Ve[e];S(!!n,"Invalid original coordinate system: ".concat(e));const o=n.to[r];S(!!o,"Invalid target coordinate system: ".concat(r));const a=typeof t;if(S(a==="string"||a==="object","Invalid input coordinate type: ".concat(a)),a==="string")try{t=JSON.parse(t)}catch(l){throw new Error("Invalid input coordinate: ".concat(t))}let i=!1;xt(t)&&(S(t.length>=2,"Invalid input coordinate: ".concat(t)),S(Ft(t[0])&&Ft(t[1]),"Invalid input coordinate: ".concat(t)),t=t.map(Number),i=!0);const s=o;return i?s(t):(Nt(t,l=>{[l[0],l[1]]=s(l)}),t)}const lt=Object.assign(Object.assign({},f),{CRSTypes:f,transform:Xe});var Ut=typeof global=="object"&&global&&global.Object===Object&&global,Ye=typeof self=="object"&&self&&self.Object===Object&&self,_=Ut||Ye||Function("return this")(),L=_.Symbol,zt=Object.prototype,Re=zt.hasOwnProperty,Ze=zt.toString,U=L?L.toStringTag:void 0;function Qe(t){var e=Re.call(t,U),r=t[U];try{t[U]=void 0;var n=!0}catch(a){}var o=Ze.call(t);return n&&(e?t[U]=r:delete t[U]),o}var ke=Object.prototype,tr=ke.toString;function er(t){return tr.call(t)}var rr="[object Null]",nr="[object Undefined]",Wt=L?L.toStringTag:void 0;function z(t){return t==null?t===void 0?nr:rr:Wt&&Wt in Object(t)?Qe(t):er(t)}function W(t){return t!=null&&typeof t=="object"}var gt=Array.isArray;function J(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var or="[object AsyncFunction]",ar="[object Function]",ir="[object GeneratorFunction]",sr="[object Proxy]";function Jt(t){if(!J(t))return!1;var e=z(t);return e==ar||e==ir||e==or||e==sr}var dt=_["__core-js_shared__"],qt=function(){var t=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function cr(t){return!!qt&&qt in t}var ur=Function.prototype,fr=ur.toString;function O(t){if(t!=null){try{return fr.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var lr=/[\\^$.*+?()[\]{}|]/g,gr=/^\[object .+?Constructor\]$/,dr=Function.prototype,pr=Object.prototype,hr=dr.toString,br=pr.hasOwnProperty,yr=RegExp("^"+hr.call(br).replace(lr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vr(t){if(!J(t)||cr(t))return!1;var e=Jt(t)?yr:gr;return e.test(O(t))}function _r(t,e){return t==null?void 0:t[e]}function M(t,e){var r=_r(t,e);return vr(r)?r:void 0}var pt=M(_,"WeakMap"),Ht=Object.create,jr=function(){function t(){}return function(e){if(!J(e))return{};if(Ht)return Ht(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function $r(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Kt=function(){try{var t=M(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();function Tr(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var mr=9007199254740991,wr=/^(?:0|[1-9]\d*)$/;function Pr(t,e){var r=typeof t;return e=e==null?mr:e,!!e&&(r=="number"||r!="symbol"&&wr.test(t))&&t>-1&&t%1==0&&t<e}function Vt(t,e,r){e=="__proto__"&&Kt?Kt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Xt(t,e){return t===e||t!==t&&e!==e}var Sr=Object.prototype,Ar=Sr.hasOwnProperty;function Yt(t,e,r){var n=t[e];(!(Ar.call(t,e)&&Xt(n,r))||r===void 0&&!(e in t))&&Vt(t,e,r)}function nt(t,e,r,n){var o=!r;r||(r={});for(var a=-1,i=e.length;++a<i;){var s=e[a],l=void 0;l===void 0&&(l=t[s]),o?Vt(r,s,l):Yt(r,s,l)}return r}var Or=9007199254740991;function Rt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Or}function Zt(t){return t!=null&&Rt(t.length)&&!Jt(t)}var Mr=Object.prototype;function ht(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Mr;return t===r}function Gr(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Cr="[object Arguments]";function Qt(t){return W(t)&&z(t)==Cr}var kt=Object.prototype,Er=kt.hasOwnProperty,Ir=kt.propertyIsEnumerable,Dr=Qt(function(){return arguments}())?Qt:function(t){return W(t)&&Er.call(t,"callee")&&!Ir.call(t,"callee")};function Lr(){return!1}var te=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ee=te&&typeof module=="object"&&module&&!module.nodeType&&module,Br=ee&&ee.exports===te,re=Br?_.Buffer:void 0,xr=re?re.isBuffer:void 0,ne=xr||Lr,Fr="[object Arguments]",Nr="[object Array]",Ur="[object Boolean]",zr="[object Date]",Wr="[object Error]",Jr="[object Function]",qr="[object Map]",Hr="[object Number]",Kr="[object Object]",Vr="[object RegExp]",Xr="[object Set]",Yr="[object String]",Rr="[object WeakMap]",Zr="[object ArrayBuffer]",Qr="[object DataView]",kr="[object Float32Array]",tn="[object Float64Array]",en="[object Int8Array]",rn="[object Int16Array]",nn="[object Int32Array]",on="[object Uint8Array]",an="[object Uint8ClampedArray]",sn="[object Uint16Array]",cn="[object Uint32Array]",u={};u[kr]=u[tn]=u[en]=u[rn]=u[nn]=u[on]=u[an]=u[sn]=u[cn]=!0,u[Fr]=u[Nr]=u[Zr]=u[Ur]=u[Qr]=u[zr]=u[Wr]=u[Jr]=u[qr]=u[Hr]=u[Kr]=u[Vr]=u[Xr]=u[Yr]=u[Rr]=!1;function un(t){return W(t)&&Rt(t.length)&&!!u[z(t)]}function bt(t){return function(e){return t(e)}}var oe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,q=oe&&typeof module=="object"&&module&&!module.nodeType&&module,fn=q&&q.exports===oe,yt=fn&&Ut.process,B=function(){try{var t=q&&q.require&&q.require("util").types;return t||yt&&yt.binding&&yt.binding("util")}catch(e){}}(),ae=B&&B.isTypedArray,ln=ae?bt(ae):un,gn=Object.prototype,dn=gn.hasOwnProperty;function ie(t,e){var r=gt(t),n=!r&&Dr(t),o=!r&&!n&&ne(t),a=!r&&!n&&!o&&ln(t),i=r||n||o||a,s=i?Gr(t.length,String):[],l=s.length;for(var d in t)(e||dn.call(t,d))&&!(i&&(d=="length"||o&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Pr(d,l)))&&s.push(d);return s}function se(t,e){return function(r){return t(e(r))}}var pn=se(Object.keys,Object),hn=Object.prototype,bn=hn.hasOwnProperty;function yn(t){if(!ht(t))return pn(t);var e=[];for(var r in Object(t))bn.call(t,r)&&r!="constructor"&&e.push(r);return e}function vt(t){return Zt(t)?ie(t):yn(t)}function vn(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var _n=Object.prototype,jn=_n.hasOwnProperty;function $n(t){if(!J(t))return vn(t);var e=ht(t),r=[];for(var n in t)n=="constructor"&&(e||!jn.call(t,n))||r.push(n);return r}function _t(t){return Zt(t)?ie(t,!0):$n(t)}var H=M(Object,"create");function Tn(){this.__data__=H?H(null):{},this.size=0}function mn(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var wn="__lodash_hash_undefined__",Pn=Object.prototype,Sn=Pn.hasOwnProperty;function An(t){var e=this.__data__;if(H){var r=e[t];return r===wn?void 0:r}return Sn.call(e,t)?e[t]:void 0}var On=Object.prototype,Mn=On.hasOwnProperty;function Gn(t){var e=this.__data__;return H?e[t]!==void 0:Mn.call(e,t)}var Cn="__lodash_hash_undefined__";function En(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=H&&e===void 0?Cn:e,this}function G(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}G.prototype.clear=Tn,G.prototype.delete=mn,G.prototype.get=An,G.prototype.has=Gn,G.prototype.set=En;function In(){this.__data__=[],this.size=0}function ot(t,e){for(var r=t.length;r--;)if(Xt(t[r][0],e))return r;return-1}var Dn=Array.prototype,Ln=Dn.splice;function Bn(t){var e=this.__data__,r=ot(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ln.call(e,r,1),--this.size,!0}function xn(t){var e=this.__data__,r=ot(e,t);return r<0?void 0:e[r][1]}function Fn(t){return ot(this.__data__,t)>-1}function Nn(t,e){var r=this.__data__,n=ot(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function T(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}T.prototype.clear=In,T.prototype.delete=Bn,T.prototype.get=xn,T.prototype.has=Fn,T.prototype.set=Nn;var K=M(_,"Map");function Un(){this.size=0,this.__data__={hash:new G,map:new(K||T),string:new G}}function zn(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function at(t,e){var r=t.__data__;return zn(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Wn(t){var e=at(this,t).delete(t);return this.size-=e?1:0,e}function Jn(t){return at(this,t).get(t)}function qn(t){return at(this,t).has(t)}function Hn(t,e){var r=at(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function x(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}x.prototype.clear=Un,x.prototype.delete=Wn,x.prototype.get=Jn,x.prototype.has=qn,x.prototype.set=Hn;function ce(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var ue=se(Object.getPrototypeOf,Object);function Kn(){this.__data__=new T,this.size=0}function Vn(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Xn(t){return this.__data__.get(t)}function Yn(t){return this.__data__.has(t)}var Rn=200;function Zn(t,e){var r=this.__data__;if(r instanceof T){var n=r.__data__;if(!K||n.length<Rn-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new x(n)}return r.set(t,e),this.size=r.size,this}function F(t){var e=this.__data__=new T(t);this.size=e.size}F.prototype.clear=Kn,F.prototype.delete=Vn,F.prototype.get=Xn,F.prototype.has=Yn,F.prototype.set=Zn;function Qn(t,e){return t&&nt(e,vt(e),t)}function kn(t,e){return t&&nt(e,_t(e),t)}var fe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,le=fe&&typeof module=="object"&&module&&!module.nodeType&&module,to=le&&le.exports===fe,ge=to?_.Buffer:void 0,de=ge?ge.allocUnsafe:void 0;function eo(t,e){if(e)return t.slice();var r=t.length,n=de?de(r):new t.constructor(r);return t.copy(n),n}function ro(t,e){for(var r=-1,n=t==null?0:t.length,o=0,a=[];++r<n;){var i=t[r];e(i,r,t)&&(a[o++]=i)}return a}function pe(){return[]}var no=Object.prototype,oo=no.propertyIsEnumerable,he=Object.getOwnPropertySymbols,jt=he?function(t){return t==null?[]:(t=Object(t),ro(he(t),function(e){return oo.call(t,e)}))}:pe;function ao(t,e){return nt(t,jt(t),e)}var io=Object.getOwnPropertySymbols,be=io?function(t){for(var e=[];t;)ce(e,jt(t)),t=ue(t);return e}:pe;function so(t,e){return nt(t,be(t),e)}function ye(t,e,r){var n=e(t);return gt(t)?n:ce(n,r(t))}function co(t){return ye(t,vt,jt)}function uo(t){return ye(t,_t,be)}var $t=M(_,"DataView"),Tt=M(_,"Promise"),mt=M(_,"Set"),ve="[object Map]",fo="[object Object]",_e="[object Promise]",je="[object Set]",$e="[object WeakMap]",Te="[object DataView]",lo=O($t),go=O(K),po=O(Tt),ho=O(mt),bo=O(pt),m=z;($t&&m(new $t(new ArrayBuffer(1)))!=Te||K&&m(new K)!=ve||Tt&&m(Tt.resolve())!=_e||mt&&m(new mt)!=je||pt&&m(new pt)!=$e)&&(m=function(t){var e=z(t),r=e==fo?t.constructor:void 0,n=r?O(r):"";if(n)switch(n){case lo:return Te;case go:return ve;case po:return _e;case ho:return je;case bo:return $e}return e});var yo=Object.prototype,vo=yo.hasOwnProperty;function _o(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&vo.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var me=_.Uint8Array;function wt(t){var e=new t.constructor(t.byteLength);return new me(e).set(new me(t)),e}function jo(t,e){var r=e?wt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var $o=/\w*$/;function To(t){var e=new t.constructor(t.source,$o.exec(t));return e.lastIndex=t.lastIndex,e}var we=L?L.prototype:void 0,Pe=we?we.valueOf:void 0;function mo(t){return Pe?Object(Pe.call(t)):{}}function wo(t,e){var r=e?wt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Po="[object Boolean]",So="[object Date]",Ao="[object Map]",Oo="[object Number]",Mo="[object RegExp]",Go="[object Set]",Co="[object String]",Eo="[object Symbol]",Io="[object ArrayBuffer]",Do="[object DataView]",Lo="[object Float32Array]",Bo="[object Float64Array]",xo="[object Int8Array]",Fo="[object Int16Array]",No="[object Int32Array]",Uo="[object Uint8Array]",zo="[object Uint8ClampedArray]",Wo="[object Uint16Array]",Jo="[object Uint32Array]";function qo(t,e,r){var n=t.constructor;switch(e){case Io:return wt(t);case Po:case So:return new n(+t);case Do:return jo(t,r);case Lo:case Bo:case xo:case Fo:case No:case Uo:case zo:case Wo:case Jo:return wo(t,r);case Ao:return new n;case Oo:case Co:return new n(t);case Mo:return To(t);case Go:return new n;case Eo:return mo(t)}}function Ho(t){return typeof t.constructor=="function"&&!ht(t)?jr(ue(t)):{}}var Ko="[object Map]";function Vo(t){return W(t)&&m(t)==Ko}var Se=B&&B.isMap,Xo=Se?bt(Se):Vo,Yo="[object Set]";function Ro(t){return W(t)&&m(t)==Yo}var Ae=B&&B.isSet,Zo=Ae?bt(Ae):Ro,Qo=1,ko=2,ta=4,Oe="[object Arguments]",ea="[object Array]",ra="[object Boolean]",na="[object Date]",oa="[object Error]",Me="[object Function]",aa="[object GeneratorFunction]",ia="[object Map]",sa="[object Number]",Ge="[object Object]",ca="[object RegExp]",ua="[object Set]",fa="[object String]",la="[object Symbol]",ga="[object WeakMap]",da="[object ArrayBuffer]",pa="[object DataView]",ha="[object Float32Array]",ba="[object Float64Array]",ya="[object Int8Array]",va="[object Int16Array]",_a="[object Int32Array]",ja="[object Uint8Array]",$a="[object Uint8ClampedArray]",Ta="[object Uint16Array]",ma="[object Uint32Array]",c={};c[Oe]=c[ea]=c[da]=c[pa]=c[ra]=c[na]=c[ha]=c[ba]=c[ya]=c[va]=c[_a]=c[ia]=c[sa]=c[Ge]=c[ca]=c[ua]=c[fa]=c[la]=c[ja]=c[$a]=c[Ta]=c[ma]=!0,c[oa]=c[Me]=c[ga]=!1;function it(t,e,r,n,o,a){var i,s=e&Qo,l=e&ko,d=e&ta;if(i!==void 0)return i;if(!J(t))return t;var v=gt(t);if(v){if(i=_o(t),!s)return $r(t,i)}else{var b=m(t),N=b==Me||b==aa;if(ne(t))return eo(t,s);if(b==Ge||b==Oe||N&&!o){if(i=l||N?{}:Ho(t),!s)return l?so(t,kn(i,t)):ao(t,Qn(i,t))}else{if(!c[b])return o?t:{};i=qo(t,b,s)}}a||(a=new F);var V=a.get(t);if(V)return V;a.set(t,i),Zo(t)?t.forEach(function(j){i.add(it(j,e,r,j,t,a))}):Xo(t)&&t.forEach(function(j,p){i.set(p,it(j,e,r,p,t,a))});var st=d?l?uo:co:l?_t:vt,ct=v?void 0:st(t);return Tr(ct||t,function(j,p){ct&&(p=j,j=t[p]),Yt(i,p,it(j,e,r,p,t,a))}),i}var wa=1,Pa=4;function Ce(t){return it(t,wa|Pa)}function Sa(t){const e=lt.transform([t.longitude,t.latitude],lt.WGS84,lt.GCJ02);return{longitude:e[0],latitude:e[1]}}var Ee;(t=>{function e(o,a){switch(a){case 0:return Ce(o);case 1:return{latitude:o.coordinates[1],longitude:o.coordinates[0]};case 2:return{latitude:o[1],longitude:o[0]}}}t.getCoordinate=e;function r(o,a){switch(a){case 0:return Ce(o);case 1:return{type:"Point",coordinates:[o.longitude,o.latitude]};case 2:return[o.longitude,o.latitude]}}t.createLocationPoint=r;function n(o,a){return Array.isArray(o)?r(e(o,2),a):o.type==="Point"?r(e(o,1),a):r(e(o,0),a)}t.convertLocationPoint=n})(Ee||(Ee={}));function Aa(){postMessage({msg:"location-request"})}function Oa(t){postMessage({msg:"location",data:t})}function Ma(t){postMessage({msg:"error",data:t||{}})}function Ga(){return Pt=!0,new Promise((t,e)=>{De=r=>{Pt=!1,r.status?t(r.location):e(r.error)},Aa()})}let Ie=0,Pt=!1,De=()=>{};function Ca(t=200,e,r=()=>{}){let n={latitude:0,longitude:0};Ie=setInterval(()=>{const o=i=>{const s=Sa({latitude:i.latitude,longitude:i.longitude});(s.latitude!==n.latitude||s.longitude!==n.longitude)&&(console.log("Geolocation Changed to: (LAT ".concat(s.latitude,", LNG ").concat(s.longitude,")")),e(s),n=s)},a=i=>{console.error("Error: "+i),r(i)};Pt||Ga().then(o).catch(a)},t)}onmessage=t=>{switch(t.data.msg){case"start":{Ca(t.data.interval,Oa,Ma);break}case"stop":{clearInterval(Ie);break}case"location-post":{De(t.data.location);break}}}})();
